(this.webpackJsonpeyemo=this.webpackJsonpeyemo||[]).push([[0],{101:function(e,t,n){e.exports={timeInput:"TimeInput_timeInput__1OGkV",changeButton:"TimeInput_changeButton__1tKZm"}},102:function(e,t,n){e.exports={player:"MultiPlayer_player__3BLbd",playerPlaceholder:"MultiPlayer_playerPlaceholder__duL1K"}},103:function(e,t,n){e.exports={container:"contentView_container__RRG_Y",title:"contentView_title__1pCuk"}},104:function(e,t,n){e.exports={root:"GifsPanel_root__1ZDy0",searchLine:"GifsPanel_searchLine__3JEx-",gifsPanel:"GifsPanel_gifsPanel__1yNS-"}},105:function(e,t,n){e.exports={container:"contentBlock_container__1pOST",content:"contentBlock_content__1xBTD"}},145:function(e,t,n){e.exports={container:"CanvasLayer_container__3HORa"}},147:function(e,t,n){e.exports={container:"sidebar_container__1TYtp"}},148:function(e,t,n){e.exports={searchLine:"SourcesPanel_searchLine__13oZu"}},276:function(e,t,n){"use strict";n.r(t);var a,i,r,c,o,s,l,u,d,h,p,b,j,f=n(1),m=n(0),y=n.n(m),v=n(15),x=n.n(v),O=n(150),g=n(310),_=n(21),P=n(74),C=n(75),T=n(152),I=n(151),w=n(308),S=n(309),k=n(34),N=n.n(k),B=n(76),E=n.n(B),M=n(29),z=n(17),A=n(106),L=n(14),R=(n(164),n(5)),D=n(109),W=n(138),G=n.n(W);Object(R.i)({enforceActions:"never"}),function(e){e.Create="create",e.PlayOne="playOne",e.PlayAll="playAll",e.Show="show"}(j||(j={}));var V=G()(window.location.href,!0),F=null,U=null;if(V.query.story){var Y=decodeURIComponent(V.query.story);F=Y.split(",").map((function(e){var t=e.split("::");return{id:t[0],index:parseFloat(t[1]),url:t[2],cut:{startTime:parseFloat(t[3]),endTime:parseFloat(t[4])}}}))}if(V.query.video){var H=decodeURIComponent(V.query.video);U=H.split(",").map((function(e){var t=e.split("::");return{id:t[0],index:parseFloat(t[1]),url:t[2]}}))}var q=U&&U.length>0,J=new(a=function(){function e(){var t=this;Object(P.a)(this,e),Object(M.a)(this,"sources",i,this),Object(M.a)(this,"mode",r,this),Object(M.a)(this,"cuts",c,this),Object(M.a)(this,"gifs",o,this),Object(M.a)(this,"players",s,this),Object(M.a)(this,"activePlayerIndex",l,this),Object(M.a)(this,"currentCutIndex",u,this),Object(M.a)(this,"currentSourceIndex",d,this),Object(M.a)(this,"dragingUrl",h,this),Object(M.a)(this,"isEnableCanvas",p,this),Object(M.a)(this,"canvasSize",b,this),Object(R.o)(this),Object(R.g)((function(){return console.log("--\x3e In ".concat(t.mode.toUpperCase()," mode"))}))}return Object(C.a)(e,[{key:"addCut",value:function(e){this.cuts.push({id:Object(D.a)(),index:this.cuts.length,url:this.sources[this.currentSourceIndex].url,cut:{startTime:e.startTime,endTime:e.endTime}})}},{key:"addSource",value:function(e){this.sources=[].concat(Object(A.a)(this.sources),[{id:Object(D.a)(),index:this.sources.length,url:e}]),this.changeModeToCreate(this.sources.length-1)}},{key:"addGif",value:function(e){this.gifs=[].concat(Object(A.a)(this.gifs),[{id:Object(D.a)(),index:this.gifs.length,src:e.images.original.url,x:0,y:0,height:.2*this.canvasSize.height,width:e.images.original.width*this.canvasSize.height*.2/e.images.original.height,canvasHeight:this.canvasSize.height,canvasWidth:this.canvasSize.width}])}},{key:"scaleGifs",value:function(){for(var e=0;e<this.gifs.length;e+=1){var t=this.gifs[e],n=t.height,a=t.width,i=t.canvasWidth,r=t.canvasHeight,c=t.x,o=t.y,s=this.canvasSize.width/i,l=this.canvasSize.height/r;this.gifs[e]=Object(z.a)(Object(z.a)({},this.gifs[e]),{},{height:n*l,width:a*s,x:c*s,y:o*l,canvasWidth:this.canvasSize.width,canvasHeight:this.canvasSize.height})}}},{key:"changeSource",value:function(e){this.currentSourceIndex=e,this.changeModeToCreate(e)}},{key:"removeCut",value:function(e){(!this.players[this.activePlayerIndex].playing||e!==this.currentCutIndex&&e!==this.nextCutIndex)&&(e!==this.currentCutIndex?this.cuts=this.cuts.filter((function(t){return t.index!==e})).map((function(e,t){return e.index=t,e})):this.changeModeToCreate(0))}},{key:"changeModeToCreate",value:function(e){this.mode=j.Create,this.currentSourceIndex=e;for(var t=0;t<this.players.length;t+=1){var n;t===this.activePlayerIndex?(this.players[t]=Object(z.a)(Object(z.a)({},this.players[t]),{},{isVisible:!0,url:this.sources[e].url,playing:!1}),this.currentCutIndex=-1):(this.players[t].isVisible=!1,this.players[t].playing=!1),null===(n=this.players[t].instance)||void 0===n||n.getInternalPlayer().stopVideo()}}},{key:"changeModeToPlayOne",value:function(e){var t=this;this.mode=j.PlayOne,this.players[this.activePlayerIndex]=Object(z.a)(Object(z.a)({},this.players[this.activePlayerIndex]),{},{url:this.cuts[e].url,cutIndex:e,playing:!1}),this.currentCutIndex=e,setTimeout((function(){return t.startPlayingCurrentCut(t.cuts[t.currentCutIndex].cut)}),500)}},{key:"changeModeToPlayAll",value:function(){if(0===this.cuts.length)return this.changeModeToCreate(0),void(this.players[this.activePlayerIndex].playing=!0);this.mode=j.PlayAll,this.setDefaultPlayerState()}},{key:"changeModeToShow",value:function(){this.mode=j.Show,this.setDefaultPlayerState()}},{key:"startPlayingCurrentCut",value:function(e){var t,n=this;e&&(null===(t=this.players[this.activePlayerIndex].instance)||void 0===t||t.seekTo(e.startTime),setTimeout((function(){var t;null===(t=n.players[n.activePlayerIndex].instance)||void 0===t||t.seekTo(e.startTime),n.players[n.activePlayerIndex].playing=!0}),2e3))}},{key:"setDefaultPlayerState",value:function(){var e=this;this.players[this.activePlayerIndex].playing=!1,setTimeout((function(){for(var t=0;t<e.players.length;t+=1){var n;null===(n=e.players[t].instance)||void 0===n||n.getInternalPlayer().stopVideo(),e.players[t]=0===t?{id:e.players[t].id,instance:e.players[t].instance,isVisible:!0,muted:!1,url:e.cuts[0].url,playing:!1,cutIndex:0}:{id:e.players[t].id,instance:e.players[t].instance,isVisible:!1,muted:!1,url:e.cuts[0].url,playing:!1}}e.activePlayerIndex=0,e.currentCutIndex=0,e.startPlayingCurrentCut(e.cuts[e.currentCutIndex].cut)}),1e3)}},{key:"shareUrl",get:function(){if(0===this.sources.length)return null;var e=window.location.href.split("?")[0];return"".concat(e,"?video=").concat(encodeURIComponent(this.sources.map((function(e){return[e.id,e.index,e.url].join("::")})).join(",")),"&story=").concat(encodeURIComponent(this.cuts.map((function(e,t){var n,a;return[e.id,e.index,e.url,null===(n=e.cut)||void 0===n?void 0:n.startTime,null===(a=e.cut)||void 0===a?void 0:a.endTime].join("::")})).join(",")))}},{key:"trailerLength",get:function(){return this.cuts.reduce((function(e,t,n){return t.cut?e+t.cut.endTime-t.cut.startTime:e}),0)}},{key:"nextPlayerIndex",get:function(){return this.activePlayerIndex===this.players.length-1?0:this.activePlayerIndex+1}},{key:"nextCutIndex",get:function(){return this.currentCutIndex===this.cuts.length-1?0:this.currentCutIndex+1}}]),e}(),i=Object(L.a)(a.prototype,"sources",[R.p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return U||[]}}),r=Object(L.a)(a.prototype,"mode",[R.p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return q?j.Show:j.Create}}),c=Object(L.a)(a.prototype,"cuts",[R.p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return F||[]}}),o=Object(L.a)(a.prototype,"gifs",[R.p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),s=Object(L.a)(a.prototype,"players",[R.p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return[0,1,2].map((function(t,n){return{id:n,isVisible:0===n,playing:!1,muted:!1,url:e.sources[0]?e.sources[0].url:""}}))}}),l=Object(L.a)(a.prototype,"activePlayerIndex",[R.p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),u=Object(L.a)(a.prototype,"currentCutIndex",[R.p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.cuts.length>0?0:-1}}),d=Object(L.a)(a.prototype,"currentSourceIndex",[R.p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.sources.length>0?0:-1}}),h=Object(L.a)(a.prototype,"dragingUrl",[R.p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),p=Object(L.a)(a.prototype,"isEnableCanvas",[R.p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),b=Object(L.a)(a.prototype,"canvasSize",[R.p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{height:0,width:0}}}),Object(L.a)(a.prototype,"shareUrl",[R.h],Object.getOwnPropertyDescriptor(a.prototype,"shareUrl"),a.prototype),Object(L.a)(a.prototype,"trailerLength",[R.h],Object.getOwnPropertyDescriptor(a.prototype,"trailerLength"),a.prototype),Object(L.a)(a.prototype,"nextPlayerIndex",[R.h],Object.getOwnPropertyDescriptor(a.prototype,"nextPlayerIndex"),a.prototype),Object(L.a)(a.prototype,"nextCutIndex",[R.h],Object.getOwnPropertyDescriptor(a.prototype,"nextCutIndex"),a.prototype),Object(L.a)(a.prototype,"addCut",[R.f],Object.getOwnPropertyDescriptor(a.prototype,"addCut"),a.prototype),Object(L.a)(a.prototype,"addSource",[R.f],Object.getOwnPropertyDescriptor(a.prototype,"addSource"),a.prototype),Object(L.a)(a.prototype,"addGif",[R.f],Object.getOwnPropertyDescriptor(a.prototype,"addGif"),a.prototype),Object(L.a)(a.prototype,"scaleGifs",[R.f],Object.getOwnPropertyDescriptor(a.prototype,"scaleGifs"),a.prototype),Object(L.a)(a.prototype,"changeSource",[R.f],Object.getOwnPropertyDescriptor(a.prototype,"changeSource"),a.prototype),Object(L.a)(a.prototype,"removeCut",[R.f],Object.getOwnPropertyDescriptor(a.prototype,"removeCut"),a.prototype),Object(L.a)(a.prototype,"changeModeToCreate",[R.f],Object.getOwnPropertyDescriptor(a.prototype,"changeModeToCreate"),a.prototype),Object(L.a)(a.prototype,"changeModeToPlayOne",[R.f],Object.getOwnPropertyDescriptor(a.prototype,"changeModeToPlayOne"),a.prototype),Object(L.a)(a.prototype,"changeModeToPlayAll",[R.f],Object.getOwnPropertyDescriptor(a.prototype,"changeModeToPlayAll"),a.prototype),Object(L.a)(a.prototype,"changeModeToShow",[R.f],Object.getOwnPropertyDescriptor(a.prototype,"changeModeToShow"),a.prototype),Object(L.a)(a.prototype,"startPlayingCurrentCut",[R.f],Object.getOwnPropertyDescriptor(a.prototype,"startPlayingCurrentCut"),a.prototype),a);function X(e){return e<10?"0".concat(e):e}function K(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e)return"00:00:00.0";var n=Math.floor(e/60/60),a=Math.floor(e/60%60),i=Math.floor(e%60),r=Math.floor(10*(e-Math.floor(e))),c="".concat(X(n),":").concat(X(a),":").concat(X(i));return t&&(c="".concat(c,".").concat(r)),c}var Z=n(66),Q=n.n(Z),$=n(312),ee=n(307),te=n(311),ne=n(142),ae=n.n(ne),ie=n(143),re=n.n(ie),ce=n(101),oe=n.n(ce);function se(e){var t=e.onClick,n=e.position;return Object(f.jsx)($.a,{position:n,children:Object(f.jsx)(ee.a,{edge:n,onClick:t,className:oe.a.changeButton,children:"start"===n?Object(f.jsx)(ae.a,{style:{fontSize:12}}):Object(f.jsx)(re.a,{style:{fontSize:12}})})})}function le(e){var t=Object(m.useRef)(null);function n(e){e.preventDefault(),e.deltaY>0?i():a()}function a(){if(e.value){var t=e.value-.1;t<0&&(t=0),e.onChange(t)}}function i(){e.onChange(e.value+.1)}Object(m.useEffect)((function(){var e=t.current;return null===e||void 0===e||e.addEventListener("wheel",n),function(){null===e||void 0===e||e.removeEventListener("wheel",n)}}),[e.value]);var r=Object(z.a)(Object(z.a)({},e),{},{value:K(e.value,!0)});return Object(f.jsx)(te.a,Object(z.a)(Object(z.a)({},r),{},{className:oe.a.timeInput,size:"small",helperText:null,variant:"outlined",onChange:function(e){},ref:t,InputProps:{startAdornment:Object(f.jsx)(se,{position:"start",onClick:a}),endAdornment:Object(f.jsx)(se,{position:"end",onClick:i}),readOnly:!0}}))}var ue=n(27),de=n(53),he=n(145),pe=n.n(he),be=(n(209),Object(_.a)((function(e){var t=e.gif,n=e.isSelected,a=e.onChange,i=e.onSelect,r=y.a.useRef(null),c=y.a.useRef(),o=y.a.useMemo((function(){return document.createElement("canvas")}),[]);y.a.useEffect((function(){var e;return window.gifler(t.src).get((function(t){(e=t).animateInCanvas(o),e.onDrawFrame=function(e,t){e.drawImage(t.buffer,t.x,t.y),r.current&&r.current.getLayer().draw()}})),function(){return e.stop()}}),[t.src,o]),y.a.useEffect((function(){n&&c.current&&(c.current.nodes([r.current]),c.current.getLayer().batchDraw())}),[n]);return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(de.a,{ref:r,image:o,x:t.x,y:t.y,width:t.width,height:t.height,draggable:!0,onClick:i,onTap:i,onDragEnd:function(e){a(Object(z.a)(Object(z.a)({},t),{},{x:e.target.x(),y:e.target.y()}))},onTransformEnd:function(e){var n=r.current,i=n.scaleX(),c=n.scaleY();n.scaleX(1),n.scaleY(1),a(Object(z.a)(Object(z.a)({},t),{},{x:n.x(),y:n.y(),width:Math.max(5,n.width()*i),height:Math.max(n.height()*c)}))}}),n&&Object(f.jsx)(de.d,{ref:c,boundBoxFunc:function(e,t){return t.width<5||t.height<5?e:t}})]})}))),je=Object(_.a)((function(){var e=y.a.useState(null),t=Object(ue.a)(e,2),n=t[0],a=t[1],i=function(e){e.target===e.target.getStage()&&a(null)},r=function(e){a(e)},c=function(e,t){return J.gifs[e]=t};return Object(f.jsx)("div",{children:Object(f.jsx)(de.c,{className:pe.a.container,width:J.canvasSize.width,height:J.canvasSize.height,style:J.isEnableCanvas?{pointerEvents:"all"}:{pointerEvents:"none"},onMouseDown:i,onTouchStart:i,children:Object(f.jsx)(de.b,{children:J.gifs.map((function(e,t){return Object(f.jsx)(be,{gif:e,isSelected:e.id===n,onSelect:r.bind(null,e.id),onChange:c.bind(null,e.index)},e.id)}))})})})})),fe=n(82),me=n.n(fe),ye=n(102),ve=n.n(ye);var xe,Oe=Object(_.a)((function(e){var t=e.updatePosition;function n(e,t){console.log("Player ".concat(e," onReady")),J.players[e].instance=t}function a(e,n){if(e===J.activePlayerIndex){var a=J.players[e],i=J.players[e].cutIndex;if(a.isVisible&&t(n.playedSeconds),void 0!==i&&-1!==J.currentCutIndex){var r=J.cuts[i].cut;switch(console.log("Player ".concat(e," onProgress in ").concat(n.playedSeconds," sec (s: ").concat(null===r||void 0===r?void 0:r.startTime," e: ").concat(null===r||void 0===r?void 0:r.endTime)),J.mode){case j.Create:break;case j.PlayOne:if(!a.isVisible||h(r,n.playedSeconds))return;b(e);break;case j.PlayAll:case j.Show:if(!a.isVisible||h(r,n.playedSeconds))return;p(e)}}else console.log("No cut index in player")}}function i(e){console.log("Player ".concat(e," onBuffer"))}function r(e){console.log("Player ".concat(e," onBufferEnd"))}function c(e){console.log("Player ".concat(e," onStart"))}function o(e){if(console.log("Player ".concat(e," onPlay"),J.activePlayerIndex,J.currentCutIndex,J.nextPlayerIndex,J.nextCutIndex),J.players[e].muted=!1,e!==J.activePlayerIndex){var t,n,a=null===(t=J.cuts[J.nextCutIndex].cut)||void 0===t?void 0:t.startTime;null===(n=J.players[J.nextPlayerIndex].instance)||void 0===n||n.seekTo(a||0),J.players[e].playing=!1}else switch(J.mode){case j.Create:case j.PlayOne:break;case j.PlayAll:case j.Show:d()}}function s(e){console.log("Player ".concat(e," onPause"))}function l(e){console.log("Player ".concat(e," onEnded"))}function u(e,t){console.log("Player ".concat(e," onSeek"))}function d(){var e=J.nextPlayerIndex,t=J.nextCutIndex;console.log("Player ".concat(e," START preload")),J.players[e]=Object(z.a)(Object(z.a)({},J.players[e]),{},{cutIndex:J.cuts[t].index,url:J.cuts[t].url,muted:!0,playing:!0})}function h(e,t){return!!e&&(t>=e.startTime&&t<=e.endTime)}function p(e){if(b(e),J.currentCutIndex===J.cuts.length-1)console.log("Last cut is end");else{var t;console.log("Go from ".concat(J.currentCutIndex," to ").concat(J.nextCutIndex," cut")),J.players[J.activePlayerIndex].isVisible=!1,J.players[J.nextPlayerIndex].isVisible=!0,J.players[J.nextPlayerIndex].playing=!0,null===(t=J.players[J.nextPlayerIndex].instance)||void 0===t||t.seekTo(J.cuts[J.nextCutIndex].cut.startTime);var n=J.nextPlayerIndex,a=J.nextCutIndex;J.activePlayerIndex=n,J.currentCutIndex=a}}function b(e){var t;J.players[e].playing=!1,null===(t=J.players[e].instance)||void 0===t||t.getInternalPlayer().stopVideo()}return Object(f.jsx)("div",{children:J.sources.length>0?J.players.map((function(e,t,d){var h=d.length-1-t;return Object(f.jsx)("div",{style:{visibility:J.players[h].isVisible?"visible":"hidden"},children:Object(f.jsx)(me.a,{playing:J.players[h].playing,className:ve.a.player,url:J.players[h].url,muted:J.players[h].muted,width:"100%",height:"100%",onPlay:o.bind(null,h),onProgress:a.bind(null,h),onStart:c.bind(null,h),onPause:s.bind(null,h),onEnded:l.bind(null,h),onReady:n.bind(null,h),onSeek:u.bind(null,h),onBufferEnd:r.bind(null,h),onBuffer:i.bind(null,h),progressInterval:100,controls:!0,config:{youtube:{playerVars:{}}}})},J.players[h].id)})):Object(f.jsx)("div",{className:ve.a.playerPlaceholder})})})),ge=function(e){Object(T.a)(n,e);var t=Object(I.a)(n);function n(e){var a;return Object(P.a)(this,n),(a=t.call(this,e)).state=void 0,a.canvasRef=void 0,a.changeStart=function(e){a.setState({cut:{startTime:e,endTime:Math.max(a.state.cut.endTime,e+1)}})},a.changeEnd=function(e){a.setState({cut:{startTime:Math.min(a.state.cut.startTime,e-1),endTime:e}})},a.play=function(){var e,t=a.state.cut;t&&(J.players[J.activePlayerIndex].playing=!1,null===(e=J.players[J.activePlayerIndex].instance)||void 0===e||e.seekTo(t.startTime),setTimeout((function(){J.players[J.activePlayerIndex].playing=!0;var e=setInterval((function(){var t=a.state.cut;if(t){var n=J.players[J.activePlayerIndex].instance,i=n?n.getCurrentTime():0;i>=(null===t||void 0===t?void 0:t.startTime)&&i<=(null===t||void 0===t?void 0:t.endTime)||(clearInterval(e),J.players[J.activePlayerIndex].playing=!1)}}),100)}),1e3))},a.clear=function(){a.setState({cut:null})},a.onAddCut=function(){var e=a.state.cut;e&&(J.addCut(e),a.setState({startTime:0,endTime:0}))},a.updatePosition=function(e){a.setState({position:e})},a.onStartFrame=function(){var e=a.state,t=e.position,n=e.cut,i={startTime:(null===n||void 0===n?void 0:n.startTime)||0,endTime:(null===n||void 0===n?void 0:n.endTime)||0};i.startTime=t,i.endTime<t&&(i.endTime=t+5),a.setState({cut:i})},a.onEndFrame=function(){var e=a.state,t=e.position,n=e.cut,i={startTime:(null===n||void 0===n?void 0:n.startTime)||0,endTime:(null===n||void 0===n?void 0:n.endTime)||0};i.endTime=t,i.startTime>t&&(i.startTime=t-5),a.setState({cut:i})},a.onResizePlayerWrapper=function(e){var t=e.width,n=e.height;J.canvasSize={width:t,height:n},J.scaleGifs()},a.state={cut:null,playing:!1,position:0},a.canvasRef=y.a.createRef(),a}return Object(C.a)(n,[{key:"componentDidMount",value:function(){this.canvasRef.current&&(J.canvasSize={width:this.canvasRef.current.offsetWidth,height:this.canvasRef.current.offsetHeight})}},{key:"render",value:function(){var e=this.state,t=e.position,n=e.cut;return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsxs)("div",{style:{fontSize:"10px"},children:["Player: ",J.activePlayerIndex,"/",J.players.length-1," Cut: ",J.currentCutIndex,"/",J.cuts.length-1," Source: ",J.currentSourceIndex,"/",J.sources.length-1]}),Object(f.jsxs)(w.a,{ref:this.canvasRef,className:N()("padded",Q.a.playerWrapper),children:[Object(f.jsx)(Oe,{updatePosition:this.updatePosition}),Object(f.jsx)(je,{}),Object(f.jsx)(E.a,{onResize:this.onResizePlayerWrapper})]}),J.mode!==j.Show&&J.sources.length>0?Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(w.a,{justify:"center",container:!0,children:K(t,!0)}),Object(f.jsxs)(w.a,{container:!0,children:[Object(f.jsx)(w.a,{className:"padded",item:!0,lg:!0,children:Object(f.jsx)(S.a,{variant:"contained",disableElevation:!0,fullWidth:!0,onClick:this.onStartFrame,color:"primary",children:"Start of frame"})}),Object(f.jsx)(w.a,{className:"padded",item:!0,lg:!0,children:Object(f.jsx)(S.a,{variant:"contained",disableElevation:!0,onClick:this.onEndFrame,fullWidth:!0,color:"primary",children:"End of frame"})})]}),n&&Object(f.jsxs)(w.a,{container:!0,justify:"center",className:Q.a.timeRow,alignContent:"flex-end",children:[Object(f.jsx)(w.a,{item:!0,lg:!0,children:Object(f.jsx)(le,{value:n.startTime,label:"Start time",onChange:this.changeStart})}),Object(f.jsx)(w.a,{item:!0,lg:!0,children:Object(f.jsx)(le,{value:null===n||void 0===n?void 0:n.endTime,label:"End time",onChange:this.changeEnd})}),Object(f.jsxs)(w.a,{item:!0,className:Q.a.buttons,xs:!0,justify:"flex-end",alignContent:"center",container:!0,wrap:"nowrap",children:[Object(f.jsx)(S.a,{variant:"outlined",disableElevation:!0,onClick:this.play,children:"Play"}),Object(f.jsx)(S.a,{variant:"contained",color:"primary",disableElevation:!0,onClick:this.onAddCut,children:"Add"}),Object(f.jsx)(S.a,{variant:"contained",disableElevation:!0,onClick:this.clear,children:"Clear"})]})]})]}):Object(f.jsx)(f.Fragment,{children:Object(f.jsxs)(w.a,{className:Q.a.previewButtons,container:!0,children:[Object(f.jsx)(S.a,{variant:"contained",size:"large",color:"primary",disableElevation:!0,onClick:function(){return J.changeModeToShow()},children:"Play trailer"}),Object(f.jsx)(S.a,{variant:"contained",color:"primary",disableElevation:!0,onClick:function(){return J.changeModeToCreate(0)},children:"Make your own trailer"})]})})]})}}]),n}(y.a.Component),_e=Object(_.a)(ge),Pe=n(88),Ce=n.n(Pe),Te=n(19),Ie=n(103),we=n.n(Ie),Se=function(e){var t=e.title,n=e.children;return Object(f.jsxs)("div",{className:we.a.container,children:[Object(f.jsx)("h2",{className:we.a.title,children:t}),n]})},ke=function(){return Object(f.jsx)(Se,{title:"Add Music",children:Object(f.jsx)("div",{children:"\u0411\u043b\u043e\u043a \u0441 \u0430\u0443\u0434\u0438\u043e-\u043a\u043e\u043d\u0442\u0435\u043d\u0442\u043e\u043c"})})},Ne=n(146),Be=n(61),Ee=n(104),Me=n.n(Ee),ze=n(55),Ae=n.n(ze),Le=n.p+"static/media/copyIcon.65a342f0.svg",Re=n.p+"static/media/closeIcon.0b48234f.svg",De=function(e){var t=e.value,n=e.placeholder,a=e.onChange;return Object(f.jsxs)("div",{className:Ae.a.container,children:[Object(f.jsx)("input",{onChange:function(e){return a(e.target.value)},value:t,placeholder:n,className:Ae.a.input}),t&&Object(f.jsxs)("div",{className:Ae.a.buttonsBlock,children:[Object(f.jsx)("button",{className:Ae.a.clearButton,onClick:function(){return a("")},children:Object(f.jsx)("img",{src:Re})}),Object(f.jsx)("button",{className:Ae.a.copyButton,onClick:function(){navigator.clipboard.writeText(t).then((function(){alert("\u0422\u0435\u043a\u0441\u0442 \u0441\u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u043d \u0432 \u0431\u0443\u0444\u0435\u0440 \u043e\u0431\u043c\u0435\u043d\u0430")}))},children:Object(f.jsx)("img",{src:Le})})]})]})},We=new Be.GiphyFetch("IPKlChsULe1Qlt19wbrWHlnjDr04SZa8");function Ge(e){var t=e.width,n=e.searchText,a=e.fetchType;return Object(f.jsx)(Ne.Grid,{fetchGifs:function(e){return a===xe.Search?We.search(n,{offset:e,limit:10}):(xe.Trending,We.trending({offset:e,limit:10}))},width:t,columns:4,gutter:6,onGifClick:function(e,t){t.preventDefault(),J.addGif(e)}})}!function(e){e.Trending="trending",e.Search="search"}(xe||(xe={}));var Ve=function(){var e=y.a.createRef(),t=Object(m.useState)(null),n=Object(ue.a)(t,2),a=n[0],i=n[1],r=Object(m.useState)(""),c=Object(ue.a)(r,2),o=c[0],s=c[1],l=Object(m.useState)(!0),u=Object(ue.a)(l,2),d=u[0],h=u[1];return Object(m.useEffect)((function(){e&&i(e.current.offsetWidth)}),[e]),Object(m.useEffect)((function(){var e=setTimeout((function(){h(!0)}),1e3);return function(){return clearTimeout(e)}}),[o]),Object(f.jsx)(Se,{title:"Add Gif",children:Object(f.jsxs)("div",{ref:e,className:Me.a.root,children:[Object(f.jsx)(De,{placeholder:"Search with GIPHY",value:o,onChange:function(e){h(!1),s(e)}}),a&&Object(f.jsxs)("div",{className:Me.a.gifsPanel,children:[d&&""===o&&Object(f.jsx)(Ge,{width:a,searchText:o,fetchType:xe.Trending}),d&&""!==o&&Object(f.jsx)(Ge,{width:a,searchText:o,fetchType:xe.Search}),Object(f.jsx)(E.a,{onResize:function(e){e.width}})]})]})})},Fe=n(67),Ue=n.n(Fe),Ye=function(e){var t=e.value,n=e.isActive,a=e.icon,i=e.onClick;return Object(f.jsx)("div",{onClick:function(){return i(t)},className:N()(Ue.a.tabItem,Object(Te.a)({},Ue.a.active,n)),children:Object(f.jsx)("img",{src:a,className:N()(Ue.a.icon,Object(Te.a)({},Ue.a.activeIcon,n))})})},He=n(147),qe=n.n(He),Je=function(e){var t=e.tabs,n=e.activeTab,a=e.handleClick;return Object(f.jsx)("div",{className:qe.a.container,children:t.map((function(e){var t=e.icon,i=e.id;return Object(f.jsx)(Ye,{icon:t,isActive:i===n,value:i,onClick:a},i)}))})},Xe=n(148),Ke=n.n(Xe),Ze="blue",Qe="red",$e=n(56),et=n.n($e),tt=function(e){var t,n=e.children,a=e.disabled,i=e.colorTheme,r=e.withBorder,c=e.onClick;return Object(f.jsx)("button",{className:N()(et.a.button,(t={},Object(Te.a)(t,et.a.disabled,a),Object(Te.a)(t,et.a.withBorder,r),Object(Te.a)(t,et.a.redTheme,i===Qe),Object(Te.a)(t,et.a.blueTheme,i===Ze),t)),disabled:a,onClick:c,children:n})},nt=n(149),at=n.n(nt),it=n(57),rt=n.n(it),ct=n(58),ot=n.n(ct),st=n.p+"static/media/close.b731002b.svg",lt=Object(_.a)((function(e){var t=e.cut,n=e.idx,a=e.isActive,i=e.onClick,r=Object(m.useRef)(null),c=Object(m.useRef)(null),o=function(){c.current.player.player.player.playVideo()},s=function(){c.current.player.player.player.pauseVideo()};return Object(m.useEffect)((function(){var e=r.current;return e&&(e.addEventListener("mouseover",(function(){o()})),e.addEventListener("mouseout",(function(){s()}))),function(){e&&(e.removeEventListener("mouseover",(function(){o()})),e.removeEventListener("mouseout",(function(){s()})))}}),[r]),Object(f.jsx)(f.Fragment,{children:Object(f.jsxs)("div",{className:ot.a.wrapper,children:[Object(f.jsxs)("div",{className:ot.a.buttons,children:[Object(f.jsxs)("div",{className:ot.a.checkboxWrapper,children:[Object(f.jsx)("label",{htmlFor:n.toString(),children:"\u0412\u044b\u0431\u0440\u0430\u0442\u044c"}),Object(f.jsx)("input",{id:n.toString(),type:"checkbox",checked:a,className:ot.a.checkbox,onChange:function(){return i(n)}})]}),Object(f.jsx)("button",{onClick:function(){J.removeCut(n)},children:Object(f.jsx)("img",{src:st})})]}),Object(f.jsx)("div",{className:ot.a.playerWrapper,ref:r,children:Object(f.jsx)(me.a,{ref:c,width:"100%",height:"100%",url:J.cuts[n].url,muted:!0,controls:!1,onEnded:function(){return e=t.startTime,void c.current.player.player.player.seekTo(e);var e},config:{youtube:{playerVars:{controls:0,mute:1,showinfo:0,modestbranding:1,start:Math.floor(t.startTime),end:Math.floor(t.endTime)}}}},"".concat(t.startTime," ").concat(t.endTime))})]})})})),ut=n(59),dt=n.n(ut),ht=n(36),pt=n.n(ht),bt=n.p+"static/media/arrow.8371470d.svg",jt="left",ft="right",mt=function(e){var t,n=e.position,a=e.value,i=e.onChange,r=Object(m.useRef)(null),c=function(e){e.preventDefault(),e.deltaY>0?s():o()},o=function(){if(a){var e=a-.1;e<0&&(e=0),i(e)}},s=function(){i(a+.1)};Object(m.useEffect)((function(){var e=r.current;return null===e||void 0===e||e.addEventListener("wheel",c),function(){null===e||void 0===e||e.removeEventListener("wheel",c)}}),[a]);var l={value:K(a,!0)};return Object(f.jsxs)("div",{className:pt.a.container,children:[Object(f.jsx)(te.a,Object(z.a)(Object(z.a)({},l),{},{className:pt.a.timeInput,size:"small",helperText:null,variant:"outlined",onChange:function(e){},ref:r,InputProps:{readOnly:!0}})),Object(f.jsx)("div",{className:N()(pt.a.buttons,(t={},Object(Te.a)(t,pt.a.leftPosition,n===jt),Object(Te.a)(t,pt.a.rightPosition,n===ft),t)),children:Object(f.jsxs)("div",{className:pt.a.buttonsWrapper,children:[Object(f.jsx)("button",{onClick:s,className:pt.a.addButton,children:Object(f.jsx)("img",{src:bt})}),Object(f.jsx)("button",{onClick:o,className:pt.a.removeButton,children:Object(f.jsx)("img",{src:bt})})]})})]})},yt=Object(_.a)((function(e){var t,n=e.idx,a=null===(t=J.cuts[n])||void 0===t?void 0:t.cut;return Object(f.jsx)("div",{className:dt.a.container,children:a&&Object(f.jsxs)(f.Fragment,{children:[Object(f.jsxs)("div",{className:dt.a.timerBlock,children:[Object(f.jsx)(mt,{value:a.startTime,onChange:function(e){return function(e){a.startTime=e,a.endTime<a.startTime+1&&(a.endTime=a.startTime+1),J.cuts[n].cut={startTime:a.startTime,endTime:a.endTime}}(e)},position:jt}),Object(f.jsx)("p",{className:dt.a.separator,children:"-"}),Object(f.jsx)(mt,{value:a.endTime,onChange:function(e){return function(e){a.endTime=e,a.startTime>a.endTime-1&&(a.startTime=a.endTime-1),J.cuts[n].cut={startTime:a.startTime,endTime:a.endTime}}(e)},position:ft})]}),Object(f.jsx)("div",{className:dt.a.rightBlock,children:Object(f.jsxs)("div",{className:dt.a.timeTotal,children:["\u041f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c \u043a\u0443\u0441\u043e\u0447\u043a\u0430: ",K(a.endTime-a.startTime)]})})]})})}));var vt,xt=Object(_.a)((function(){var e=Object(m.useState)(!1),t=Object(ue.a)(e,2),n=t[0],a=t[1],i=Object(m.useState)(null),r=Object(ue.a)(i,2),c=r[0],o=r[1],s=function(e){o(e===c?null:e)};return Object(f.jsx)("div",{className:rt.a.cutsPanel,children:J.sources.length>0?Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("div",{className:rt.a.cutsList,children:J.cuts.map((function(e,t){return Object(f.jsx)(lt,{idx:t,cut:e.cut,isActive:t===c,onClick:s},e.id)}))}),null!==c&&Object(f.jsx)(yt,{idx:c}),Object(f.jsxs)(w.a,{container:!0,className:rt.a.infoLine,item:!0,children:[Object(f.jsxs)(w.a,{item:!0,lg:!0,children:["Trailer duration: ",K(J.trailerLength)]}),Object(f.jsxs)(w.a,{item:!0,lg:!0,children:["Number of frames: ",J.cuts.length]})]}),Object(f.jsxs)(w.a,{className:rt.a.bottomBtn,children:[Object(f.jsx)(S.a,{variant:"contained",disableElevation:!0,onClick:function(){J.changeModeToPlayAll()},fullWidth:!0,color:"primary",children:"Play all"}),Object(f.jsx)(at.a,{text:J.shareUrl||"",onCopy:function(){a(!0),setTimeout((function(){return a(!1)}),3e3),gtag("event","url-copy",{url:J.shareUrl})},children:Object(f.jsx)(S.a,{variant:"contained",disableElevation:!0,fullWidth:!0,children:n?"Copied":"Copy link"})})]})]}):Object(f.jsx)(w.a,{container:!0,className:rt.a.cutsPanelBlank,children:"Please select video for trailer editing"})})})),Ot=Object(_.a)((function(){var e=Object(m.useState)(""),t=Object(ue.a)(e,2),n=t[0],a=t[1];return Object(f.jsxs)(Se,{title:"All frames",children:[J.mode!==j.Show&&Object(f.jsxs)(w.a,{container:!0,direction:"column",children:[Object(f.jsx)(w.a,{className:Ke.a.searchLine,item:!0,children:Object(f.jsx)(De,{value:n,onChange:function(e){return a(e)},placeholder:"Paste the video link here"})}),Object(f.jsxs)(w.a,{item:!0,container:!0,spacing:2,children:[J.sources.map((function(e){return Object(f.jsx)(w.a,{item:!0,children:Object(f.jsxs)(tt,{onClick:function(){return t=e.index,void J.changeSource(t);var t},colorTheme:e.index===J.currentSourceIndex?Qe:Ze,children:["Source ",e.index+1]})},e.id)})),Object(f.jsx)(w.a,{item:!0,children:Object(f.jsx)(tt,{onClick:function(){J.addSource(n),a("")},withBorder:!0,disabled:""===n,children:"Add source"})})]})]}),Object(f.jsx)(xt,{})]})})),gt=function(){return Object(f.jsx)(Se,{title:"Add Text",children:Object(f.jsx)("div",{children:"\u0411\u043b\u043e\u043a \u0441 \u0442\u0435\u043a\u0441\u0442\u043e\u0432\u044b\u043c \u043d\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435\u043c"})})},_t=n.p+"static/media/frames.7fe1096a.svg",Pt=n.p+"static/media/audio.18d70808.svg",Ct=n.p+"static/media/gif.cd91ed47.svg",Tt=n.p+"static/media/text.0504dd60.svg",It=n.p+"static/media/images.c3d542ed.svg",wt=n.p+"static/media/sticker.689907e4.svg",St=n.p+"static/media/transitions.876ac694.svg",kt="frames",Nt="transition",Bt="text",Et="gifs",Mt="image",zt="sticker",At="audio",Lt=[{id:kt,icon:_t},{id:Nt,icon:St},{id:Bt,icon:Tt},{id:Et,icon:Ct},{id:Mt,icon:It},{id:zt,icon:wt},{id:At,icon:Pt}],Rt=n(105),Dt=n.n(Rt),Wt=function(){return Object(f.jsx)(Se,{title:"Add Transitions",children:Object(f.jsx)("div",{children:"\u0411\u043b\u043e\u043a \u0441 \u043f\u0435\u0440\u0435\u0445\u043e\u0434\u0430\u043c\u0438"})})},Gt=function(){return Object(f.jsx)(Se,{title:"Add Images",children:Object(f.jsx)("div",{children:"\u0411\u043b\u043e\u043a \u0441 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0430\u043c\u0438"})})},Vt=function(){return Object(f.jsx)(Se,{title:"Add Stickers",children:Object(f.jsx)("div",{children:"\u0411\u043b\u043e\u043a \u0441\u043e \u0441\u0442\u0438\u043a\u0435\u0440\u0430\u043c\u0438"})})},Ft=(vt={},Object(Te.a)(vt,kt,Object(f.jsx)(Ot,{})),Object(Te.a)(vt,Et,Object(f.jsx)(Ve,{})),Object(Te.a)(vt,Bt,Object(f.jsx)(gt,{})),Object(Te.a)(vt,At,Object(f.jsx)(ke,{})),Object(Te.a)(vt,Nt,Object(f.jsx)(Wt,{})),Object(Te.a)(vt,Mt,Object(f.jsx)(Gt,{})),Object(Te.a)(vt,zt,Object(f.jsx)(Vt,{})),vt),Ut=function(){var e=Object(m.useState)(kt),t=Object(ue.a)(e,2),n=t[0],a=t[1];return Object(f.jsxs)("div",{className:Dt.a.container,children:[Object(f.jsx)(Je,{tabs:Lt,handleClick:function(e){a(e),J.isEnableCanvas=e!==kt},activeTab:n}),Object(f.jsx)("div",{className:Dt.a.content,children:Ft[n]})]})};var Yt=Object(_.a)((function(){return Object(f.jsx)(f.Fragment,{children:Object(f.jsx)(g.a,{dateAdapter:O.a,children:Object(f.jsx)("div",{className:Ce.a.container,children:Object(f.jsxs)("div",{className:Ce.a.wrapper,children:[J.mode!==j.Show&&Object(f.jsx)(Ut,{}),Object(f.jsx)("div",{className:Ce.a.playerPanel,children:Object(f.jsx)(_e,{})})]})})})})}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));x.a.render(Object(f.jsx)(y.a.StrictMode,{children:Object(f.jsx)(Yt,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},36:function(e,t,n){e.exports={container:"customTimeInput_container__2GIEl",timeInput:"customTimeInput_timeInput__1SCjy",buttons:"customTimeInput_buttons__31Ika",buttonsWrapper:"customTimeInput_buttonsWrapper__2Iy5j",removeButton:"customTimeInput_removeButton__AC7w7",leftPosition:"customTimeInput_leftPosition__2app5",rightPosition:"customTimeInput_rightPosition__3hhMG"}},55:function(e,t,n){e.exports={container:"input_container__23uXm",input:"input_input__2NaO-",buttonsBlock:"input_buttonsBlock__20Mow",clearButton:"input_clearButton__3f2P7",copyButton:"input_copyButton__30Jkc"}},56:function(e,t,n){e.exports={button:"button_button__rhxVg",withBorder:"button_withBorder__37cWq",disabled:"button_disabled__yLx7B",blueTheme:"button_blueTheme__XD1wz"}},57:function(e,t,n){e.exports={cutsPanel:"CutsPanel_cutsPanel__2UoMA",cutsPanelBlank:"CutsPanel_cutsPanelBlank__bj4au",timeInput:"CutsPanel_timeInput__cesid",input:"CutsPanel_input__2WjGi",stepBtn:"CutsPanel_stepBtn__30nMj",infoLine:"CutsPanel_infoLine__1Tkkh",loadIcon:"CutsPanel_loadIcon__1Iegz",bottomBtn:"CutsPanel_bottomBtn__-K_Jc",cutsList:"CutsPanel_cutsList__atkIJ"}},58:function(e,t,n){e.exports={container:"CutItem_container__2QLQ1",block:"CutItem_block__2DxFK",idx:"CutItem_idx__360CA",play:"CutItem_play__2fmLq",rightBlock:"CutItem_rightBlock__2Epfe",remove:"CutItem_remove__22d0h",timeTotal:"CutItem_timeTotal__1nb1u",wrapper:"CutItem_wrapper__5cXzz",playerWrapper:"CutItem_playerWrapper__2L7gi",video:"CutItem_video__dXSLs",buttons:"CutItem_buttons__3RjEe",checkbox:"CutItem_checkbox__b5vN1"}},59:function(e,t,n){e.exports={container:"cutPlayer_container__-EGWc",timerBlock:"cutPlayer_timerBlock__221Xt",separator:"cutPlayer_separator__3aYik"}},66:function(e,t,n){e.exports={header:"PlayerPanel_header__1iGRg",timeRow:"PlayerPanel_timeRow__2nvuF",buttons:"PlayerPanel_buttons__35YWO",playerWrapper:"PlayerPanel_playerWrapper__2b_tL",previewButtons:"PlayerPanel_previewButtons__3LKVm",loadIcon:"PlayerPanel_loadIcon__1Aafn"}},67:function(e,t,n){e.exports={tabItem:"tabItem_tabItem__1OnFe",active:"tabItem_active__2Ilqp",icon:"tabItem_icon__14Ix2",activeIcon:"tabItem_activeIcon__2Giao"}},88:function(e,t,n){e.exports={playerPanel:"App_playerPanel__3bV36",editingPanel:"App_editingPanel__28fsw",container:"App_container__eSJ6i",wrapper:"App_wrapper__RCHjb"}}},[[276,1,2]]]);
//# sourceMappingURL=main.29af7c6b.chunk.js.map