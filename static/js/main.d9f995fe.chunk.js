(this.webpackJsonpeyemo=this.webpackJsonpeyemo||[]).push([[0],{109:function(e,t,n){e.exports={playerPanel:"App_playerPanel__3bV36",editingPanel:"App_editingPanel__28fsw",container:"App_container__eSJ6i",wrapper:"App_wrapper__RCHjb",header:"App_header__2L3DO"}},110:function(e,t,n){e.exports={container:"SignMenu_container__3ZSSz",modalContainer:"SignMenu_modalContainer__3fC5D",alert:"SignMenu_alert__3GTBy"}},111:function(e,t,n){e.exports={playerPanel:"mainView_playerPanel__2qpku",content:"mainView_content__2OnP2",contentWrapper:"mainView_contentWrapper__2i6MG"}},112:function(e,t,n){e.exports={searchLine:"SourcesPanel_searchLine__1DdM7",form:"SourcesPanel_form__1o_MA",inputWrapper:"SourcesPanel_inputWrapper__2NF9J"}},113:function(e,t,n){e.exports={cutsPanel:"CutsPanel_cutsPanel__2qCbT",cutsPanelBlank:"CutsPanel_cutsPanelBlank__2gLJh",timeInput:"CutsPanel_timeInput__FdtI3",input:"CutsPanel_input__4Og8R",stepBtn:"CutsPanel_stepBtn__3kDcm",infoLine:"CutsPanel_infoLine__3lLJ8",loadIcon:"CutsPanel_loadIcon__1BsrY",bottomBtn:"CutsPanel_bottomBtn__2J2gr",cutsList:"CutsPanel_cutsList__1Nvl5"}},128:function(e,t,n){e.exports={container:"contentView_container__HlNrD",title:"contentView_title__13t0d"}},129:function(e,t,n){e.exports={root:"GiphyPanel_root__2Hx9n",searchLine:"GiphyPanel_searchLine__69zTm",gifsPanel:"GiphyPanel_gifsPanel__2OqQn"}},131:function(e,t,n){e.exports={player:"MultiPlayer_player__3BLbd",playerPlaceholder:"MultiPlayer_playerPlaceholder__duL1K"}},132:function(e,t,n){e.exports={gif:"CutGifsList_gif__1zFY4",isSelected:"CutGifsList_isSelected__1hbWU"}},133:function(e,t,n){e.exports={container:"CustomSlider_container__WcW3I",root:"CustomSlider_root__hemha",label:"CustomSlider_label__2lMkh"}},185:function(e,t,n){e.exports={container:"sidebar_container__1TYtp"}},189:function(e,t,n){e.exports={container:"CanvasLayer_container__3HORa"}},190:function(e,t,n){e.exports={container:"GifMenu_container__20wqN"}},194:function(e,t,n){e.exports={item:"userItem_item__1-Mkf"}},195:function(e,t,n){e.exports={container:"actionButton_container__35clG"}},197:function(e,t,n){e.exports={container:"buttons_container__24qbY",bottomBtn:"buttons_bottomBtn__NAT1j"}},32:function(e,t,n){e.exports={container:"timeLineItem_container__xQUm0",videoWrapper:"timeLineItem_videoWrapper__1iGSb",isActive:"timeLineItem_isActive__hk5F6",player:"timeLineItem_player__2pv5Z",actionBlock:"timeLineItem_actionBlock__8nvXQ",activeIcon:"timeLineItem_activeIcon__GEpyq",defaultIcon:"timeLineItem_defaultIcon__iW-P8",listWrapper:"timeLineItem_listWrapper__FTQFr",list:"timeLineItem_list__35pAO",listItem:"timeLineItem_listItem__1icJS",block:"timeLineItem_block__3n2ah",blockContent:"timeLineItem_blockContent__kgIZ4",topButtons:"timeLineItem_topButtons__1kfqT",buttomButtons:"timeLineItem_buttomButtons__OvQJV"}},376:function(e,t,n){"use strict";n.r(t);var r,i,a,c=n(0),o=n.n(c),s=n(21),u=n.n(s),l=n(198),d=n(405),p=n(7),b=n(109),h=n.n(b),f=n(4),j=n.n(f),m=n(9),v=n(16),x=n(397),O=n(410),y=n(377),g=n(407),_=n(181),C=n.n(_),S=n(406),I=n(110),w=n.n(I),k=n(174),T={isDev:!1,agora:{appId:"df4bc258854f4cb293dc97a3ab0fc123",appToken:"006df4bc258854f4cb293dc97a3ab0fc123IAA1mPM18LwuOkyuSGrb+11IvJFdcEWsOe8cJD1DX3uSEHiLwJYAAAAAEAAEa9nru4JIYAEAAQC7gkhg"},google:{clientId:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_AGORA_APP_ID:"df4bc258854f4cb293dc97a3ab0fc123",REACT_APP_AGORA_APP_TOKEN:"006df4bc258854f4cb293dc97a3ab0fc123IAA1mPM18LwuOkyuSGrb+11IvJFdcEWsOe8cJD1DX3uSEHiLwJYAAAAAEAAEa9nru4JIYAEAAQC7gkhg"}).REACT_APP_GOOGLE_CLIENT_ID},server:{url:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_AGORA_APP_ID:"df4bc258854f4cb293dc97a3ab0fc123",REACT_APP_AGORA_APP_TOKEN:"006df4bc258854f4cb293dc97a3ab0fc123IAA1mPM18LwuOkyuSGrb+11IvJFdcEWsOe8cJD1DX3uSEHiLwJYAAAAAEAAEa9nru4JIYAEAAQC7gkhg"}).REACT_APP_SERVER_URL}},P=n(1),A=T.google.clientId,E=Object(p.a)((function(e){var t=e.onLogin,n=e.onError;return Object(P.jsx)("div",{children:Object(P.jsx)(k.GoogleLogin,{clientId:A,buttonText:"Sign in with Google",onSuccess:t,onFailure:n,cookiePolicy:"single_host_origin",responseType:"code,token"})})})),N=n(14),G=n(85),L=n(19),B=n(42),D=n(43),R=n(6),M=(n(134),n(3)),z=n(135),F=n(31),U=n(175),W=n.n(U);!function(e){e.EditorStore="eyeMoEditorStore",e.UserStore="eyeMoUserStore"}(r||(r={})),function(e){e.Create="create",e.PlayOne="playOne",e.PlayAll="playAll",e.Show="show"}(i||(i={})),function(e){e.GOOGLE="google"}(a||(a={}));var V,H,J,q,Y,K,Q,X,Z,$,ee,te,ne,re,ie,ae,ce,oe,se,ue,le,de=new(function(){function e(){Object(B.a)(this,e),this.control=[]}return Object(D.a)(e,[{key:"setPlayer",value:function(e,t){this.control[e]=t}},{key:"getActivePlayerPosition",value:function(){return 0===this.control.length?0:this.control[Ce.activePlayerIndex].player.getCurrentTime()}},{key:"stop",value:function(){var e=Object(m.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Ce.playing[t]){e.next=2;break}return e.abrupt("return");case 2:return Ce.playing[t]=!1,e.next=5,Object(M.s)((function(){return!Ce.players[t].playing}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"start",value:function(){var e=Object(m.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Ce.playing[t]){e.next=2;break}return e.abrupt("return");case 2:return Ce.playing[t]=!0,e.next=5,Object(M.s)((function(){return Ce.players[t].playing}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"playOne",value:function(){var e=Object(m.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ce.mode=i.PlayOne,e.next=3,this.stop(Ce.activePlayerIndex);case 3:return Ce.currentCutIndex=t,e.next=6,this.preloadCut(Ce.activePlayerIndex,t);case 6:return e.next=8,this.start(Ce.activePlayerIndex);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"playAll",value:function(){var e=Object(m.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Ce.isLoading=!0,Ce.createCurrentCuts(Ce.shotCuts),0!==Ce.currentCuts.length){e.next=6;break}return e.next=5,this.start(Ce.activePlayerIndex);case 5:return e.abrupt("return");case 6:return t||(Ce.mode=i.PlayAll),e.next=9,this.preloadShotCuts();case 9:return e.next=11,this.start(Ce.activePlayerIndex);case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"changeModeToCreate",value:function(){var e=Object(m.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Ce.mode=i.Create,Ce.currentSourceIndex=t,Ce.currentCutIndex=-1,n=0;case 4:if(!(n<Ce.players.length)){e.next=11;break}return e.next=7,this.stop(n);case 7:n===Ce.activePlayerIndex&&(Ce.players[n]=Object(N.a)(Object(N.a)({},Ce.players[n]),{},{url:Ce.sources[t].url,playing:!1}));case 8:n+=1,e.next=4;break;case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"changeModeToShow",value:function(){var e=Object(m.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ce.mode=i.Show,e.next=3,this.playAll(!0);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"preloadCut",value:function(){var e=Object(m.a)(j.a.mark((function e(t,n){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ce.players[t]=Object(N.a)(Object(N.a)({},Ce.players[t]),{},{url:Ce.currentCuts[n].url,cutIndex:n}),Ce.players[t].preloading=!0,Ce.players[t].muted=!0,e.next=5,this.start(t);case 5:return e.next=7,this.stop(t);case 7:this.control[t].player.getInternalPlayer().seekTo(Ce.currentCuts[n].time.startTime,!0),Ce.players[t].muted=!1,Ce.players[t].preloading=!1;case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"quickMoveToPosition",value:function(e){var t=Ce.activePlayerIndex;this.control[t].player.getInternalPlayer().seekTo(e,!0),this.stop(t)}},{key:"preloadShotCuts",value:function(){var e=Object(m.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=0;case 1:if(!(t<Ce.players.length)){e.next=14;break}return e.next=4,this.stop(t);case 4:if(!(t<Ce.shotCuts.length)){e.next=10;break}return Ce.players[t].isVisible=0===t,e.next=8,this.preloadCut(t,t);case 8:e.next=11;break;case 10:Ce.players[t]={id:Ce.players[t].id,muted:!1,url:"",playing:!1,preloading:!1,cutIndex:t,isVisible:!1};case 11:t+=1,e.next=1;break;case 14:Ce.activePlayerIndex=0,Ce.currentCutIndex=0;case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"goToNextShotCut",value:function(){var e=Object(m.a)(j.a.mark((function e(t){var n,r,i;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Ce.currentCutIndex===Ce.currentCuts.length-1,Ce.isShowTransition=!n,e.next=4,this.stop(t);case 4:if(!n){e.next=7;break}return console.log("Last cut is end"),e.abrupt("return");case 7:return r=Ce.currentCutIndex+Ce.players.length,i=r<Ce.currentCuts.length,console.log("Go from ".concat(Ce.currentCutIndex," to ").concat(Ce.nextCutIndex," cut")),Ce.activePlayerIndex=Ce.nextPlayerIndex,Ce.currentCutIndex=Ce.nextCutIndex,e.next=14,this.start(Ce.activePlayerIndex);case 14:if(Ce.players[t].isVisible=!1,Ce.players[Ce.activePlayerIndex].isVisible=!0,setTimeout((function(){return Ce.isShowTransition=!1}),400),i){e.next=19;break}return e.abrupt("return");case 19:return e.next=21,this.preloadCut(t,r);case 21:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getTimePosition",value:function(){var e=this.control[Ce.activePlayerIndex].player.getCurrentTime();if(Ce.currentCutIndex<0)return e;for(var t=0,n=0;n<Ce.currentCuts.length&&!(n>Ce.currentCutIndex);n+=1){var r=Ce.currentCuts[n].time.startTime,i=Ce.currentCuts[n].time.endTime;n===Ce.currentCutIndex?t+=e-r:t+=i-r}return t}},{key:"getCurrentPlayerDuration",value:function(){var e;if(this.control[Ce.activePlayerIndex]){var t=null===(e=this.control[Ce.activePlayerIndex].player.getInternalPlayer())||void 0===e?void 0:e.getDuration();return null!==t?t:0}}}]),e}()),pe=new(function(){function e(){Object(B.a)(this,e),this.customGif=null}return Object(D.a)(e,[{key:"getCutTime",value:function(e){var t={startTime:0,endTime:0},n=this.getGifIndexById(e);if(null!==n){var r=Ce.gifs[n].cutId;Ce.currentCuts.map((function(e){e.id===r&&(t=e.time)}))}return t}},{key:"setGifTime",value:function(e,t){var n=this.getGifIndexById(e);null!==n&&(Ce.gifs[n].startShowTime=t[0],Ce.gifs[n].endShowTime=t[1])}},{key:"getGifIndexById",value:function(e){var t=null;return Ce.gifs.map((function(n){n.id===e&&(t=n.index)})),t}},{key:"getGifTime",value:function(e){var t=[0,0],n=this.getGifIndexById(e);return null!==n&&(t=[Ce.gifs[n].startShowTime,Ce.gifs[n].endShowTime]),t}},{key:"isShowGif",value:function(e){if(void 0===Ce.currentCuts[Ce.currentCutIndex]||e.cutId!==Ce.currentCuts[Ce.currentCutIndex].id)return!1;var t=de.getActivePlayerPosition();return t>=e.startShowTime&&t<=e.endShowTime}},{key:"checkShowGifs",value:function(e){if(Ce)for(var t=0;t<Ce.gifs.length;t+=1){var n,r,i=Ce.gifs[t];if(void 0!==Ce.currentCuts[Ce.currentCutIndex]){var a=i.id===(null===(n=this.customGif)||void 0===n?void 0:n.id)?this.customGif.startShowTime:i.startShowTime,c=i.id===(null===(r=this.customGif)||void 0===r?void 0:r.id)?this.customGif.endShowTime:i.endShowTime;i.cutId===Ce.currentCuts[Ce.currentCutIndex].id&&i.cutId===Ce.currentCuts[Ce.currentCutIndex].id&&e>=a&&e<c?(Ce.gifs[t].isShow||console.log("Show gif on position: "+e),Ce.gifs[t].isShow=!0):(Ce.gifs[t].isShow&&console.log("Hide gif on position: "+e),Ce.gifs[t].isShow=!1)}else Ce.gifs[t].isShow=!1}}},{key:"deleteGif",value:function(e){Ce.gifs=Ce.gifs.filter((function(t){return t.id!==e}))}},{key:"setCustomGifData",value:function(e){this.customGif=e}},{key:"getGifListForCut",value:function(e){var t=Ce.currentCuts[e].id;return Ce.gifs.filter((function(e){return e.cutId===t}))}}]),e}());Object(M.i)({enforceActions:"never"});var be=W()(window.location.href,!0),he=null,fe=null,je=null,me=null;if((be.query.cuts||be.query.shotCuts||be.query.sources)&&(localStorage.removeItem(r.EditorStore),window.history.pushState(null,"","/")),be.query.cuts){var ve=decodeURIComponent(be.query.cuts);he=ve.split(",").map((function(e){var t=e.split("::");return{id:t[0],url:t[1],time:{startTime:parseFloat(t[2]),endTime:parseFloat(t[3])}}}))}if(be.query.shotCuts){var xe=decodeURIComponent(be.query.shotCuts);fe=xe.split(",").map((function(e){var t=e.split("::");return{id:t[0],url:t[1],time:{startTime:parseFloat(t[2]),endTime:parseFloat(t[3])}}}))}if(be.query.sources){var Oe=decodeURIComponent(be.query.sources);je=Oe.split(",").map((function(e){var t=e.split("::");return{id:t[0],index:parseFloat(t[1]),url:t[2]}}))}if(be.query.gifs){var ye=decodeURIComponent(be.query.gifs);me=ye.split(",").map((function(e){var t=e.split("::");return{canvasHeight:parseFloat(t[0]),canvasWidth:parseFloat(t[1]),cutId:t[2],endShowTime:parseFloat(t[3]),height:parseFloat(t[4]),id:t[5],index:parseFloat(t[6]),isShow:!1,src:t[7],startShowTime:parseFloat(t[8]),width:parseFloat(t[9]),x:parseFloat(t[10]),y:parseFloat(t[11])}}))}var ge=je&&je.length>0,_e=new(V=function(){function e(){var t=this;Object(B.a)(this,e),Object(L.a)(this,"sources",H,this),Object(L.a)(this,"mode",J,this),Object(L.a)(this,"cuts",q,this),Object(L.a)(this,"shotCuts",Y,this),Object(L.a)(this,"currentCuts",K,this),Object(L.a)(this,"gifs",Q,this),Object(L.a)(this,"players",X,this),Object(L.a)(this,"playing",Z,this),Object(L.a)(this,"activePlayerIndex",$,this),Object(L.a)(this,"currentCutIndex",ee,this),Object(L.a)(this,"activeCutIndex",te,this),Object(L.a)(this,"editCutIndex",ne,this),Object(L.a)(this,"currentSourceIndex",re,this),Object(L.a)(this,"selectedGifId",ie,this),Object(L.a)(this,"isEnableCanvas",ae,this),Object(L.a)(this,"canvasSize",ce,this),Object(L.a)(this,"isLoading",oe,this),Object(L.a)(this,"isShowTransition",se,this),Object(L.a)(this,"isConnectedChat",ue,this),Object(L.a)(this,"isEnableMic",le,this),Object(M.o)(this),Object(M.g)((function(){return console.log("--\x3e In ".concat(t.mode.toUpperCase()," mode"))})),Object(M.g)((function(){if(null!==t.selectedGifId){var e=pe.getGifIndexById(t.selectedGifId);t.isEnableCanvas||null===t.activeCutIndex||null===e||t.currentCuts[t.activeCutIndex].id===t.gifs[e].cutId||(t.selectedGifId=null)}})),Object(M.g)((function(){-1===t.currentCutIndex&&pe.checkShowGifs(0)}))}return Object(D.a)(e,[{key:"shareUrl",get:function(){if(0===this.sources.length)return null;var e=window.location.href.split("?")[0];return"".concat(e,"?sources=").concat(encodeURIComponent(this.sources.map((function(e){return[e.id,e.index,e.url].join("::")})).join(",")),"&cuts=").concat(encodeURIComponent(this.cuts.map((function(e){var t,n;return[e.id,e.url,null===(t=e.time)||void 0===t?void 0:t.startTime,null===(n=e.time)||void 0===n?void 0:n.endTime].join("::")})).join(",")),"&shotCuts=").concat(encodeURIComponent(this.shotCuts.map((function(e){var t,n;return[e.id,e.url,null===(t=e.time)||void 0===t?void 0:t.startTime,null===(n=e.time)||void 0===n?void 0:n.endTime].join("::")})).join(",")),"&gifs=").concat(encodeURIComponent(this.gifs.map((function(e){return[e.canvasHeight,e.canvasWidth,e.cutId,e.endShowTime,e.height,e.id,e.index,e.src,e.startShowTime,e.width,e.x,e.y].join("::")})).join(",")))}},{key:"trailerLength",get:function(){return this.cuts.reduce((function(e,t,n){return t.time?e+t.time.endTime-t.time.startTime:e}),0)}},{key:"nextPlayerIndex",get:function(){return this.activePlayerIndex===this.players.length-1?0:this.activePlayerIndex+1}},{key:"nextCutIndex",get:function(){return this.currentCutIndex===this.currentCuts.length-1?0:this.currentCutIndex+1}},{key:"createCurrentCuts",value:function(e){this.currentCuts=JSON.parse(JSON.stringify(e))}},{key:"addCutAndShot",value:function(e){var t=Object(z.a)();this.cuts.push({id:t,url:this.sources[this.currentSourceIndex].url,time:{startTime:e.startTime,endTime:e.endTime}}),this.shotCuts.push({id:Object(z.a)(),url:this.sources[this.currentSourceIndex].url,time:{startTime:e.startTime,endTime:e.endTime}})}},{key:"addShot",value:function(e){var t=this.getCutById(e);null!==t&&this.shotCuts.push({id:Object(z.a)(),url:t.url,time:{startTime:t.time.startTime,endTime:t.time.endTime}})}},{key:"replaceShot",value:function(e,t,n){var r=this.shotCuts.find((function(t){return t.id===e}));r&&(_e.shotCuts.splice(t,1),_e.shotCuts.splice(n,0,r))}},{key:"addSource",value:function(e){this.sources=[].concat(Object(G.a)(this.sources),[{id:Object(z.a)(),index:this.sources.length,url:e}]),de.changeModeToCreate(this.sources.length-1)}},{key:"addGif",value:function(e,t){var n=this.currentCuts[t];this.gifs=[].concat(Object(G.a)(this.gifs),[{id:Object(z.a)(),index:this.gifs.length,src:e.images.original.url,x:0,y:0,height:.2*this.canvasSize.height,width:e.images.original.width*this.canvasSize.height*.2/e.images.original.height,canvasHeight:this.canvasSize.height,canvasWidth:this.canvasSize.width,startShowTime:n.time.startTime,endShowTime:n.time.endTime,cutId:n.id,isShow:!0}])}},{key:"scaleGifs",value:function(){for(var e=0;e<this.gifs.length;e+=1){var t=this.gifs[e],n=t.height,r=t.width,i=t.canvasWidth,a=t.canvasHeight,c=t.x,o=t.y,s=this.canvasSize.width/i,u=this.canvasSize.height/a;this.gifs[e]=Object(N.a)(Object(N.a)({},this.gifs[e]),{},{height:n*u,width:r*s,x:c*s,y:o*u,canvasWidth:this.canvasSize.width,canvasHeight:this.canvasSize.height})}}},{key:"removeCut",value:function(e){this.cuts=this.cuts.filter((function(t,n){return n!==e})),this.createCurrentCuts(this.cuts)}},{key:"removeShotCut",value:function(e){this.shotCuts=this.shotCuts.filter((function(t){return t.id!==e})),this.createCurrentCuts(this.cuts)}},{key:"removeSource",value:function(e){var t=this.sources[e].url;this.sources=this.sources.filter((function(t){return t.index!==e})).map((function(e,t){return e.index=t,e})),this.cuts=this.cuts.filter((function(e){return e.url!==t}))}},{key:"clearStore",value:function(){var e=this;this.sources=[],this.mode=i.Create,this.cuts=[],this.shotCuts=[],this.currentCuts=[],this.gifs=[],this.players=[0,1,2,3].map((function(t,n){return{id:n,playing:!1,preloading:!1,muted:!1,url:e.sources[0]?e.sources[0].url:"",isVisible:0===n}})),this.activePlayerIndex=0,this.currentCutIndex=-1,this.activeCutIndex=null,this.editCutIndex=null,this.currentSourceIndex=-1,this.selectedGifId=null}},{key:"getCutById",value:function(e){var t=null;return this.cuts.map((function(n){return console.log(n.id),n.id===e&&(t=n),n})),t}}]),e}(),H=Object(R.a)(V.prototype,"sources",[M.p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return je||[]}}),J=Object(R.a)(V.prototype,"mode",[M.p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return ge?i.Show:i.Create}}),q=Object(R.a)(V.prototype,"cuts",[M.p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return he||[]}}),Y=Object(R.a)(V.prototype,"shotCuts",[M.p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return fe||[]}}),K=Object(R.a)(V.prototype,"currentCuts",[F.b,M.p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Q=Object(R.a)(V.prototype,"gifs",[M.p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return me||[]}}),X=Object(R.a)(V.prototype,"players",[M.p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return[0,1,2,3].map((function(t,n){return{id:n,playing:!1,preloading:!1,muted:!1,url:e.sources[0]?e.sources[0].url:"",isVisible:0===n}}))}}),Z=Object(R.a)(V.prototype,"playing",[F.b,M.p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.players.map((function(e){return!1}))}}),$=Object(R.a)(V.prototype,"activePlayerIndex",[M.p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),ee=Object(R.a)(V.prototype,"currentCutIndex",[F.b,M.p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.shotCuts.length>0?0:-1}}),te=Object(R.a)(V.prototype,"activeCutIndex",[F.b,M.p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ne=Object(R.a)(V.prototype,"editCutIndex",[F.b,M.p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),re=Object(R.a)(V.prototype,"currentSourceIndex",[M.p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.sources.length>0?0:-1}}),ie=Object(R.a)(V.prototype,"selectedGifId",[F.b,M.p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ae=Object(R.a)(V.prototype,"isEnableCanvas",[F.b,M.p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),ce=Object(R.a)(V.prototype,"canvasSize",[F.b,M.p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{height:0,width:0}}}),oe=Object(R.a)(V.prototype,"isLoading",[F.b,M.p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),se=Object(R.a)(V.prototype,"isShowTransition",[F.b,M.p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),ue=Object(R.a)(V.prototype,"isConnectedChat",[F.b,M.p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),le=Object(R.a)(V.prototype,"isEnableMic",[F.b,M.p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Object(R.a)(V.prototype,"shareUrl",[M.h],Object.getOwnPropertyDescriptor(V.prototype,"shareUrl"),V.prototype),Object(R.a)(V.prototype,"trailerLength",[M.h],Object.getOwnPropertyDescriptor(V.prototype,"trailerLength"),V.prototype),Object(R.a)(V.prototype,"nextPlayerIndex",[M.h],Object.getOwnPropertyDescriptor(V.prototype,"nextPlayerIndex"),V.prototype),Object(R.a)(V.prototype,"nextCutIndex",[M.h],Object.getOwnPropertyDescriptor(V.prototype,"nextCutIndex"),V.prototype),Object(R.a)(V.prototype,"createCurrentCuts",[M.f],Object.getOwnPropertyDescriptor(V.prototype,"createCurrentCuts"),V.prototype),Object(R.a)(V.prototype,"addCutAndShot",[M.f],Object.getOwnPropertyDescriptor(V.prototype,"addCutAndShot"),V.prototype),Object(R.a)(V.prototype,"addShot",[M.f],Object.getOwnPropertyDescriptor(V.prototype,"addShot"),V.prototype),Object(R.a)(V.prototype,"replaceShot",[M.f],Object.getOwnPropertyDescriptor(V.prototype,"replaceShot"),V.prototype),Object(R.a)(V.prototype,"addSource",[M.f],Object.getOwnPropertyDescriptor(V.prototype,"addSource"),V.prototype),Object(R.a)(V.prototype,"addGif",[M.f],Object.getOwnPropertyDescriptor(V.prototype,"addGif"),V.prototype),Object(R.a)(V.prototype,"scaleGifs",[M.f],Object.getOwnPropertyDescriptor(V.prototype,"scaleGifs"),V.prototype),Object(R.a)(V.prototype,"removeCut",[M.f],Object.getOwnPropertyDescriptor(V.prototype,"removeCut"),V.prototype),Object(R.a)(V.prototype,"removeShotCut",[M.f],Object.getOwnPropertyDescriptor(V.prototype,"removeShotCut"),V.prototype),Object(R.a)(V.prototype,"removeSource",[M.f],Object.getOwnPropertyDescriptor(V.prototype,"removeSource"),V.prototype),Object(R.a)(V.prototype,"clearStore",[M.f],Object.getOwnPropertyDescriptor(V.prototype,"clearStore"),V.prototype),V);window.editorStore=_e;var Ce=_e;new F.a(_e,{storageKey:r.EditorStore,storage:localStorage}).init();var Se,Ie,we,ke,Te,Pe,Ae,Ee,Ne=n.p+"static/media/frames.7fe1096a.svg",Ge=n.p+"static/media/audio.18d70808.svg",Le=n.p+"static/media/gif.cd91ed47.svg",Be=n.p+"static/media/text.0504dd60.svg",De=n.p+"static/media/images.c3d542ed.svg",Re=n.p+"static/media/sticker.689907e4.svg",Me=n.p+"static/media/transitions.876ac694.svg",ze="frames",Fe="transition",Ue="text",We="gifs",Ve="image",He="sticker",Je="audio",qe=[{id:ze,icon:Ne},{id:Fe,icon:Me},{id:Ue,icon:Be},{id:We,icon:Le},{id:Ve,icon:De},{id:He,icon:Re},{id:Je,icon:Ge}],Ye=new(Se=function(){function e(){Object(B.a)(this,e),Object(L.a)(this,"user",Ie,this),Object(L.a)(this,"tokens",we,this),Object(L.a)(this,"googleToken",ke,this),Object(L.a)(this,"isShowUserProfile",Te,this),Object(L.a)(this,"tab",Pe,this),Object(L.a)(this,"isShowContent",Ae,this),Object(L.a)(this,"isDragStart",Ee,this),Object(M.o)(this)}return Object(D.a)(e,[{key:"changeTab",value:function(e){this.tab=e}},{key:"setIsShowContent",value:function(e){this.isShowContent=e}},{key:"setDragStart",value:function(e){this.isDragStart=e}}]),e}(),Ie=Object(R.a)(Se.prototype,"user",[M.p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),we=Object(R.a)(Se.prototype,"tokens",[M.p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ke=Object(R.a)(Se.prototype,"googleToken",[M.p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Te=Object(R.a)(Se.prototype,"isShowUserProfile",[M.p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Pe=Object(R.a)(Se.prototype,"tab",[M.p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return ze}}),Ae=Object(R.a)(Se.prototype,"isShowContent",[M.p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Ee=Object(R.a)(Se.prototype,"isDragStart",[M.p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Object(R.a)(Se.prototype,"changeTab",[M.f],Object.getOwnPropertyDescriptor(Se.prototype,"changeTab"),Se.prototype),Object(R.a)(Se.prototype,"setIsShowContent",[M.f],Object.getOwnPropertyDescriptor(Se.prototype,"setIsShowContent"),Se.prototype),Object(R.a)(Se.prototype,"setDragStart",[M.f],Object.getOwnPropertyDescriptor(Se.prototype,"setDragStart"),Se.prototype),Se),Ke=Ye;new F.a(Ye,{storageKey:r.UserStore,storage:localStorage}).init();var Qe,Xe,Ze=Object(c.createContext)({editorStore:Ce,userStore:Ke}),$e=function(){return Object(c.useContext)(Ze)},et=n(176),tt=n.n(et).a.create({baseURL:T.server.url,headers:{"X-Custom-Header":"eyeMo"},responseType:"json"}),nt={getUserProfile:function(){var e;return tt({method:"GET",url:"/user/profile",headers:{Authorization:"Bearer ".concat(null===(e=Ke.tokens)||void 0===e?void 0:e.accessToken)}})},getNewAccessToken:function(){var e;return tt({method:"GET",url:"/user/access/token?refreshToken=".concat(null===(e=Ke.tokens)||void 0===e?void 0:e.refreshToken)})},postLogin:function(){return tt({method:"POST",url:"/user/login/google",data:{idToken:Ke.googleToken}})},postLogout:function(){var e;return tt({method:"POST",url:"/user/logout",data:{refreshToken:null===(e=Ke.tokens)||void 0===e?void 0:e.refreshToken}})}},rt=Object(p.a)((function(){var e=$e().userStore,t=Object(c.useState)(!1),n=Object(v.a)(t,2),r=n[0],i=n[1],a=Object(c.useState)(!1),o=Object(v.a)(a,2),s=o[0],u=o[1],l=function(){var t=Object(m.a)(j.a.mark((function t(n){var r,i,a,c,o;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=n.tokenId){t.next=3;break}return t.abrupt("return");case 3:return e.googleToken=r,t.prev=4,t.next=7,nt.postLogin();case 7:return i=t.sent,a=i.data,e.tokens=a.tokens,t.next=12,nt.getUserProfile();case 12:c=t.sent,o=c.data,e.user=o,t.next=20;break;case 17:t.prev=17,t.t0=t.catch(4),u(!0);case 20:case"end":return t.stop()}}),t,null,[[4,17]])})));return function(e){return t.apply(this,arguments)}}();return Object(P.jsx)("div",{children:e.user?Object(P.jsx)(x.a,{onClick:function(){e.isShowUserProfile=!e.isShowUserProfile},children:e.isShowUserProfile?Object(P.jsx)(C.a,{}):e.user.photoUrl?Object(P.jsx)(O.a,{alt:"user",src:e.user.photoUrl}):Object(P.jsx)(O.a,{alt:"user"})}):Object(P.jsxs)(P.Fragment,{children:[Object(P.jsx)(y.a,{variant:"contained",color:"primary",onClick:function(){i(!0)},style:{fontSize:"10px"},children:"Sign In"}),Object(P.jsx)(g.a,{open:r,onClose:function(){i(!1)},"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description",className:w.a.container,children:Object(P.jsxs)("div",{className:w.a.modalContainer,children:[Object(P.jsx)("h2",{children:"Sign In"}),Object(P.jsx)(E,{onLogin:l,onError:function(e){u(!0)}}),s&&Object(P.jsx)(S.a,{severity:"error",className:w.a.alert,children:"Failed to log in"})]})})]})})})),it=n(402),at=n(49),ct=n.n(at),ot=Object(p.a)((function(){var e,t,n,r=$e().userStore,i=Object(c.useState)(!1),a=Object(v.a)(i,2),o=a[0],s=a[1],u=function(){var e=Object(m.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,nt.postLogout();case 3:r.user=null,r.tokens=null,r.googleToken=null,r.isShowUserProfile=!1,e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),s(!0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();return Object(P.jsx)("div",{className:ct.a.root,children:Object(P.jsxs)(it.a,{container:!0,children:[Object(P.jsx)(it.a,{item:!0,xs:8,children:Object(P.jsx)("h2",{children:"My Portfolio"})}),Object(P.jsxs)(it.a,{container:!0,item:!0,xs:4,className:ct.a.userData,children:[(null===(e=r.user)||void 0===e?void 0:e.photoUrl)?Object(P.jsx)(O.a,{alt:"user-avatar",src:r.user.photoUrl,className:ct.a.avatar}):Object(P.jsx)(O.a,{alt:"user-avatar"}),Object(P.jsxs)("h3",{className:ct.a.text,children:[null===(t=r.user)||void 0===t?void 0:t.firstName," ",null===(n=r.user)||void 0===n?void 0:n.lastName]}),Object(P.jsx)("h2",{className:ct.a.text,children:"156.000.000 sec."}),Object(P.jsx)(y.a,{variant:"contained",children:"Edit Profile"}),Object(P.jsx)("h4",{className:ct.a.text,children:"Social"}),Object(P.jsx)(y.a,{variant:"contained",children:"$"}),Object(P.jsx)("div",{className:ct.a.text,children:"-o-"}),Object(P.jsx)(y.a,{variant:"contained",children:"Invite"}),Object(P.jsx)("div",{className:ct.a.text,children:"-o-"}),Object(P.jsx)(y.a,{color:"primary",variant:"contained",onClick:u,children:"Logout"}),o&&Object(P.jsx)(S.a,{severity:"error",className:ct.a.alert,children:"Logout failed"})]})]})})})),st=n(11),ut=n(56),lt=n(111),dt=n.n(lt),pt=n(23),bt=n.n(pt),ht=n(128),ft=n.n(ht),jt=function(e){var t=e.title,n=e.children;return Object(P.jsxs)("div",{className:ft.a.container,children:[Object(P.jsx)("h2",{className:ft.a.title,children:t}),n]})},mt=function(){return Object(P.jsx)(jt,{title:"Add Music",children:Object(P.jsx)("div",{children:"\u0411\u043b\u043e\u043a \u0441 \u0430\u0443\u0434\u0438\u043e-\u043a\u043e\u043d\u0442\u0435\u043d\u0442\u043e\u043c"})})},vt=n(183),xt=n(184),Ot=n(105),yt=n.n(Ot),gt=n(129),_t=n.n(gt),Ct=n(86),St=n.n(Ct),It=n.p+"static/media/closeIcon.0b48234f.svg",wt=function(e){var t=e.value,n=e.placeholder,r=e.onChange;return Object(P.jsxs)("div",{className:St.a.container,children:[Object(P.jsx)("input",{onChange:function(e){return r(e.target.value)},value:t,placeholder:n,className:St.a.input}),t&&Object(P.jsx)("div",{className:St.a.buttonsBlock,children:Object(P.jsx)("button",{type:"button",className:St.a.clearButton,onClick:function(){return r("")},children:Object(P.jsx)("img",{src:It,alt:"Close icon"})})})]})},kt=new xt.GiphyFetch("IPKlChsULe1Qlt19wbrWHlnjDr04SZa8");!function(e){e.Trending="trending",e.Search="search"}(Qe||(Qe={})),function(e){e.Gifs="gifs",e.Stickers="stickers",e.Text="text"}(Xe||(Xe={}));var Tt=function(e){var t=e.width,n=e.searchText,r=e.fetchType,i=e.type,a=$e().editorStore;return Object(P.jsx)(vt.Grid,{fetchGifs:function(e){return r===Qe.Search?kt.search(n,{offset:e,limit:10,type:i}):r===Qe.Trending?kt.trending({offset:e,limit:10,type:i}):kt.trending({offset:e,limit:10})},width:t,columns:4,gutter:6,onGifClick:function(e,t){t.preventDefault(),null!==a.activeCutIndex?a.addGif(e,a.activeCutIndex):alert("\u0422\u044b \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043b \u043a\u0443\u0441\u043e\u0447\u0435\u043a!")}})},Pt=Object(p.a)((function(e){var t=e.type,n=o.a.createRef(),r=Object(c.useState)(null),i=Object(v.a)(r,2),a=i[0],s=i[1],u=Object(c.useState)(""),l=Object(v.a)(u,2),d=l[0],p=l[1],b=Object(c.useState)(!0),h=Object(v.a)(b,2),f=h[0],j=h[1];return Object(c.useEffect)((function(){n&&s(n.current.offsetWidth)}),[n]),Object(c.useEffect)((function(){var e=setTimeout((function(){j(!0)}),1e3);return function(){return clearTimeout(e)}}),[d]),Object(P.jsxs)("div",{ref:n,className:_t.a.root,children:[Object(P.jsx)(wt,{placeholder:"Search with GIPHY",value:d,onChange:function(e){j(!1),p(e)}}),a&&Object(P.jsxs)("div",{className:_t.a.gifsPanel,children:[f&&""===d&&Object(P.jsx)(Tt,{width:a,searchText:d,fetchType:Qe.Trending,type:t}),f&&""!==d&&Object(P.jsx)(Tt,{width:a,searchText:d,fetchType:Qe.Search,type:t}),Object(P.jsx)(yt.a,{onResize:function(e){e.width}})]})]})})),At=Object(p.a)((function(e){var t=e.type;return Object(P.jsx)(jt,{title:"Add Gif",children:Object(P.jsx)(Pt,{type:t})})})),Et=n(87),Nt=n.n(Et),Gt=function(e){var t=e.value,n=e.isActive,r=e.icon,i=e.onClick;return Object(P.jsx)("div",{onClick:function(){return i(t)},className:bt()(Nt.a.tabItem,Object(st.a)({},Nt.a.active,n)),children:Object(P.jsx)("img",{src:r,className:bt()(Nt.a.icon,Object(st.a)({},Nt.a.activeIcon,n)),alt:"Source icon"})})},Lt=n(185),Bt=n.n(Lt),Dt=function(e){var t=e.tabs,n=e.activeTab,r=e.handleClick;return Object(P.jsx)("div",{className:Bt.a.container,children:t.map((function(e){var t=e.icon,i=e.id;return Object(P.jsx)(Gt,{icon:t,isActive:i===n,value:i,onClick:r},i)}))})},Rt=n(186),Mt=n(411),zt=n(112),Ft=n.n(zt),Ut="blue",Wt="red",Vt="lightBlue",Ht=n(51),Jt=n.n(Ht),qt=n.p+"static/media/close.f88f3a6a.svg",Yt=function(e){var t,n=e.text,r=e.type,i=e.active,a=e.disabled,c=e.colorTheme,o=e.withBorder,s=e.deleteButton,u=e.onClick,l=e.onDelete;return Object(P.jsxs)("button",{className:bt()(Jt.a.button,(t={},Object(st.a)(t,Jt.a.active,i),Object(st.a)(t,Jt.a.disabled,a),Object(st.a)(t,Jt.a.withBorder,o),Object(st.a)(t,Jt.a.redTheme,c===Wt),Object(st.a)(t,Jt.a.blueTheme,c===Ut),Object(st.a)(t,Jt.a.lightBlueTheme,c===Vt),t)),disabled:a,type:r||"submit",onClick:u,children:[n,s&&Object(P.jsx)("div",{className:Jt.a.delete,onClick:l,children:Object(P.jsx)("img",{src:qt,alt:"close icon"})})]})},Kt=n(113),Qt=n.n(Kt),Xt=n(69),Zt=n.n(Xt),$t=n(63),en=n.n($t),tn=n.p+"static/media/close.b731002b.svg",nn=n.p+"static/media/playIcon.737e8ec2.svg",rn=Object(p.a)((function(e){var t=e.cut,n=e.idx,r=(e.isActive,e.isChosenSource),i=(e.onClick,$e().editorStore),a=Object(c.useRef)(null),o=Object(c.useRef)(null),s=Object(c.useState)(!1),u=Object(v.a)(s,2),l=u[0],d=u[1],p=function(){var e=Object(m.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i.createCurrentCuts(i.cuts),e.next=3,de.playOne(n);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),b=function(){var e=o.current.player.player.player;(null===e||void 0===e?void 0:e.playVideo)&&e.playVideo()},h=function(){var e=o.current.player.player.player;(null===e||void 0===e?void 0:e.pauseVideo)&&e.pauseVideo()};return Object(c.useEffect)((function(){var e=a.current;return e&&(e.addEventListener("mouseover",(function(){d(!0),b()})),e.addEventListener("mouseout",(function(){d(!1),h()}))),function(){e&&(e.removeEventListener("mouseover",(function(){b()})),e.removeEventListener("mouseout",(function(){h()})))}}),[a]),Object(P.jsxs)("div",{className:bt()(en.a.wrapper,Object(st.a)({},en.a.isChosenSource,r)),children:[Object(P.jsx)("div",{className:en.a.buttons,children:Object(P.jsx)("button",{onClick:function(){return i.removeCut(n)},children:Object(P.jsx)("img",{src:tn,alt:"Close icon"})})}),Object(P.jsxs)("div",{className:en.a.playerWrapper,ref:a,children:[Object(P.jsx)(Zt.a,{ref:o,width:"100%",height:"100%",url:i.cuts[n].url,muted:!0,controls:!1,onEnded:function(){return e=t.startTime,o.current.player.player.player.seekTo(e);var e},config:{youtube:{playerVars:{controls:0,mute:1,showinfo:0,modestbranding:1,start:Math.floor(t.startTime),end:Math.floor(t.endTime)}}}},"".concat(t.startTime," ").concat(t.endTime)),Object(P.jsx)("button",{onClick:p,className:bt()(en.a.playButton,Object(st.a)({},en.a.isVisible,l)),children:Object(P.jsx)("img",{src:nn,alt:"Play icon"})})]})]})}));var an,cn=Object(p.a)((function(){var e=$e().editorStore,t=Object(c.useState)(""),n=Object(v.a)(t,2),r=n[0],i=n[1],a=function(){var t=Object(m.a)(j.a.mark((function t(n){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.createCurrentCuts(e.cuts),e.currentCutIndex=n,t.next=4,de.preloadCut(e.activePlayerIndex,n);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(c.useEffect)((function(){var t=e.sources[e.currentSourceIndex];void 0!==t&&i(t.url)}),[e.currentSourceIndex]),e.cuts.length,Object(P.jsx)("div",{className:Qt.a.cutsPanel,children:e.sources.length>0?Object(P.jsx)(P.Fragment,{children:Object(P.jsx)(ut.c,{droppableId:"column-1",direction:"horizontal",children:function(t){return Object(P.jsx)("div",Object(N.a)(Object(N.a)({className:Qt.a.cutsList},t.droppableProps),{},{ref:t.innerRef,children:e.cuts.map((function(t,n){return Object(P.jsx)(ut.b,{draggableId:t.id.toString(),index:n,children:function(i){return Object(P.jsx)("div",Object(N.a)(Object(N.a)(Object(N.a)({},i.draggableProps),i.dragHandleProps),{},{ref:i.innerRef,children:Object(P.jsx)(rn,{idx:n,cut:t.time,isActive:n===e.activeCutIndex,onClick:a,isChosenSource:t.url===r},t.id)}))}},t.id)}))}))}})}):Object(P.jsx)(it.a,{container:!0,className:Qt.a.cutsPanelBlank,children:"Please select video for trailer editing"})})})),on=Object(p.a)((function(){var e=$e().editorStore,t=Object(c.useState)(""),n=Object(v.a)(t,2),r=n[0],a=n[1],s=o.a.useState(null),u=Object(v.a)(s,2),l=u[0],d=u[1],p=function(){var t,n=Object(Rt.a)(e.sources);try{for(n.s();!(t=n.n()).done;){if(t.value.url===r)return!0}}catch(i){n.e(i)}finally{n.f()}return!1},b=function(){var e=Object(m.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,de.changeModeToCreate(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h=Boolean(l),f=h?"simple-popover":void 0;return Object(P.jsxs)(jt,{title:"All frames",children:[e.mode!==i.Show&&Object(P.jsxs)(it.a,{container:!0,direction:"column",children:[Object(P.jsx)(it.a,{className:Ft.a.searchLine,item:!0,children:Object(P.jsxs)("form",{className:Ft.a.form,children:[Object(P.jsx)("div",{className:Ft.a.inputWrapper,children:Object(P.jsx)(wt,{value:r,onChange:function(e){return a(e)},placeholder:"Paste the video link here"})}),Object(P.jsx)(Yt,{type:"button",text:"Add source",disabled:""===r,onClick:function(t){p()?d(t.currentTarget):(e.addSource(r),a(""))},colorTheme:Ut}),Object(P.jsx)(Mt.a,{id:f,open:h,anchorEl:l,onClose:function(){d(null),a("")},anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},children:Object(P.jsx)("span",{children:"You already have this source."})})]})}),Object(P.jsx)(it.a,{item:!0,container:!0,spacing:2,children:e.sources.map((function(t){return Object(P.jsx)(it.a,{item:!0,children:Object(P.jsx)(Yt,{text:"Source ".concat(t.index+1),onClick:function(){return b(t.index)},onDelete:function(n){return function(t,n){return t.stopPropagation(),e.removeSource(n),n>0?b(n-1):0===n&&e.sources.length?b(0):void 0}(n,t.index)},deleteButton:!0,colorTheme:Vt,active:t.index===e.currentSourceIndex})},t.id)}))})]}),Object(P.jsx)(cn,{})]})})),sn=function(e){var t=e.type;return Object(P.jsx)(jt,{title:"Add Text",children:Object(P.jsx)(Pt,{type:t})})},un=n(88),ln=n.n(un),dn=function(){return Object(P.jsx)(jt,{title:"Add Transitions",children:Object(P.jsx)("div",{children:"\u0411\u043b\u043e\u043a \u0441 \u043f\u0435\u0440\u0435\u0445\u043e\u0434\u0430\u043c\u0438"})})},pn=function(){return Object(P.jsx)(jt,{title:"Add Images",children:Object(P.jsx)("div",{children:"\u0411\u043b\u043e\u043a \u0441 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0430\u043c\u0438"})})},bn=function(e){var t=e.type;return Object(P.jsx)(jt,{title:"Add Stickers",children:Object(P.jsx)(Pt,{type:t})})},hn=n.p+"static/media/arrow.a4af7684.svg",fn=(an={},Object(st.a)(an,ze,Object(P.jsx)(on,{})),Object(st.a)(an,We,Object(P.jsx)(At,{type:Xe.Gifs})),Object(st.a)(an,Ue,Object(P.jsx)(sn,{type:Xe.Text})),Object(st.a)(an,Je,Object(P.jsx)(mt,{})),Object(st.a)(an,Fe,Object(P.jsx)(dn,{})),Object(st.a)(an,Ve,Object(P.jsx)(pn,{})),Object(st.a)(an,He,Object(P.jsx)(bn,{type:Xe.Stickers})),an),jn=Object(p.a)((function(){var e=$e(),t=e.editorStore,n=e.userStore;return Object(P.jsxs)("div",{className:bt()(ln.a.container,Object(st.a)({},ln.a.isActive,n.isShowContent)),children:[Object(P.jsx)(Dt,{tabs:qe,handleClick:function(e){n.changeTab(e),n.setIsShowContent(!0),t.isEnableCanvas=e!==ze},activeTab:n.tab}),n.isShowContent&&Object(P.jsx)("div",{className:ln.a.content,children:fn[n.tab]}),n.isShowContent&&Object(P.jsx)("div",{className:ln.a.hideBlock,children:Object(P.jsx)("button",{onClick:function(){n.setIsShowContent(!1),n.changeTab("")},children:Object(P.jsx)("img",{src:hn,alt:"arrow icon"})})})]})})),mn=n(200),vn=n(199),xn=n(404);function On(e){return e<10?"0".concat(e):e}function yn(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!e)return"00:00:00.0";var n=Math.floor(e/60/60),r=Math.floor(e/60%60),i=Math.floor(e%60),a=Math.floor(10*(e-Math.floor(e))),c="".concat(On(n),":").concat(On(r),":").concat(On(i));return t&&(c="".concat(c,".").concat(a)),c}var gn=n(74),_n=n.n(gn),Cn=n(73),Sn=n(189),In=n.n(Sn),wn=(n(352),Object(p.a)((function(e){var t=e.gif,n=e.isSelected,r=e.isShow,i=e.onChange,a=e.onSelect,c=o.a.useRef(null),s=o.a.useRef(),u=($e().editorStore,o.a.useMemo((function(){return document.createElement("canvas")}),[]));o.a.useEffect((function(){var e;return window.gifler(t.src).get((function(t){(e=t).animateInCanvas(u),e.onDrawFrame=function(e,t){e.drawImage(t.buffer,t.x,t.y),c.current&&c.current.getLayer().draw()}})),function(){return e.stop()}}),[t.src,u]),o.a.useEffect((function(){n&&s.current&&(s.current.nodes([c.current]),s.current.getLayer().batchDraw())}),[n]);return Object(P.jsxs)(P.Fragment,{children:[r&&Object(P.jsx)(Cn.a,{ref:c,image:u,x:t.x,y:t.y,width:t.width,height:t.height,draggable:!0,onClick:a,onTap:a,onDragEnd:function(e){i(Object(N.a)(Object(N.a)({},t),{},{x:e.target.x(),y:e.target.y()}))},onTransformEnd:function(e){var n=c.current,r=n.scaleX(),a=n.scaleY();n.scaleX(1),n.scaleY(1),i(Object(N.a)(Object(N.a)({},t),{},{x:n.x(),y:n.y(),width:Math.max(5,n.width()*r),height:Math.max(n.height()*a)}))}}),r&&n&&Object(P.jsx)(Cn.d,{ref:s,boundBoxFunc:function(e,t){return t.width<5||t.height<5?e:t}})]})}))),kn=Object(p.a)((function(){var e=$e().editorStore,t=function(t){t.target===t.target.getStage()&&(e.selectedGifId=null)},n=function(t){e.selectedGifId=t},r=function(t,n){return e.gifs[t]=n};return Object(P.jsx)("div",{children:Object(P.jsx)(Cn.c,{className:In.a.container,width:e.canvasSize.width,height:e.canvasSize.height,style:e.isEnableCanvas?{pointerEvents:"all"}:{pointerEvents:"none"},onMouseDown:t,onTouchStart:t,children:Object(P.jsx)(Cn.b,{children:e.gifs.map((function(t,i){return Object(P.jsx)(wn,{gif:t,isSelected:t.id===e.selectedGifId,isShow:t.isShow,onSelect:n.bind(null,t.id),onChange:r.bind(null,t.index)},t.id)}))})})})})),Tn=n(131),Pn=n.n(Tn);var An=Object(p.a)((function(e){var t=$e().editorStore,n=e.updatePosition,r=function(e,t){console.log("Player ".concat(e," onReady")),de.setPlayer(e,{player:t})},a=function(){var e=Object(m.a)(j.a.mark((function e(r,a){var c,o;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(pe.checkShowGifs(a.playedSeconds),r===t.activePlayerIndex&&!t.players[r].preloading&&t.players[r].playing){e.next=4;break}return console.log("Player ".concat(r," onProgress stopped")),e.abrupt("return");case 4:if(t.isLoading&&(t.isLoading=!1),n(de.getTimePosition()),void 0!==(c=t.players[r].cutIndex)&&-1!==t.currentCutIndex){e.next=10;break}return console.log("Player ".concat(r," onProgress No cut index in player")),e.abrupt("return");case 10:o=t.currentCuts[c].time,console.log("Player ".concat(r," onProgress in ").concat(a.playedSeconds," sec (s: ").concat(null===o||void 0===o?void 0:o.startTime," e: ").concat(null===o||void 0===o?void 0:o.endTime)),e.t0=t.mode,e.next=e.t0===i.Create?15:e.t0===i.PlayOne?16:e.t0===i.PlayAll?21:e.t0===i.Show?26:31;break;case 15:return e.abrupt("break",31);case 16:if(!b(o,a.playedSeconds)){e.next=18;break}return e.abrupt("return");case 18:return e.next=20,de.stop(r);case 20:return e.abrupt("break",31);case 21:if(!b(o,a.playedSeconds)){e.next=23;break}return e.abrupt("return");case 23:return e.next=25,de.goToNextShotCut(r);case 25:return e.abrupt("break",31);case 26:if(!b(o,a.playedSeconds)){e.next=28;break}return e.abrupt("return");case 28:return e.next=30,de.goToNextShotCut(r);case 30:return e.abrupt("break",31);case 31:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),c=function(e){console.log("Player ".concat(e," onBuffer"))},o=function(e){console.log("Player ".concat(e," onBufferEnd"))},s=function(e){console.log("Player ".concat(e," onStart"))},u=function(e){console.log("Player ".concat(e," onPlay")),t.playing[e]||(t.playing[e]=!0),t.players[e].playing=!0},l=function(e){console.log("Player ".concat(e," onPause")),t.playing[e]&&(t.playing[e]=!1),t.players[e].playing=!1},d=function(e){console.log("Player ".concat(e," onEnded"))},p=function(e,t){console.log("Player ".concat(e," onSeek"))},b=function(e,t){return!!e&&(t>=e.startTime&&t<=e.endTime)};return Object(P.jsx)("div",{children:t.sources.length>0?t.players.map((function(e,n,i){var b=i.length-1-n;return Object(P.jsx)("div",{style:{visibility:t.players[b].isVisible?"visible":"hidden"},children:Object(P.jsx)(Zt.a,{playing:t.playing[b],className:Pn.a.player,url:t.players[b].url,muted:t.players[b].muted,width:"100%",height:"100%",onPlay:u.bind(null,b),onProgress:a.bind(null,b),onStart:s.bind(null,b),onPause:l.bind(null,b),onEnded:d.bind(null,b),onReady:r.bind(null,b),onSeek:p.bind(null,b),onBufferEnd:o.bind(null,b),onBuffer:c.bind(null,b),progressInterval:100,controls:!0,config:{youtube:{playerVars:{}}}})},t.players[b].id)})):Object(P.jsx)("div",{className:Pn.a.playerPlaceholder})})})),En=n(412),Nn=n(403),Gn=n(192),Ln=n.n(Gn),Bn=n(107),Dn=n.n(Bn),Rn=n(191),Mn=n.n(Rn),zn=n(190),Fn=n.n(zn),Un=Object(p.a)((function(e){var t=$e().editorStore,n=Object(c.useState)([0,0]),r=Object(v.a)(n,2),i=r[0],a=r[1];Object(c.useEffect)((function(){pe.setCustomGifData(null),null!==t.selectedGifId&&a(pe.getGifTime(t.selectedGifId))}),[t.selectedGifId]);var o=function(){var e=Object(m.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.createCurrentCuts(t.shotCuts),e.next=3,de.playOne(t.currentCutIndex);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(P.jsx)(P.Fragment,{children:t.selectedGifId&&Object(P.jsxs)("div",{className:Fn.a.container,children:[Object(P.jsx)(En.a,{value:i,onChange:function(e,n){null!==t.selectedGifId&&(pe.setCustomGifData({id:t.selectedGifId,startShowTime:n[0],endShowTime:n[1]}),a(n))},valueLabelDisplay:"auto","aria-labelledby":"range-slider",max:pe.getCutTime(t.selectedGifId).endTime,min:pe.getCutTime(t.selectedGifId).startTime,step:.01}),Object(P.jsxs)(Nn.a,{size:"small","aria-label":"small outlined button group",children:[Object(P.jsx)(x.a,{"aria-label":"play",color:"primary",onClick:o,children:Object(P.jsx)(Dn.a,{})}),Object(P.jsx)(x.a,{"aria-label":"thumbUp",color:"primary",onClick:function(){null!==t.selectedGifId&&pe.setGifTime(t.selectedGifId,i)},children:Object(P.jsx)(Mn.a,{})}),Object(P.jsx)(x.a,{"aria-label":"delete",color:"primary",onClick:function(){null!==t.selectedGifId&&(pe.deleteGif(t.selectedGifId),t.selectedGifId=null)},children:Object(P.jsx)(Ln.a,{})})]})]})})})),Wn=n(132),Vn=n.n(Wn),Hn=Object(p.a)((function(e){var t=$e().editorStore,n=function(e){de.quickMoveToPosition(e.startShowTime),t.selectedGifId=e.id},r=null!==t.activeCutIndex?pe.getGifListForCut(t.activeCutIndex):[];return Object(P.jsx)("div",{children:null!==t.activeCutIndex&&r.length>0?r.map((function(e){return Object(P.jsx)("img",{src:e.src,alt:"gif_"+e.index,className:bt()(Vn.a.gif,Object(st.a)({},Vn.a.isSelected,e.id===t.selectedGifId)),onClick:n.bind(null,e)},e.id)})):null})})),Jn=n(76),qn=n.n(Jn),Yn=n(20),Kn=n(409),Qn=n(133),Xn=n.n(Qn),Zn=Object(Yn.a)({tooltip:{display:"flex",alignItems:"center",backgroundColor:"#ebf8ff",color:"#00a3ff",fontSize:10,height:16,borderRadius:2}})(Kn.a),$n=function(e){var t=e.children,n=e.open,r=e.value;return Object(P.jsx)(Zn,{open:n,enterTouchDelay:0,placement:"top",title:r,children:t})},er=Object(Yn.a)({root:{display:"flex",alignItems:"center",color:"#00a3ff",height:8},thumb:{height:16,width:16,backgroundColor:"#fff",border:"4px solid currentColor",marginTop:0,marginLeft:-8,"&:focus, &:hover, &$active":{boxShadow:"0 0 8px 0 #00a3ff"}},active:{},valueLabel:{},track:{height:24,borderRadius:4,backgroundColor:"currentColor"},rail:{height:4,borderRadius:2,backgroundColor:"#a5b4cb"}})(En.a),tr=Object(p.a)((function(e){var t=e.value,n=e.onChange,r=e.valueLabelFormat,i=e.max,a=e.min,c=e.step;return Object(P.jsx)(P.Fragment,{children:Object(P.jsx)(er,{value:t,ValueLabelComponent:$n,onChange:n,valueLabelDisplay:"auto",valueLabelFormat:r,"aria-labelledby":"custom-slider",min:a,max:i,step:c,classes:{root:Xn.a.slider,valueLabel:Xn.a.label}})})})),nr=Object(p.a)((function(e){var t=$e().editorStore,n=Object(c.useState)([0,0]),r=Object(v.a)(n,2),i=r[0],a=r[1],o=Object(c.useState)([0,0]),s=Object(v.a)(o,2),u=s[0],l=s[1];Object(c.useEffect)((function(){var e=function(){if(null===t.editCutIndex)return[0,0];var e=t.currentCuts[t.editCutIndex].time;return[e.startTime,e.endTime]}();a(e);var n=de.getCurrentPlayerDuration()||0,r=Math.max(0,e[0]-30),i=Math.min(n,e[1]+30);l([r,i])}),[t.currentCuts,t.editCutIndex]);var d=function(){var e=Object(m.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==t.editCutIndex){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,de.playOne(t.editCutIndex);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),p=function(e){a([e,i[1]]),de.quickMoveToPosition(e)},b=function(e){a([i[0],e]),de.quickMoveToPosition(e)};return Object(P.jsx)(P.Fragment,{children:null!==t.editCutIndex&&Object(P.jsxs)("div",{className:qn.a.container,children:[Object(P.jsx)(x.a,{"aria-label":"play",classes:{root:qn.a.playBtn},onClick:d,children:Object(P.jsx)(Dn.a,{})}),Object(P.jsx)("span",{className:qn.a.duration,children:yn(i[1]-i[0],!0)}),Object(P.jsx)(tr,{value:i,onChange:function(e,n){null!==t.editCutIndex&&(t.currentCuts[t.editCutIndex].time.startTime=i[0],t.currentCuts[t.editCutIndex].time.endTime=i[1],n[0]!==i[0]&&p(n[0]),n[1]!==i[1]&&b(n[1]))},valueLabelFormat:function(e){return yn(e)},max:u[1],min:u[0],step:.1}),Object(P.jsx)("div",{className:qn.a.btn,children:Object(P.jsx)(Yt,{text:"Cancel",withBorder:!0,onClick:function(){return t.editCutIndex=null}})}),Object(P.jsx)("div",{className:qn.a.btn,children:Object(P.jsx)(Yt,{text:"Done",colorTheme:Ut,onClick:function(){null!==t.editCutIndex&&(t.shotCuts[t.editCutIndex].time.startTime=i[0],t.shotCuts[t.editCutIndex].time.endTime=i[1],t.createCurrentCuts(t.shotCuts),t.editCutIndex=null)}})})]})})})),rr=function(e){Object(mn.a)(n,e);var t=Object(vn.a)(n);function n(e){var r;return Object(B.a)(this,n),(r=t.call(this,e)).state=void 0,r.canvasRef=void 0,r.play=function(){var e=r.state.cut;e&&(Ce.players[Ce.activePlayerIndex].playing=!1,de.control[Ce.activePlayerIndex].player.seekTo(e.startTime),setTimeout((function(){de.start(Ce.activePlayerIndex);var e=setInterval((function(){var t=r.state.cut;if(t){var n=de.control[Ce.activePlayerIndex].player,i=n?n.getCurrentTime():0;i>=(null===t||void 0===t?void 0:t.startTime)&&i<=(null===t||void 0===t?void 0:t.endTime)||(clearInterval(e),de.stop(Ce.activePlayerIndex))}}),100)}),1e3))},r.onAddCut=function(){var e=r.state.cut;e&&e.endTime-e.startTime!==0&&(Ce.addCutAndShot(e),r.setState({startTime:0,endTime:0}))},r.updatePosition=function(e){r.setState({position:e})},r.onStartFrame=function(){var e=r.state,t=e.position,n=e.cut,i={startTime:(null===n||void 0===n?void 0:n.startTime)||0,endTime:(null===n||void 0===n?void 0:n.endTime)||0};i.startTime=t,i.endTime<t&&(i.endTime=t+5),r.setState({cut:i})},r.onEndFrame=function(){var e=r.state,t=e.position,n=e.cut,i={startTime:(null===n||void 0===n?void 0:n.startTime)||0,endTime:(null===n||void 0===n?void 0:n.endTime)||0};i.endTime=t,i.startTime>t&&(i.startTime=t-5),r.setState({cut:i},(function(){return r.onAddCut()}))},r.onResizePlayerWrapper=function(e){var t=e.width,n=e.height;Ce.canvasSize={width:t,height:n},Ce.scaleGifs()},r.onMouseDownHandler=function(){r.setState({record:!0}),r.onStartFrame()},r.onMouseUpHandler=function(){r.setState({record:!1}),r.onEndFrame()},r.state={cut:null,playing:!1,position:0,record:!1},r.canvasRef=o.a.createRef(),r}return Object(D.a)(n,[{key:"componentDidMount",value:function(){this.canvasRef.current&&(Ce.canvasSize={width:this.canvasRef.current.offsetWidth,height:this.canvasRef.current.offsetHeight})}},{key:"render",value:function(){var e=this.state,t=e.position,n=e.record;return Object(P.jsxs)("div",{className:_n.a.container,children:[Object(P.jsxs)("div",{style:{fontSize:"10px"},children:["Player: ",Ce.activePlayerIndex,"/",Ce.players.length-1," Cut:"," ",Ce.currentCutIndex,"/",Ce.currentCuts.length-1," Source:"," ",Ce.currentSourceIndex,"/",Ce.sources.length-1]}),Object(P.jsxs)("div",{ref:this.canvasRef,className:bt()("padded",_n.a.playerWrapper),children:[Object(P.jsx)(An,{updatePosition:this.updatePosition}),Object(P.jsx)(kn,{}),Object(P.jsx)(yt.a,{onResize:this.onResizePlayerWrapper}),Object(P.jsx)("div",{style:{position:"absolute",top:0,left:0,backgroundColor:"black",color:"white",width:"100%",height:"100%",visibility:Ce.isShowTransition?"visible":"hidden"}})]}),Ce.mode!==i.Show&&Ce.sources.length>0?Object(P.jsxs)(P.Fragment,{children:[Object(P.jsx)("div",{children:yn(t,!0)}),Object(P.jsx)(Hn,{}),Object(P.jsx)(Un,{}),Object(P.jsx)("div",{children:Object(P.jsx)("button",{className:bt()(_n.a.recButton,Object(st.a)({},_n.a.active,n)),onMouseDown:this.onMouseDownHandler,onMouseUp:this.onMouseUpHandler,children:n?"stop rec":"start rec"})}),Object(P.jsx)(nr,{})]}):Object(P.jsx)(P.Fragment,{children:Object(P.jsxs)("div",{className:_n.a.previewButtons,children:[Object(P.jsxs)(y.a,{variant:"contained",size:"large",color:"primary",disableElevation:!0,disabled:Ce.isLoading,onClick:function(){return de.changeModeToShow()},children:["Play trailer",Ce.isLoading&&Object(P.jsx)(xn.a,{size:20})]}),Object(P.jsx)(y.a,{variant:"contained",color:"primary",disableElevation:!0,onClick:function(){return de.changeModeToCreate(0)},children:"Make your own trailer"})]})})]})}}]),n}(o.a.Component),ir=Object(p.a)(rr),ar=n(89),cr=n.n(ar),or=T.agora.appId,sr=T.agora.appToken;console.log("agora sdk version: "+cr.a.VERSION+" compatible: "+cr.a.checkSystemRequirements());var ur=new(function(){function e(){var t=this;Object(B.a)(this,e),this.client=void 0,this.localAudioTrack=null,this.uid=null,this.client=cr.a.createClient({mode:"live",codec:"h264"}),this.client.on("user-published",function(){var e=Object(m.a)(j.a.mark((function e(n,r){var i;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.client.subscribe(n,r);case 2:console.log("subscribe success"),"audio"===r&&(null===(i=n.audioTrack)||void 0===i||i.play());case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}())}return Object(D.a)(e,[{key:"join",value:function(){var e=Object(m.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.client.join(or,"EyeMo",sr);case 3:return this.uid=e.sent,e.next=6,this.client.setClientRole("host");case 6:return e.next=8,cr.a.createMicrophoneAudioTrack();case 8:return this.localAudioTrack=e.sent,e.next=11,this.client.publish([this.localAudioTrack]);case 11:return e.next=13,this.disableMic();case 13:Ce.isConnectedChat=!0,console.log("Publish success!"),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(0),console.log("Error on join to chat: "+e.t0);case 20:case"end":return e.stop()}}),e,this,[[0,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"leave",value:function(){var e=Object(m.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,null===(t=this.localAudioTrack)||void 0===t||t.close(),e.next=4,this.client.leave();case 4:Ce.isConnectedChat=!1,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("Error on leave chat: "+e.t0);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(){return e.apply(this,arguments)}}()},{key:"enableMic",value:function(){var e=Object(m.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,null===(t=this.localAudioTrack)||void 0===t?void 0:t.setEnabled(!0);case 3:Ce.isEnableMic=!0,e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log("Error on enable mic: "+e.t0);case 9:case"end":return e.stop()}}),e,this,[[0,6]])})));return function(){return e.apply(this,arguments)}}()},{key:"disableMic",value:function(){var e=Object(m.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,null===(t=this.localAudioTrack)||void 0===t?void 0:t.setEnabled(!1);case 3:Ce.isEnableMic=!1,e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log("Error on disable mic: "+e.t0);case 9:case"end":return e.stop()}}),e,this,[[0,6]])})));return function(){return e.apply(this,arguments)}}()},{key:"getUserCount",value:function(){return console.log("Number of users: "+this.client.getRTCStats().UserCount),this.client.getRTCStats().UserCount}}]),e}()),lr=n.p+"static/media/userIcon.401c41c6.svg",dr=n(194),pr=n.n(dr),br=function(){for(var e="#",t=0;t<6;t++)e+="0123456789ABCDEF"[Math.floor(16*Math.random())];return e},hr=function(){return Object(P.jsx)("li",{className:pr.a.item,style:{backgroundColor:br()},children:Object(P.jsx)("img",{src:lr,alt:"User icon"})})},fr=n.p+"static/media/mic.7674c511.svg",jr=n.p+"static/media/mic-white.1fcdc1a6.svg",mr=n(58),vr=n.n(mr),xr=Object(p.a)((function(){var e=$e().editorStore,t=Object(c.useState)(!1),n=Object(v.a)(t,2),r=n[0],i=n[1],a=ur.getUserCount(),o=function(){var t=Object(m.a)(j.a.mark((function t(){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.isConnectedChat){t.next=5;break}return t.next=3,ur.leave();case 3:t.next=7;break;case 5:return t.next=7,ur.join();case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),s=function(){var t=Object(m.a)(j.a.mark((function t(){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.isEnableMic){t.next=5;break}return t.next=3,ur.disableMic();case 3:t.next=7;break;case 5:return t.next=7,ur.enableMic();case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(c.useEffect)((function(){i(e.isConnectedChat)}),[e.isConnectedChat]),Object(P.jsxs)("div",{className:vr.a.container,children:[Object(P.jsx)("h2",{className:vr.a.title,children:"Voice Room"}),Object(P.jsxs)("div",{className:vr.a.wrapper,children:[r&&a&&Object(P.jsx)("ul",{className:vr.a.memberList,children:Object(G.a)(Array(a)).map((function(e){return Object(P.jsx)(hr,{})}))}),Object(P.jsx)(Yt,{onClick:o,text:r?"Leave":"Join the room",colorTheme:r?Wt:Ut}),Object(P.jsxs)("div",{className:vr.a.micBlock,children:[Object(P.jsx)("button",{onClick:s,className:bt()(vr.a.micButton,Object(st.a)({},vr.a.micOff,!e.isEnableMic)),children:Object(P.jsx)("img",{src:e.isEnableMic?fr:jr,alt:"Mute"})}),Object(P.jsx)("p",{children:e.isEnableMic?"You're Live":"Tap to Unmute"})]})]})]})})),Or={cuts:{},columns:{"column-1":{id:"column-1",title:"Cuts",cutIds:[]},"column-2":{id:"column-2",title:"PlayList",cutIds:[]}},columnOrder:["column-1","column-2"]},yr=n(59),gr=n.n(yr),_r=n(32),Cr=n.n(_r),Sr=n.p+"static/media/actionIcon.120e19fc.svg",Ir=n.p+"static/media/actionIconActive.e6f6af32.svg",wr=n.p+"static/media/duplicate.9ce441d6.svg",kr=n.p+"static/media/edit.7081d9c8.svg",Tr=n.p+"static/media/delete.0b5bed2b.svg",Pr=n(195),Ar=n.n(Pr),Er=function(e){var t=e.text,n=e.image,r=e.onClick;return Object(P.jsxs)("button",{className:Ar.a.container,onClick:r,children:[t&&Object(P.jsx)("p",{children:t}),Object(P.jsx)("img",{src:n,alt:"image"})]})},Nr=[{text:"Add Text",id:Ue},{text:"Add Gif",id:We},{text:"Add Sticker",id:He},{text:"Add Image",id:Ve}],Gr=function(e){var t=e.cut,n=e.index,r=e.isActiveShot,i=e.deleteCut,a=e.setActiveShot,o=Object(c.useRef)(null),s=$e(),u=s.editorStore,l=s.userStore,d=Object(c.useState)(!1),p=Object(v.a)(d,2),b=p[0],h=p[1],f=function(){var e=Object(m.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a(t.id),u.activeCutIndex=n,u.currentCutIndex=n,u.editCutIndex!==u.currentCutIndex&&(u.editCutIndex=null),u.createCurrentCuts(u.shotCuts),e.next=7,de.preloadCut(u.activePlayerIndex,n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),x=function(){var e=Object(m.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.stopPropagation(),e.next=3,f();case 3:u.editCutIndex=n;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return function(e,t,n){Object(c.useEffect)((function(){var t=e.current;return t&&(t.addEventListener("mouseenter",(function(){n(!0)})),t.addEventListener("mouseleave",(function(){n(!1)}))),function(){t&&(t.removeEventListener("mouseenter",(function(){n(!1)})),t.removeEventListener("mouseleave",(function(){n(!1)})))}}),[e,t])}(o,b,h),Object(P.jsxs)("div",{className:Cr.a.container,ref:o,onClick:f,children:[Object(P.jsxs)("div",{className:bt()(Cr.a.actionBlock,Object(st.a)({},Cr.a.isActive,b)),children:[Object(P.jsx)("img",{src:Sr,alt:"Action icon",className:Cr.a.defaultIcon}),Object(P.jsx)("img",{src:Ir,alt:"Action icon",className:Cr.a.activeIcon}),Object(P.jsx)("div",{className:Cr.a.listWrapper,children:Object(P.jsx)("ul",{className:Cr.a.list,children:Nr.map((function(e){var t=e.text,n=e.id;return Object(P.jsx)("li",{className:Cr.a.listItem,children:Object(P.jsx)("button",{onClick:function(){return function(e){l.changeTab(e),l.setIsShowContent(!0)}(n)},children:t})})}))})})]}),Object(P.jsxs)("div",{className:bt()(Cr.a.videoWrapper,Object(st.a)({},Cr.a.isActive,b||r)),children:[Object(P.jsx)("div",{className:Cr.a.block,children:Object(P.jsxs)("div",{className:Cr.a.blockContent,children:[Object(P.jsx)("div",{className:Cr.a.topButtons,children:Object(P.jsx)(Er,{image:Tr,onClick:function(e){e.stopPropagation(),i(t.id)}})}),Object(P.jsxs)("div",{className:Cr.a.buttomButtons,children:[Object(P.jsx)(Er,{text:"Duplicate",image:wr,onClick:function(){u.shotCuts.push(Object(N.a)(Object(N.a)({},u.shotCuts[n]),{},{id:Object(z.a)()})),u.createCurrentCuts(u.shotCuts)}}),Object(P.jsx)(Er,{text:"Edit",image:kr,onClick:x})]})]})}),Object(P.jsx)("div",{className:Cr.a.player,children:Object(P.jsx)(Zt.a,{width:"100%",height:"100%",url:t.url,muted:!0,controls:!1,config:{youtube:{playerVars:{controls:0,mute:1,showinfo:0,modestbranding:1}}}},t.id)})]})]})},Lr=(Object(p.a)(Gr),n.p+"static/media/play.a44af37e.svg"),Br=n(196),Dr=n.n(Br),Rr=n(197),Mr=n.n(Rr),zr=Object(p.a)((function(){var e=Object(c.useState)(!1),t=Object(v.a)(e,2),n=t[0],r=t[1],i=$e().editorStore;return Object(P.jsxs)("div",{className:Mr.a.container,children:[Object(P.jsx)("div",{style:{marginRight:"10px"},children:Object(P.jsx)(Dr.a,{text:i.shareUrl||"",onCopy:function(){r(!0),setTimeout((function(){return r(!1)}),3e3),gtag("event","url-copy",{url:i.shareUrl})},children:Object(P.jsx)(Yt,{text:n?"Copied":"Copy link",colorTheme:Ut})})}),Object(P.jsx)(Yt,{text:"Clear store",onClick:function(){return i.clearStore()},colorTheme:Ut})]})})),Fr=Object(p.a)((function(e){var t=e.droppableId,n=e.isShowDuration,r=e.deleteCut,i=$e(),a=i.editorStore,o=i.userStore,s=Object(c.useState)(null),u=Object(v.a)(s,2),l=u[0],d=u[1],p=a.shotCuts.reduce((function(e,t){return t.time?e+t.time.endTime-t.time.startTime:e}),0),b=function(){var e=Object(m.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,de.playAll();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=function(e){r(e)};return console.log(o.isDragStart),Object(P.jsxs)("div",{className:bt()(gr.a.container,Object(st.a)({},gr.a.isShowDuration,n)),children:[Object(P.jsxs)("div",{className:gr.a.player,children:[Object(P.jsxs)("div",{className:gr.a.playInfo,children:[Object(P.jsx)("button",{className:gr.a.playButton,onClick:b,children:Object(P.jsx)("img",{src:Lr,alt:"Play icon"})}),Object(P.jsx)("p",{children:yn(p)})]}),Object(P.jsx)(ut.c,{droppableId:t,direction:"horizontal",children:function(e){return Object(P.jsx)("div",Object(N.a)(Object(N.a)({className:bt()(gr.a.wrapper,Object(st.a)({},gr.a.isDragStart,o.isDragStart))},e.droppableProps),{},{ref:e.innerRef,children:a.shotCuts.map((function(e,t){return Object(P.jsx)(ut.b,{draggableId:e.id,index:t,children:function(n){return Object(P.jsx)("div",Object(N.a)(Object(N.a)(Object(N.a)({},n.draggableProps),n.dragHandleProps),{},{ref:n.innerRef,children:Object(P.jsx)(Gr,{index:t,cut:e,isActiveShot:l===e.id,deleteCut:h,setActiveShot:d},e.id)}))}},e.id)}))}))}})]}),Object(P.jsx)(zr,{})]})})),Ur=Object(p.a)((function(){var e=$e(),t=e.editorStore,n=e.userStore,r=Object(c.useState)(Or),a=Object(v.a)(r,2),o=a[0],s=a[1];return Object(P.jsx)(ut.a,{onDragEnd:function(e){var r=e.destination,i=e.source,a=e.draggableId;if(n.setDragStart(!1),r&&(r.droppableId!==i.droppableId||r.index!==i.index)){if(o.columns[i.droppableId]===o.columns[r.droppableId])return t.replaceShot(a,i.index,r.index);t.addShot(a)}},onDragStart:function(){return n.setDragStart(!0)},children:Object(P.jsxs)("div",{className:dt.a.content,children:[Object(P.jsxs)("div",{className:dt.a.contentWrapper,children:[t.mode!==i.Show&&Object(P.jsx)(jn,{}),Object(P.jsxs)("div",{className:dt.a.playerPanel,children:[Object(P.jsx)(ir,{}),t.mode===i.Show&&Object(P.jsx)(xr,{})]})]}),Object(P.jsx)(Fr,{droppableId:o.columns["column-2"].id,deleteCut:function(e){t.removeShotCut(e);var n=Object(N.a)(Object(N.a)({},o),{},{columns:Object(N.a)(Object(N.a)({},o.columns),{},Object(st.a)({},"column-2",Object(N.a)(Object(N.a)({},o.columns["column-2"]),{},{cutIds:o.columns["column-2"].cutIds.filter((function(t){return t!==e}))})))});s(n)},isShowDuration:null!==t.activeCutIndex})]})})}));var Wr=Object(p.a)((function(){var e=$e().userStore;return Object(P.jsx)(P.Fragment,{children:Object(P.jsx)(d.a,{dateAdapter:l.a,children:Object(P.jsx)("div",{className:h.a.container,children:Object(P.jsxs)("div",{className:h.a.wrapper,children:[Object(P.jsx)("header",{className:h.a.header,children:Object(P.jsx)(rt,{})}),e.isShowUserProfile?Object(P.jsx)(ot,{}):Object(P.jsx)(Ur,{})]})})})})}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));u.a.render(Object(P.jsx)(o.a.StrictMode,{children:Object(P.jsx)(Wr,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},49:function(e,t,n){e.exports={root:"UserProfile_root__1HK7B",avatar:"UserProfile_avatar__1Q3dw",userData:"UserProfile_userData__1JyVF",text:"UserProfile_text__1d6Ai",alert:"UserProfile_alert__1RGbP"}},51:function(e,t,n){e.exports={button:"button_button__q-EjP",withBorder:"button_withBorder__1-5d0",disabled:"button_disabled__1_Ved",blueTheme:"button_blueTheme__Kq4aP",active:"button_active__2mI4J",lightBlueTheme:"button_lightBlueTheme__3oYxs",redTheme:"button_redTheme__344Z4",delete:"button_delete__bY3NW"}},58:function(e,t,n){e.exports={container:"chat_container__1pMfk",title:"chat_title__1b1BL",wrapper:"chat_wrapper__83tld",memberList:"chat_memberList__20IWQ",micBlock:"chat_micBlock__2peVb",micButton:"chat_micButton__3EJGT",micOff:"chat_micOff__agetB"}},59:function(e,t,n){e.exports={container:"timeline_container__Ot9x_",player:"timeline_player__1fwLp",wrapper:"timeline_wrapper__1B1Fp",isDragStart:"timeline_isDragStart__2aa9h",playInfo:"timeline_playInfo__2SvIF",playButton:"timeline_playButton__ST2NV",item:"timeline_item__3E5Bh"}},63:function(e,t,n){e.exports={wrapper:"CutItem_wrapper__1vR9b",playerWrapper:"CutItem_playerWrapper__32VlR",video:"CutItem_video__33TEF",buttons:"CutItem_buttons__JzliV",checkbox:"CutItem_checkbox__2_dpe",playButton:"CutItem_playButton__1QWqr",isVisible:"CutItem_isVisible__335-r",isChosenSource:"CutItem_isChosenSource__2r7bR",checkboxWrapper:"CutItem_checkboxWrapper__3jZA8"}},74:function(e,t,n){e.exports={container:"PlayerPanel_container__TOvcu",header:"PlayerPanel_header__3w0XV",timeRow:"PlayerPanel_timeRow__2x_ng",buttons:"PlayerPanel_buttons__2YgAS",playerWrapper:"PlayerPanel_playerWrapper__16uXZ",previewButtons:"PlayerPanel_previewButtons__1uA4C",loadIcon:"PlayerPanel_loadIcon__3J9Eg",recButton:"PlayerPanel_recButton__3TYfL",recButtonAnimation:"PlayerPanel_recButtonAnimation__2UQQt",active:"PlayerPanel_active__2NmJa"}},76:function(e,t,n){e.exports={container:"CutEditPanel_container__2WfnO",btn:"CutEditPanel_btn__-T5s8",playBtn:"CutEditPanel_playBtn__lkGoH",duration:"CutEditPanel_duration__360gs"}},86:function(e,t,n){e.exports={container:"input_container__1OlOE",input:"input_input__3I3G6",buttonsBlock:"input_buttonsBlock__241nw",clearButton:"input_clearButton__3FPaA",copyButton:"input_copyButton__20L6h"}},87:function(e,t,n){e.exports={tabItem:"tabItem_tabItem__1OnFe",active:"tabItem_active__2Ilqp",icon:"tabItem_icon__14Ix2",activeIcon:"tabItem_activeIcon__2Giao"}},88:function(e,t,n){e.exports={container:"contentBlock_container__1pOST",isActive:"contentBlock_isActive__1EC5r",content:"contentBlock_content__1xBTD",hideBlock:"contentBlock_hideBlock__2Wym6"}}},[[376,1,2]]]);