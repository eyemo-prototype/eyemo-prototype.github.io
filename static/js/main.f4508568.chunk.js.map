{"version":3,"sources":["components/TimeInput/TimeInput.module.sass","components/MultiPlayer/MultiPlayer.module.sass","components/ContentView/contentView.module.scss","components/GifsPanel/GifsPanel.module.sass","components/ContentBlock/contentBlock.module.scss","components/CanvasLayer/CanvasLayer.module.sass","components/GifMenu/GifMenu.module.scss","components/Sidebar/sidebar.module.scss","store/index.ts","services/playerService.ts","services/gifService.ts","utils/format-time.ts","components/TimeInput/TimeInput.tsx","components/CanvasLayer/GifComponent.tsx","components/CanvasLayer/index.ts","components/CanvasLayer/CanvasLayer.tsx","components/MultiPlayer/MultiPlayer.tsx","components/GifsPanel/GifsPanel.tsx","components/GifMenu/GifMenu.tsx","components/PlayerPanel/PlayerPanel.tsx","components/ContentView/ContentView.tsx","components/AudioPanel/AudioPanel.tsx","components/Input/assets/img/closeIcon.svg","components/Input/Input.tsx","components/TabItem/TabItem.tsx","components/Sidebar/Sidebar.tsx","components/Button/constants.ts","components/Button/assets/img/close.svg","components/Button/Button.tsx","components/CutItem/assets/img/close.svg","components/CutItem/assets/img/playIcon.svg","components/CutItem/CutItem.tsx","components/CustomTimeInput/assets/img/arrow.svg","components/CustomTimeInput/CustomTimeInput.tsx","components/CutPlayer/CutPlayer.tsx","components/CutsPanel/CutsPanel.tsx","components/SourcePanel/SourcesPanel.tsx","components/TextPanel/TextPanel.tsx","components/ContentBlock/assets/img/frames.svg","components/ContentBlock/assets/img/audio.svg","components/ContentBlock/assets/img/gif.svg","components/ContentBlock/assets/img/text.svg","components/ContentBlock/assets/img/images.svg","components/ContentBlock/assets/img/sticker.svg","components/ContentBlock/assets/img/transitions.svg","components/ContentBlock/constants.ts","components/TransitionPanel/TransitionPanel.tsx","components/ImagePanel/ImagePanel.tsx","components/StickerPanel/StickerPanel.tsx","components/ContentBlock/ContentBlock.tsx","App.tsx","serviceWorker.ts","index.tsx","components/CutItem/CutItem.module.scss","components/CustomTimeInput/customTimeInput.module.scss","components/PlayerPanel/PlayerPanel.module.scss","components/Button/button.module.scss","components/CutsPanel/CutsPanel.module.scss","components/CutPlayer/cutPlayer.module.scss","components/Input/input.module.scss","components/TabItem/tabItem.module.scss","App.module.scss","components/SourcePanel/SourcesPanel.module.scss"],"names":["module","exports","Mode","playerService","control","playerIndex","player","this","length","store","activePlayerIndex","getCurrentTime","playing","when","players","cutIndex","mode","PlayOne","stop","currentCutIndex","preloadCut","start","isShowMode","isLoading","cuts","PlayAll","setDefaultPlayersState","sourceIndex","Create","currentSourceIndex","i","url","sources","Show","playAll","preloading","muted","getInternalPlayer","seekTo","cut","startTime","isVisible","id","currentPlayerIndex","isLastCut","isShowTransition","console","log","cutIndexForPreload","isNeedToPreloadCut","nextCutIndex","nextPlayerIndex","setTimeout","currentTime","timePosition","endTime","gifService","gifId","cutTime","gifIndex","getGifIndexById","cutId","gifs","map","item","value","startShowTime","endShowTime","index","time","gif","undefined","currentPosition","getActivePlayerPosition","position","isShow","filter","configure","enforceActions","parse","window","location","href","urlStory","urlSources","query","story","localStorage","removeItem","history","pushState","raw","decodeURIComponent","split","parts","parseFloat","video","source","hasUrl","makeObservable","autorun","toUpperCase","isEnableCanvas","selectedGifId","checkShowGifs","push","uuid","Math","round","changeModeToCreate","src","images","original","x","y","height","canvasSize","width","canvasHeight","canvasWidth","scaleX","scaleY","activeCutIndex","baseUrl","encodeURIComponent","join","reduce","duration","observable","ignore","computed","action","trunk","AsyncTrunk","storageKey","storage","pad","formatTime","long","hours","floor","mins","seconds","fract","Adornment","onClick","InputAdornment","IconButton","edge","className","styles","changeButton","style","fontSize","TimeInput","props","textFieldRef","useRef","onWheel","e","preventDefault","deltaY","onAdd","onRemove","newVal","onChange","useEffect","textField","current","addEventListener","removeEventListener","formattedProps","TextField","timeInput","size","helperText","variant","ref","InputProps","startAdornment","endAdornment","readOnly","observer","isSelected","onSelect","gifRef","React","trRef","canvas","useMemo","document","createElement","anim","gifler","get","a","animateInCanvas","onDrawFrame","ctx","frame","drawImage","buffer","getLayer","draw","nodes","batchDraw","image","draggable","onTap","onDragEnd","target","onTransformEnd","node","max","boundBoxFunc","oldBox","newBox","CanvasLayer","checkDeselect","getStage","newAttrs","container","pointerEvents","onMouseDown","onTouchStart","bind","FetchType","updatePosition","onReady","setPlayer","onProgress","playerState","playedSeconds","getTimePosition","isInCut","goToNextCut","onBuffer","onBufferEnd","onStart","onPlay","onPause","onEnded","onSeek","array","curIndex","visibility","progressInterval","controls","config","youtube","playerVars","playerPlaceholder","useState","setValue","getGifTime","playCut","playOne","Slider","event","newValue","valueLabelDisplay","aria-labelledby","getCutTime","min","step","ButtonGroup","aria-label","color","setGifTime","deleteGif","PlayerPanel","state","canvasRef","changeStart","setState","changeEnd","play","intervalId","setInterval","clearInterval","clear","onAddCut","addCut","onStartFrame","onEndFrame","onResizePlayerWrapper","scaleGifs","record","createRef","offsetWidth","offsetHeight","Grid","cx","playerWrapper","onResize","top","left","backgroundColor","justify","recButton","active","onMouseUp","timeRow","alignContent","lg","label","buttons","xs","wrap","disableElevation","previewButtons","disabled","changeModeToShow","CircularProgress","Component","ContentView","title","children","AudioPanel","Input","placeholder","input","buttonsBlock","type","clearButton","closeIcon","alt","giphyFetch","GiphyFetch","Gifs","searchText","fetchType","fetchGifs","offset","Search","search","limit","Trending","trending","columns","gutter","onGifClick","addGif","alert","giphyGrid","setWidth","setSearchText","showGrid","setShowGrid","delayDebounce","clearTimeout","root","gifsPanel","TabItem","isActive","icon","tabItem","activeIcon","Sidebar","tabs","activeTab","handleClick","COLOR_THEME","Button","text","colorTheme","withBorder","deleteButton","onDelete","button","redTheme","blueTheme","delete","idx","isChosenSource","blockRef","playerRef","setIsVisible","playHandler","playVideo","stopHandler","pauseVideo","wrapper","checkboxWrapper","toString","checked","checkbox","htmlFor","removeCut","mute","showinfo","modestbranding","end","playButton","playIcon","POSITION","CustomTimeInput","leftPosition","rightPosition","buttonsWrapper","addButton","arrowIcon","removeButton","timerBlock","setStart","separator","setEnd","rightBlock","timeTotal","showCopied","setShowCopied","activeUrl","setActiveUrl","onClickHandler","currentSource","cutsPanel","cutsList","infoLine","trailerLength","bottomBtn","fullWidth","margin","shareUrl","onCopy","gtag","clearStore","cutsPanelBlank","setUrl","addSource","changeSource","direction","searchLine","onSubmit","form","inputWrapper","spacing","stopPropagation","removeSource","deleteSource","TextPanel","FRAMES_TAB","TRANSITION_TAB","TEXT_TAB","GIFS_TAB","IMAGE_TAB","STICKER_TAB","AUDIO_TAB","frameIcon","transitionIcon","textIcon","gifIcon","imageIcon","stickerIcon","audioIcon","TransitionPanel","ImagePanel","StickerPanel","COMPONENT_MAP","ContentBLock","setActiveTab","content","LocalizationProvider","dateAdapter","DateFnsAdapter","playerPanel","Boolean","hostname","match","init","then","ReactDOM","render","StrictMode","getElementById","navigator","serviceWorker","ready","registration","unregister","catch","error","message"],"mappings":"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","file":"static/js/main.f4508568.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"timeInput\":\"TimeInput_timeInput__1OGkV\",\"changeButton\":\"TimeInput_changeButton__1tKZm\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"player\":\"MultiPlayer_player__3BLbd\",\"playerPlaceholder\":\"MultiPlayer_playerPlaceholder__duL1K\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"contentView_container__RRG_Y\",\"title\":\"contentView_title__1pCuk\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"GifsPanel_root__1ZDy0\",\"searchLine\":\"GifsPanel_searchLine__3JEx-\",\"gifsPanel\":\"GifsPanel_gifsPanel__1yNS-\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"contentBlock_container__1pOST\",\"content\":\"contentBlock_content__1xBTD\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"CanvasLayer_container__3HORa\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"GifMenu_container__20wqN\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"sidebar_container__1TYtp\"};","import { observable, makeObservable, configure, computed, action, autorun } from 'mobx'\nimport { v4 as uuid } from 'uuid'\n\nimport parse from 'url-parse'\nimport { IGif } from '@giphy/js-types'\nimport playerService from '../services/playerService'\nimport { AsyncTrunk, ignore } from 'mobx-sync'\nimport gifService from '../services/gifService'\n\nconfigure({ enforceActions: 'never' })\n\nexport interface Cut {\n\tstartTime: number\n\tendTime: number\n}\n\nexport interface Player {\n\tid: number\n\tplaying: boolean\n\tpreloading: boolean\n\tmuted: boolean\n\turl: string\n\tcutIndex?: number\n\tisVisible: boolean\n}\n\nexport interface CutStore {\n\tid: string\n\tindex: number\n\turl: string\n\tcut: Cut\n}\n\nexport interface Source {\n\tid: string\n\tindex: number\n\turl: string\n}\n\nexport enum Mode {\n\tCreate = 'create',\n\tPlayOne = 'playOne',\n\tPlayAll = 'playAll',\n\tShow = 'show',\n}\n\nexport interface Gif {\n\tid: string | number\n\tindex: number\n\tsrc: string\n\tx: number\n\ty: number\n\theight: number\n\twidth: number\n\tcanvasHeight: number\n\tcanvasWidth: number\n\tstartShowTime: number\n\tendShowTime: number\n\tcutId: string\n\tisShow: boolean\n}\n\nconst url = parse(window.location.href, true)\nlet urlStory: CutStore[] | null = null\nlet urlSources: Source[] | null = null\n\nif (url.query.story) {\n\tlocalStorage.removeItem('eyeMoStore')\n\twindow.history.pushState(null, '', '/')\n\tconst raw = decodeURIComponent(url.query.story)\n\turlStory = raw.split(',').map((player) => {\n\t\tconst parts = player.split('::')\n\n\t\treturn {\n\t\t\tid: parts[0],\n\t\t\tindex: parseFloat(parts[1]),\n\t\t\turl: parts[2],\n\t\t\tcut: {\n\t\t\t\tstartTime: parseFloat(parts[3]),\n\t\t\t\tendTime: parseFloat(parts[4]),\n\t\t\t},\n\t\t}\n\t})\n}\n\nif (url.query.video) {\n\tconst raw = decodeURIComponent(url.query.video)\n\turlSources = raw.split(',').map((source) => {\n\t\tconst parts = source.split('::')\n\n\t\treturn {\n\t\t\tid: parts[0],\n\t\t\tindex: parseFloat(parts[1]),\n\t\t\turl: parts[2],\n\t\t}\n\t})\n}\n\nconst hasUrl = urlSources && urlSources.length > 0\n\nclass Store {\n\t@observable sources: Source[] = urlSources || []\n\t@observable mode: Mode = !hasUrl ? Mode.Create : Mode.Show\n\t@observable cuts: CutStore[] = urlStory || []\n\t@observable gifs: Gif[] = []\n\t@observable players: Player[] = [0, 1, 2, 3].map((player, i) => {\n\t\treturn {\n\t\t\tid: i,\n\t\t\tplaying: false,\n\t\t\tpreloading: false,\n\t\t\tmuted: false,\n\t\t\turl: this.sources[0] ? this.sources[0].url : '',\n\t\t\tisVisible: i === 0,\n\t\t}\n\t})\n\t@ignore @observable playing = this.players.map((item) => false)\n\t@observable activePlayerIndex: number = 0\n\t@ignore @observable currentCutIndex: number = this.cuts.length > 0 ? 0 : -1\n\t@ignore @observable activeCutIndex: number | null = null\n\t@observable currentSourceIndex: number = this.sources.length > 0 ? 0 : -1\n\t@ignore @observable selectedGifId: string | null = null\n\t@ignore @observable isEnableCanvas: boolean = false\n\t@ignore @observable canvasSize: { height: number; width: number } = { height: 0, width: 0 }\n\t@ignore @observable isLoading: boolean = false\n\t@ignore @observable isShowTransition: boolean = false\n\n\t@computed get shareUrl() {\n\t\tif (this.sources.length === 0) return null\n\t\tconst baseUrl = window.location.href.split('?')[0]\n\n\t\treturn `${baseUrl}?video=${encodeURIComponent(\n\t\t\tthis.sources\n\t\t\t\t.map((source) => {\n\t\t\t\t\treturn [source.id, source.index, source.url].join('::')\n\t\t\t\t})\n\t\t\t\t.join(',')\n\t\t)}&story=${encodeURIComponent(\n\t\t\tthis.cuts\n\t\t\t\t.map((player, i) => {\n\t\t\t\t\treturn [player.id, player.index, player.url, player.cut?.startTime, player.cut?.endTime].join('::')\n\t\t\t\t})\n\t\t\t\t.join(',')\n\t\t)}`\n\t}\n\n\t@computed get trailerLength() {\n\t\treturn this.cuts.reduce((duration, player, index) => {\n\t\t\tif (!player.cut) return duration\n\t\t\treturn duration + player.cut.endTime - player.cut.startTime\n\t\t}, 0)\n\t}\n\n\t@computed get nextPlayerIndex() {\n\t\tif (this.activePlayerIndex === this.players.length - 1) return 0\n\t\treturn this.activePlayerIndex + 1\n\t}\n\n\t@computed get nextCutIndex() {\n\t\tif (this.currentCutIndex === this.cuts.length - 1) return 0\n\t\treturn this.currentCutIndex + 1\n\t}\n\n\t@action\n\taddCut(cut: Cut) {\n\t\tthis.cuts.push({\n\t\t\tid: uuid(),\n\t\t\tindex: this.cuts.length,\n\t\t\turl: this.sources[this.currentSourceIndex].url,\n\t\t\tcut: {\n\t\t\t\tstartTime: Math.round(cut.startTime * 1000) / 1000,\n\t\t\t\tendTime: Math.round(cut.endTime * 1000) / 1000,\n\t\t\t},\n\t\t})\n\t}\n\n\t@action\n\taddSource(url: string) {\n\t\tthis.sources = [\n\t\t\t...this.sources,\n\t\t\t{\n\t\t\t\tid: uuid(),\n\t\t\t\tindex: this.sources.length,\n\t\t\t\turl: url,\n\t\t\t},\n\t\t]\n\n\t\tplayerService.changeModeToCreate(this.sources.length - 1)\n\t}\n\n\t@action\n\taddGif(gif: IGif, cutIndex: number) {\n\t\tconst cut = this.cuts[cutIndex]\n\t\tthis.gifs = [\n\t\t\t...this.gifs,\n\t\t\t{\n\t\t\t\tid: uuid(),\n\t\t\t\tindex: this.gifs.length,\n\t\t\t\tsrc: gif.images.original.url,\n\t\t\t\tx: 0,\n\t\t\t\ty: 0,\n\t\t\t\theight: this.canvasSize.height * 0.2,\n\t\t\t\twidth: (gif.images.original.width * this.canvasSize.height * 0.2) / gif.images.original.height,\n\t\t\t\tcanvasHeight: this.canvasSize.height,\n\t\t\t\tcanvasWidth: this.canvasSize.width,\n\t\t\t\tstartShowTime: cut.cut.startTime,\n\t\t\t\tendShowTime: cut.cut.endTime,\n\t\t\t\tcutId: cut.id,\n\t\t\t\tisShow: true,\n\t\t\t},\n\t\t]\n\t}\n\n\t@action\n\tscaleGifs() {\n\t\tfor (let i = 0; i < this.gifs.length; i += 1) {\n\t\t\tconst { height, width, canvasWidth, canvasHeight, x, y } = this.gifs[i]\n\t\t\tconst scaleX = this.canvasSize.width / canvasWidth\n\t\t\tconst scaleY = this.canvasSize.height / canvasHeight\n\n\t\t\tthis.gifs[i] = {\n\t\t\t\t...this.gifs[i],\n\t\t\t\theight: height * scaleY,\n\t\t\t\twidth: width * scaleX,\n\t\t\t\tx: x * scaleX,\n\t\t\t\ty: y * scaleY,\n\t\t\t\tcanvasWidth: this.canvasSize.width,\n\t\t\t\tcanvasHeight: this.canvasSize.height,\n\t\t\t}\n\t\t}\n\t}\n\n\t@action\n\tremoveCut(cutIndex: number) {\n\t\tif (\n\t\t\tthis.players[this.activePlayerIndex].playing &&\n\t\t\t(cutIndex === this.currentCutIndex || cutIndex === this.nextCutIndex)\n\t\t)\n\t\t\treturn\n\n\t\tif (cutIndex === this.currentCutIndex) {\n\t\t\tplayerService.changeModeToCreate(0)\n\t\t\treturn\n\t\t}\n\n\t\tthis.cuts = this.cuts\n\t\t\t.filter((item) => item.index !== cutIndex)\n\t\t\t.map((item, index) => {\n\t\t\t\titem.index = index\n\t\t\t\treturn item\n\t\t\t})\n\t}\n\n\t@action\n\tremoveSource(sourceIndex: number) {\n\t\tthis.sources = this.sources\n\t\t\t.filter((item) => item.index !== sourceIndex)\n\t\t\t.map((item, index) => {\n\t\t\t\titem.index = index\n\t\t\t\treturn item\n\t\t\t})\n\t}\n\n\t@action\n\tclearStore() {\n\t\tthis.sources = []\n\t\tthis.mode = Mode.Create\n\t\tthis.cuts = []\n\t\tthis.gifs = []\n\t\tthis.players = [0, 1, 2, 3].map((player, i) => {\n\t\t\treturn {\n\t\t\t\tid: i,\n\t\t\t\tplaying: false,\n\t\t\t\tpreloading: false,\n\t\t\t\tmuted: false,\n\t\t\t\turl: this.sources[0] ? this.sources[0].url : '',\n\t\t\t\tisVisible: i === 0,\n\t\t\t}\n\t\t})\n\t\tthis.activePlayerIndex = 0\n\t\tthis.currentCutIndex = -1\n\t\tthis.activeCutIndex = null\n\t\tthis.currentSourceIndex = -1\n\t\tthis.selectedGifId = null\n\t}\n\n\tconstructor() {\n\t\tmakeObservable(this)\n\t\tautorun(() => console.log(`--> In ${this.mode.toUpperCase()} mode`))\n\n\t\t// if we go away from canvas we need to unselect all gifs\n\t\tautorun(() => {\n\t\t\tif (!this.isEnableCanvas) this.selectedGifId = null\n\t\t})\n\n\t\t// hide all gifs if we haven't any current cut\n\t\tautorun(() => {\n\t\t\tif (this.currentCutIndex === -1) gifService.checkShowGifs(0)\n\t\t})\n\t}\n}\n\nconst store = new Store()\n\n// TODO san: delete on production (need for debugging)\n// @ts-ignore\nwindow.store = store\n\nexport const trunk = new AsyncTrunk(store, { storageKey: 'eyeMoStore', storage: localStorage })\n\nexport default store\n","import { when } from 'mobx'\nimport ReactPlayer from 'react-player'\nimport store, { Mode } from '../store'\n\ninterface PlayerControl {\n\tplayer: ReactPlayer\n}\n\nclass PlayerService {\n\tcontrol: PlayerControl[] = []\n\n\tsetPlayer(playerIndex: number, player: PlayerControl) {\n\t\tthis.control[playerIndex] = player\n\t}\n\n\tgetActivePlayerPosition() {\n\t\tif (this.control.length === 0) return 0\n\t\treturn this.control[store.activePlayerIndex].player.getCurrentTime()\n\t}\n\n\tasync stop(playerIndex: number) {\n\t\tif (!store.playing[playerIndex]) return\n\t\tstore.playing[playerIndex] = false\n\t\tawait when(() => !store.players[playerIndex].playing)\n\t}\n\n\tasync start(playerIndex: number) {\n\t\tif (store.playing[playerIndex]) return\n\t\tstore.playing[playerIndex] = true\n\t\tawait when(() => store.players[playerIndex].playing)\n\t}\n\n\tasync playOne(cutIndex: number) {\n\t\tstore.mode = Mode.PlayOne\n\n\t\tawait this.stop(store.activePlayerIndex)\n\t\tstore.currentCutIndex = cutIndex\n\t\tawait this.preloadCut(store.activePlayerIndex, cutIndex)\n\t\tawait this.start(store.activePlayerIndex)\n\t}\n\n\tasync playAll(isShowMode?: boolean) {\n\t\tstore.isLoading = true\n\n\t\tif (store.cuts.length === 0) {\n\t\t\t// this.changeModeToCreate(0);\n\t\t\tawait this.start(store.activePlayerIndex)\n\t\t\treturn\n\t\t}\n\n\t\tif (!isShowMode) store.mode = Mode.PlayAll\n\t\tawait this.setDefaultPlayersState()\n\t\tawait this.start(store.activePlayerIndex)\n\t}\n\n\tasync changeModeToCreate(sourceIndex: number) {\n\t\tstore.mode = Mode.Create\n\n\t\tstore.currentSourceIndex = sourceIndex\n\t\tstore.currentCutIndex = -1\n\n\t\tfor (let i = 0; i < store.players.length; i += 1) {\n\t\t\tawait this.stop(i)\n\n\t\t\tif (i === store.activePlayerIndex) {\n\t\t\t\tstore.players[i] = {\n\t\t\t\t\t...store.players[i],\n\t\t\t\t\turl: store.sources[sourceIndex].url,\n\t\t\t\t\tplaying: false,\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tasync changeModeToShow() {\n\t\tstore.mode = Mode.Show\n\t\tawait this.playAll(true)\n\t}\n\n\tasync preloadCut(playerIndex: number, cutIndex: number) {\n\t\tstore.players[playerIndex] = {\n\t\t\t...store.players[playerIndex],\n\t\t\turl: store.cuts[cutIndex].url,\n\t\t\tcutIndex,\n\t\t}\n\n\t\tstore.players[playerIndex].preloading = true\n\t\tstore.players[playerIndex].muted = true\n\n\t\tawait this.start(playerIndex)\n\t\tawait this.stop(playerIndex)\n\t\tthis.control[playerIndex].player.getInternalPlayer().seekTo(store.cuts[cutIndex].cut.startTime, true)\n\n\t\tstore.players[playerIndex].muted = false\n\t\tstore.players[playerIndex].preloading = false\n\t}\n\n\tasync setDefaultPlayersState() {\n\t\tfor (let i = 0; i < store.players.length; i += 1) {\n\t\t\tawait this.stop(i)\n\t\t\tif (i < store.cuts.length) {\n\t\t\t\tstore.players[i].isVisible = i === 0\n\t\t\t\tawait this.preloadCut(i, i)\n\t\t\t} else {\n\t\t\t\tstore.players[i] = {\n\t\t\t\t\tid: store.players[i].id,\n\t\t\t\t\tmuted: false,\n\t\t\t\t\turl: '',\n\t\t\t\t\tplaying: false,\n\t\t\t\t\tpreloading: false,\n\t\t\t\t\tcutIndex: i,\n\t\t\t\t\tisVisible: false,\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tstore.activePlayerIndex = 0\n\t\tstore.currentCutIndex = 0\n\t}\n\n\tasync goToNextCut(currentPlayerIndex: number) {\n\t\tconst isLastCut = store.currentCutIndex === store.cuts.length - 1\n\n\t\tstore.isShowTransition = !isLastCut\n\t\tawait this.stop(currentPlayerIndex)\n\n\t\tif (isLastCut) {\n\t\t\tconsole.log('Last cut is end')\n\t\t\treturn\n\t\t}\n\n\t\tconst cutIndexForPreload = store.currentCutIndex + store.players.length\n\t\tconst isNeedToPreloadCut = cutIndexForPreload < store.cuts.length\n\n\t\tconsole.log(`Go from ${store.currentCutIndex} to ${store.nextCutIndex} cut`)\n\n\t\tstore.activePlayerIndex = store.nextPlayerIndex\n\t\tstore.currentCutIndex = store.nextCutIndex\n\n\t\tawait this.start(store.activePlayerIndex)\n\t\tstore.players[currentPlayerIndex].isVisible = false\n\t\tstore.players[store.activePlayerIndex].isVisible = true\n\n\t\tsetTimeout(() => (store.isShowTransition = false), 400)\n\n\t\tif (!isNeedToPreloadCut) return\n\n\t\tawait this.preloadCut(currentPlayerIndex, cutIndexForPreload)\n\t}\n\n\tgetTimePosition() {\n\t\tconst currentTime = this.control[store.activePlayerIndex].player.getCurrentTime()\n\n\t\tif (store.currentCutIndex < 0) return currentTime\n\n\t\tlet timePosition = 0\n\n\t\tfor (let i = 0; i < store.cuts.length; i += 1) {\n\t\t\tif (i > store.currentCutIndex) break\n\t\t\tconst startTime = store.cuts[i].cut.startTime\n\t\t\tconst endTime = store.cuts[i].cut.endTime\n\n\t\t\tif (i === store.currentCutIndex) {\n\t\t\t\ttimePosition += currentTime - startTime\n\t\t\t} else {\n\t\t\t\ttimePosition += endTime - startTime\n\t\t\t}\n\t\t}\n\n\t\treturn timePosition\n\t}\n}\n\nconst playerService = new PlayerService()\n\nexport default playerService\n","import store, { Cut, Gif } from '../store'\nimport playerService from './playerService'\n\nclass GifService {\n\tgetCutTime(gifId: string) {\n\t\tlet cutTime: Cut = {\n\t\t\tstartTime: 0,\n\t\t\tendTime: 0,\n\t\t}\n\t\tconst gifIndex = this.getGifIndexById(gifId)\n\n\t\tif (gifIndex !== null) {\n\t\t\tconst cutId = store.gifs[gifIndex].cutId\n\n\t\t\tstore.cuts.map((item) => {\n\t\t\t\tif (item.id === cutId) cutTime = item.cut\n\t\t\t})\n\t\t}\n\n\t\treturn cutTime\n\t}\n\n\tsetGifTime(gifId: string, value: any) {\n\t\tconst gifIndex = this.getGifIndexById(gifId)\n\n\t\tif (gifIndex === null) return\n\n\t\tstore.gifs[gifIndex].startShowTime = value[0]\n\t\tstore.gifs[gifIndex].endShowTime = value[1]\n\t}\n\n\tgetGifIndexById(gifId: string) {\n\t\tlet index = null\n\n\t\tstore.gifs.map((item) => {\n\t\t\tif (item.id === gifId) index = item.index\n\t\t})\n\n\t\treturn index\n\t}\n\n\tgetGifTime(gifId: string) {\n\t\tlet time = [0, 0]\n\t\tconst index = this.getGifIndexById(gifId)\n\n\t\tif (index !== null) {\n\t\t\ttime = [store.gifs[index].startShowTime, store.gifs[index].endShowTime]\n\t\t}\n\n\t\treturn time\n\t}\n\n\tisShowGif(gif: Gif) {\n\t\tif (store.cuts[store.currentCutIndex] === undefined || gif.cutId !== store.cuts[store.currentCutIndex].id)\n\t\t\treturn false\n\n\t\tconst currentPosition = playerService.getActivePlayerPosition()\n\n\t\treturn currentPosition >= gif.startShowTime && currentPosition <= gif.endShowTime\n\t}\n\n\tcheckShowGifs(position: number) {\n\t\tif (!store) return\n\n\t\tfor (let i = 0; i < store.gifs.length; i += 1) {\n\t\t\tconst gif = store.gifs[i]\n\n\t\t\tif (store.cuts[store.currentCutIndex] === undefined) {\n\t\t\t\tstore.gifs[i].isShow = false\n\t\t\t\tcontinue\n\t\t\t}\n\t\t\tif (\n\t\t\t\tgif.cutId === store.cuts[store.currentCutIndex].id &&\n\t\t\t\tgif.cutId === store.cuts[store.currentCutIndex].id &&\n\t\t\t\tposition >= gif.startShowTime &&\n\t\t\t\tposition < gif.endShowTime\n\t\t\t) {\n\t\t\t\tif (!store.gifs[i].isShow) console.log('Show gif on position: ' + position)\n\t\t\t\tstore.gifs[i].isShow = true\n\t\t\t} else {\n\t\t\t\tif (store.gifs[i].isShow) console.log('Hide gif on position: ' + position)\n\t\t\t\tstore.gifs[i].isShow = false\n\t\t\t}\n\t\t}\n\t}\n\n\tdeleteGif(gifId: string) {\n\t\tstore.gifs = store.gifs.filter((gif) => gif.id !== gifId)\n\t}\n}\n\nconst gifService = new GifService()\n\nexport default gifService\n","function pad(x: number) {\n\tif (x < 10) return `0${x}`\n\treturn x\n}\n\nexport function formatTime(duration: number | null, long = false) {\n\tif (!duration) return `00:00:00.0`\n\tconst hours = Math.floor(duration / 60 / 60)\n\tconst mins = Math.floor((duration / 60) % 60)\n\tconst seconds = Math.floor(duration % 60)\n\tconst fract = Math.floor((duration - Math.floor(duration)) * 10)\n\tlet time = `${pad(hours)}:${pad(mins)}:${pad(seconds)}`\n\tif (long) time = `${time}.${fract}`\n\treturn time\n}\n","import React, { ChangeEvent, useEffect, useRef, WheelEvent } from 'react'\n\nimport { IconButton, InputAdornment, TextField } from '@material-ui/core'\nimport RemoveIcon from '@material-ui/icons/Remove'\nimport AddIcon from '@material-ui/icons/Add'\n\nimport styles from './TimeInput.module.sass'\nimport { formatTime } from '../../utils/format-time'\n\ninterface Props {\n\tvalue: number\n\tlabel?: string\n\tonChange: (value: number) => void\n}\n\nfunction Adornment({ onClick, position }: { position: 'start' | 'end'; onClick: () => void }) {\n\treturn (\n\t\t<InputAdornment position={position}>\n\t\t\t<IconButton edge={position} onClick={onClick} className={styles.changeButton}>\n\t\t\t\t{position === 'start' ? <RemoveIcon style={{ fontSize: 12 }} /> : <AddIcon style={{ fontSize: 12 }} />}\n\t\t\t</IconButton>\n\t\t</InputAdornment>\n\t)\n}\n\nexport default function TimeInput(props: Props) {\n\tconst textFieldRef = useRef(null)\n\n\tfunction onChange(e: ChangeEvent<HTMLInputElement>) {}\n\n\tfunction onWheel(e: WheelEvent<HTMLElement>): void {\n\t\te.preventDefault()\n\n\t\tif (e.deltaY > 0) {\n\t\t\tonAdd()\n\t\t} else {\n\t\t\tonRemove()\n\t\t}\n\t}\n\n\tfunction onRemove() {\n\t\tif (!props.value) return\n\n\t\tlet newVal = props.value - 0.1\n\n\t\tif (newVal < 0) newVal = 0\n\n\t\tprops.onChange(newVal)\n\t}\n\n\tfunction onAdd() {\n\t\tprops.onChange(props.value + 0.1)\n\t}\n\n\tuseEffect(() => {\n\t\tconst textField = textFieldRef.current\n\n\t\t;(textField as any)?.addEventListener('wheel', onWheel)\n\t\treturn () => {\n\t\t\t;(textField as any)?.removeEventListener('wheel', onWheel)\n\t\t}\n\t}, [props.value])\n\n\tconst formattedProps = {\n\t\t...props,\n\t\tvalue: formatTime(props.value, true),\n\t}\n\n\tconst textField = (\n\t\t<TextField\n\t\t\t{...formattedProps}\n\t\t\tclassName={styles.timeInput}\n\t\t\tsize={'small'}\n\t\t\thelperText={null}\n\t\t\tvariant='outlined'\n\t\t\tonChange={onChange}\n\t\t\tref={textFieldRef}\n\t\t\tInputProps={{\n\t\t\t\tstartAdornment: <Adornment position='start' onClick={onRemove} />,\n\t\t\t\tendAdornment: <Adornment position='end' onClick={onAdd} />,\n\t\t\t\treadOnly: true,\n\t\t\t}}\n\t\t/>\n\t)\n\n\treturn textField\n}\n","import React from 'react'\nimport { Image, Transformer } from 'react-konva'\nimport 'gifler'\nimport { observer } from 'mobx-react'\nimport { Gif } from '../../store'\nimport Konva from 'konva'\n\ninterface Props {\n\tgif: Gif\n\tisSelected: boolean\n\tisShow: boolean\n\tonSelect: () => void\n\tonChange: (newAttrs: Gif) => void\n}\n\nconst GifComponent: React.FC<Props> = ({ gif, isSelected, isShow, onChange, onSelect }) => {\n\tconst gifRef = React.useRef<any>(null)\n\tconst trRef = React.useRef<any>()\n\n\tconst canvas = React.useMemo(() => {\n\t\tconst node = document.createElement('canvas')\n\t\treturn node\n\t}, [])\n\n\tReact.useEffect(() => {\n\t\tlet anim: any\n\n\t\t// @ts-ignore\n\t\twindow.gifler(gif.src).get((a: any) => {\n\t\t\tanim = a\n\t\t\tanim.animateInCanvas(canvas)\n\t\t\tanim.onDrawFrame = (\n\t\t\t\tctx: { drawImage: (arg0: any, arg1: any, arg2: any) => void },\n\t\t\t\tframe: { buffer: any; x: any; y: any }\n\t\t\t) => {\n\t\t\t\tctx.drawImage(frame.buffer, frame.x, frame.y)\n\t\t\t\tif (!gifRef.current) return\n\t\t\t\t// @ts-ignore\n\t\t\t\tgifRef.current.getLayer().draw()\n\t\t\t}\n\t\t})\n\t\treturn () => anim.stop()\n\t}, [gif.src, canvas])\n\n\tReact.useEffect(() => {\n\t\tif (isSelected && trRef.current) {\n\t\t\t// we need to attach transformer manually\n\t\t\ttrRef.current.nodes([gifRef.current])\n\t\t\ttrRef.current.getLayer().batchDraw()\n\t\t}\n\t}, [isSelected])\n\n\tconst onDragEnd = (e: Konva.KonvaEventObject<DragEvent>) => {\n\t\tonChange({ ...gif, x: e.target.x(), y: e.target.y() })\n\t}\n\n\tconst onTransformEnd = (e: Konva.KonvaEventObject<Event>) => {\n\t\tconst node = gifRef.current\n\t\tconst scaleX = node.scaleX()\n\t\tconst scaleY = node.scaleY()\n\n\t\tnode.scaleX(1)\n\t\tnode.scaleY(1)\n\t\tonChange({\n\t\t\t...gif,\n\t\t\tx: node.x(),\n\t\t\ty: node.y(),\n\t\t\twidth: Math.max(5, node.width() * scaleX),\n\t\t\theight: Math.max(node.height() * scaleY),\n\t\t})\n\t}\n\n\treturn (\n\t\t<>\n\t\t\t{isShow && (\n\t\t\t\t<Image\n\t\t\t\t\tref={gifRef}\n\t\t\t\t\timage={canvas}\n\t\t\t\t\tx={gif.x}\n\t\t\t\t\ty={gif.y}\n\t\t\t\t\twidth={gif.width}\n\t\t\t\t\theight={gif.height}\n\t\t\t\t\tdraggable\n\t\t\t\t\tonClick={onSelect}\n\t\t\t\t\tonTap={onSelect}\n\t\t\t\t\tonDragEnd={onDragEnd}\n\t\t\t\t\tonTransformEnd={onTransformEnd}\n\t\t\t\t/>\n\t\t\t)}\n\t\t\t{isShow && isSelected && (\n\t\t\t\t<Transformer\n\t\t\t\t\tref={trRef}\n\t\t\t\t\tboundBoxFunc={(oldBox, newBox) => {\n\t\t\t\t\t\tif (newBox.width < 5 || newBox.height < 5) {\n\t\t\t\t\t\t\treturn oldBox\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn newBox\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t)}\n\t\t</>\n\t)\n}\n\nexport default observer(GifComponent)\n","import CanvasLayer from './CanvasLayer'\n\nexport default CanvasLayer\n","import React from 'react'\nimport { Layer, Stage } from 'react-konva'\nimport { observer } from 'mobx-react'\nimport Konva from 'konva'\n\nimport style from './CanvasLayer.module.sass'\nimport store, { Gif } from '../../store'\nimport GifComponent from './GifComponent'\n\ninterface Props {}\n\nconst CanvasLayer: React.FC<Props> = () => {\n\tconst checkDeselect = (e: Konva.KonvaEventObject<TouchEvent> | Konva.KonvaEventObject<MouseEvent>) => {\n\t\tconst clickedOnEmpty = e.target === e.target.getStage()\n\t\tif (clickedOnEmpty) {\n\t\t\tstore.selectedGifId = null\n\t\t}\n\t}\n\n\tconst onSelect = (gifId: string) => {\n\t\tstore.selectedGifId = gifId\n\t}\n\n\tconst onChange = (gifIndex: number, newAttrs: Gif) => (store.gifs[gifIndex] = newAttrs)\n\n\treturn (\n\t\t<div>\n\t\t\t<Stage\n\t\t\t\tclassName={style.container}\n\t\t\t\twidth={store.canvasSize.width}\n\t\t\t\theight={store.canvasSize.height}\n\t\t\t\tstyle={store.isEnableCanvas ? { pointerEvents: 'all' } : { pointerEvents: 'none' }}\n\t\t\t\tonMouseDown={checkDeselect}\n\t\t\t\tonTouchStart={checkDeselect}\n\t\t\t>\n\t\t\t\t<Layer>\n\t\t\t\t\t{store.gifs.map((gif: any, i: number) => {\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<GifComponent\n\t\t\t\t\t\t\t\tkey={gif.id}\n\t\t\t\t\t\t\t\tgif={gif}\n\t\t\t\t\t\t\t\tisSelected={gif.id === store.selectedGifId}\n\t\t\t\t\t\t\t\tisShow={gif.isShow}\n\t\t\t\t\t\t\t\tonSelect={onSelect.bind(null, gif.id)}\n\t\t\t\t\t\t\t\tonChange={onChange.bind(null, gif.index)}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t)\n\t\t\t\t\t})}\n\t\t\t\t</Layer>\n\t\t\t</Stage>\n\t\t</div>\n\t)\n}\n\nexport default observer(CanvasLayer)\n","import React from 'react'\nimport ReactPlayer from 'react-player'\nimport { observer } from 'mobx-react'\n\nimport store, { Cut, Mode } from '../../store'\nimport styles from './MultiPlayer.module.sass'\nimport playerService from '../../services/playerService'\nimport gifService from '../../services/gifService'\n\ninterface Props {\n\tupdatePosition: (playedSeconds: number) => void\n}\n\nfunction MultiPlayer(props: Props) {\n\tconst { updatePosition } = props\n\t// const playerRef = React.createRef<ReactPlayer>()\n\n\tconst onReady = (playerIndex: number, player: ReactPlayer) => {\n\t\tconsole.log(`Player ${playerIndex} onReady`)\n\n\t\tplayerService.setPlayer(playerIndex, {\n\t\t\tplayer,\n\t\t})\n\t}\n\n\tconst onProgress = async (playerIndex: number, playerState: any) => {\n\t\tgifService.checkShowGifs(playerState.playedSeconds)\n\n\t\tif (\n\t\t\tplayerIndex !== store.activePlayerIndex ||\n\t\t\tstore.players[playerIndex].preloading ||\n\t\t\t!store.players[playerIndex].playing\n\t\t) {\n\t\t\tconsole.log(`Player ${playerIndex} onProgress stopped`)\n\t\t\treturn\n\t\t}\n\n\t\tif (store.isLoading) store.isLoading = false\n\t\tupdatePosition(playerService.getTimePosition())\n\n\t\tconst cutIndex = store.players[playerIndex].cutIndex\n\t\tif (cutIndex === undefined || store.currentCutIndex === -1) {\n\t\t\tconsole.log(`Player ${playerIndex} onProgress No cut index in player`)\n\t\t\treturn\n\t\t}\n\n\t\tconst cut = store.cuts[cutIndex].cut\n\t\tconsole.log(\n\t\t\t`Player ${playerIndex} onProgress in ${playerState.playedSeconds} sec (s: ${cut?.startTime} e: ${cut?.endTime}`\n\t\t)\n\n\t\tswitch (store.mode) {\n\t\t\tcase Mode.Create:\n\t\t\t\tbreak\n\t\t\tcase Mode.PlayOne:\n\t\t\t\tif (isInCut(cut, playerState.playedSeconds)) return\n\t\t\t\tawait playerService.stop(playerIndex)\n\t\t\t\tbreak\n\t\t\tcase Mode.PlayAll:\n\t\t\t\tif (isInCut(cut, playerState.playedSeconds)) return\n\t\t\t\tawait playerService.goToNextCut(playerIndex)\n\t\t\t\tbreak\n\t\t\tcase Mode.Show:\n\t\t\t\tif (isInCut(cut, playerState.playedSeconds)) return\n\t\t\t\tawait playerService.goToNextCut(playerIndex)\n\t\t\t\tbreak\n\t\t}\n\t}\n\n\tconst onBuffer = (playerIndex: number) => {\n\t\tconsole.log(`Player ${playerIndex} onBuffer`)\n\t}\n\n\tconst onBufferEnd = (playerIndex: number) => {\n\t\tconsole.log(`Player ${playerIndex} onBufferEnd`)\n\t}\n\n\tconst onStart = (playerIndex: number) => {\n\t\tconsole.log(`Player ${playerIndex} onStart`)\n\t\t// if (!store.playing[playerIndex]) store.playing[playerIndex] = true\n\t\t// store.players[playerIndex].playing = true\n\t}\n\n\tconst onPlay = (playerIndex: number) => {\n\t\tconsole.log(`Player ${playerIndex} onPlay`)\n\t\tif (!store.playing[playerIndex]) store.playing[playerIndex] = true\n\t\tstore.players[playerIndex].playing = true\n\t}\n\n\tconst onPause = (playerIndex: number) => {\n\t\tconsole.log(`Player ${playerIndex} onPause`)\n\t\tif (store.playing[playerIndex]) store.playing[playerIndex] = false\n\t\tstore.players[playerIndex].playing = false\n\t}\n\n\tconst onEnded = (playerIndex: number) => {\n\t\tconsole.log(`Player ${playerIndex} onEnded`)\n\t}\n\n\tconst onSeek = (playerIndex: number, e: any) => {\n\t\tconsole.log(`Player ${playerIndex} onSeek`)\n\t}\n\n\tconst isInCut = (cut: Cut | null | undefined, playedSeconds: number) => {\n\t\tif (!cut) return false\n\t\tif (playedSeconds >= cut.startTime && playedSeconds <= cut.endTime) return true\n\t\treturn false\n\t}\n\n\treturn (\n\t\t<div>\n\t\t\t{store.sources.length > 0 ? (\n\t\t\t\tstore.players.map((item, index, array) => {\n\t\t\t\t\tconst curIndex = array.length - 1 - index\n\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tkey={store.players[curIndex].id}\n\t\t\t\t\t\t\tstyle={{ visibility: store.players[curIndex].isVisible ? 'visible' : 'hidden' }}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<ReactPlayer\n\t\t\t\t\t\t\t\t// ref={playerRef}\n\t\t\t\t\t\t\t\tplaying={store.playing[curIndex]}\n\t\t\t\t\t\t\t\tclassName={styles.player}\n\t\t\t\t\t\t\t\turl={store.players[curIndex].url}\n\t\t\t\t\t\t\t\tmuted={store.players[curIndex].muted}\n\t\t\t\t\t\t\t\twidth='100%'\n\t\t\t\t\t\t\t\theight='100%'\n\t\t\t\t\t\t\t\tonPlay={onPlay.bind(null, curIndex)}\n\t\t\t\t\t\t\t\tonProgress={onProgress.bind(null, curIndex)}\n\t\t\t\t\t\t\t\tonStart={onStart.bind(null, curIndex)}\n\t\t\t\t\t\t\t\tonPause={onPause.bind(null, curIndex)}\n\t\t\t\t\t\t\t\tonEnded={onEnded.bind(null, curIndex)}\n\t\t\t\t\t\t\t\tonReady={onReady.bind(null, curIndex)}\n\t\t\t\t\t\t\t\tonSeek={onSeek.bind(null, curIndex)}\n\t\t\t\t\t\t\t\tonBufferEnd={onBufferEnd.bind(null, curIndex)}\n\t\t\t\t\t\t\t\tonBuffer={onBuffer.bind(null, curIndex)}\n\t\t\t\t\t\t\t\tprogressInterval={100}\n\t\t\t\t\t\t\t\tcontrols={true}\n\t\t\t\t\t\t\t\tconfig={{\n\t\t\t\t\t\t\t\t\tyoutube: {\n\t\t\t\t\t\t\t\t\t\tplayerVars: {},\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t// twitch: {\n\t\t\t\t\t\t\t\t\t// \toptions: {\n\t\t\t\t\t\t\t\t\t// \t\tautoplay: true,\n\t\t\t\t\t\t\t\t\t// \t\ttime: '0h0m0s',\n\t\t\t\t\t\t\t\t\t// \t},\n\t\t\t\t\t\t\t\t\t// },\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)\n\t\t\t\t})\n\t\t\t) : (\n\t\t\t\t<div className={styles.playerPlaceholder} />\n\t\t\t)}\n\t\t</div>\n\t)\n}\n\nexport default observer(MultiPlayer)\n","import React, { SyntheticEvent, useEffect, useState } from 'react'\nimport { Grid as GiphyGrid } from '@giphy/react-components'\nimport { GiphyFetch } from '@giphy/js-fetch-api'\nimport ResizeObserver from 'react-resize-observer'\nimport { IGif } from '@giphy/js-types'\n\nimport styles from './GifsPanel.module.sass'\nimport { ContentView } from '../ContentView'\nimport { Input } from '../Input'\nimport store from '../../store'\nimport { observer } from 'mobx-react'\n\nconst giphyFetch = new GiphyFetch('IPKlChsULe1Qlt19wbrWHlnjDr04SZa8') //SAu9S1jJDQJ8ADDghPxES7V2YQKiGtIH\n\nenum FetchType {\n\tTrending = 'trending',\n\tSearch = 'search',\n}\n\ninterface GifsProps {\n\twidth: number\n\tsearchText: string\n\tfetchType: FetchType\n}\n\nfunction Gifs({ width, searchText, fetchType }: GifsProps) {\n\tfunction fetchGifs(offset: number) {\n\t\tif (fetchType === FetchType.Search) return giphyFetch.search(searchText, { offset, limit: 10 })\n\t\tif (fetchType === FetchType.Trending) return giphyFetch.trending({ offset, limit: 10 })\n\t\treturn giphyFetch.trending({ offset, limit: 10 })\n\t}\n\n\tconst addGif = (gif: IGif, e: SyntheticEvent<HTMLElement, Event>) => {\n\t\te.preventDefault()\n\t\tif (store.activeCutIndex === null) {\n\t\t\talert('Ты не выбрал кусочек!')\n\t\t\treturn\n\t\t}\n\t\tstore.addGif(gif, store.activeCutIndex)\n\t}\n\n\treturn <GiphyGrid fetchGifs={fetchGifs} width={width} columns={4} gutter={6} onGifClick={addGif} />\n}\n\nfunction GifsPanel() {\n\tconst giphyGrid = React.createRef<any>()\n\n\tconst [width, setWidth] = useState<number | null>(null)\n\tconst [searchText, setSearchText] = useState<string>('')\n\tconst [showGrid, setShowGrid] = useState(true)\n\n\tuseEffect(() => {\n\t\tif (!giphyGrid) return\n\n\t\tsetWidth(giphyGrid.current.offsetWidth)\n\t}, [giphyGrid])\n\n\tuseEffect(() => {\n\t\tconst delayDebounce = setTimeout(() => {\n\t\t\tsetShowGrid(true)\n\t\t}, 1000)\n\n\t\treturn () => clearTimeout(delayDebounce)\n\t}, [searchText])\n\n\tfunction onChangeSearchText(value: string) {\n\t\tsetShowGrid(false)\n\t\tsetSearchText(value)\n\t}\n\n\treturn (\n\t\t<ContentView title='Add Gif'>\n\t\t\t<div ref={giphyGrid} className={styles.root}>\n\t\t\t\t<Input placeholder='Search with GIPHY' value={searchText} onChange={onChangeSearchText} />\n\t\t\t\t{width && (\n\t\t\t\t\t<div className={styles.gifsPanel}>\n\t\t\t\t\t\t{showGrid && searchText === '' && (\n\t\t\t\t\t\t\t<Gifs width={width} searchText={searchText} fetchType={FetchType.Trending} />\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t{showGrid && searchText !== '' && (\n\t\t\t\t\t\t\t<Gifs width={width} searchText={searchText} fetchType={FetchType.Search} />\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t<ResizeObserver\n\t\t\t\t\t\t\tonResize={({ width }) => {\n\t\t\t\t\t\t\t\t// setWidth(width)\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t</ContentView>\n\t)\n}\n\nexport default observer(GifsPanel)\n","import React, { useEffect, useState } from 'react'\nimport { ButtonGroup, IconButton, Slider } from '@material-ui/core'\nimport DeleteIcon from '@material-ui/icons/Delete'\nimport PlayArrowIcon from '@material-ui/icons/PlayArrow'\nimport ThumbUpIcon from '@material-ui/icons/ThumbUp'\nimport { observer } from 'mobx-react'\n\nimport store from '../../store'\nimport gifService from '../../services/gifService'\nimport styles from './GifMenu.module.scss'\nimport playerService from '../../services/playerService'\n\ninterface Props {}\n\nconst GifMenu: React.FC<Props> = (props) => {\n\tconst [value, setValue] = useState([0, 0])\n\n\tuseEffect(() => {\n\t\tif (store.selectedGifId === null) return\n\t\tsetValue(gifService.getGifTime(store.selectedGifId))\n\t}, [store.selectedGifId])\n\n\tconst onChangeGifTime = (event: React.ChangeEvent<{}>, newValue: any) => {\n\t\tsetValue(newValue)\n\t}\n\n\tconst saveTime = () => {\n\t\tif (store.selectedGifId === null) return\n\t\tgifService.setGifTime(store.selectedGifId, value)\n\t}\n\n\tconst deleteGif = () => {\n\t\tif (store.selectedGifId === null) return\n\t\tgifService.deleteGif(store.selectedGifId)\n\t\tstore.selectedGifId = null\n\t}\n\n\tconst playCut = async () => {\n\t\tawait playerService.playOne(store.currentCutIndex)\n\t}\n\n\treturn (\n\t\t<>\n\t\t\t{store.selectedGifId && (\n\t\t\t\t<div className={styles.container}>\n\t\t\t\t\t<Slider\n\t\t\t\t\t\tvalue={value}\n\t\t\t\t\t\tonChange={onChangeGifTime}\n\t\t\t\t\t\tvalueLabelDisplay='auto'\n\t\t\t\t\t\taria-labelledby='range-slider'\n\t\t\t\t\t\tmax={gifService.getCutTime(store.selectedGifId).endTime}\n\t\t\t\t\t\tmin={gifService.getCutTime(store.selectedGifId).startTime}\n\t\t\t\t\t\tstep={0.01}\n\t\t\t\t\t/>\n\t\t\t\t\t<ButtonGroup size='small' aria-label='small outlined button group'>\n\t\t\t\t\t\t<IconButton aria-label='play' color='primary' onClick={playCut}>\n\t\t\t\t\t\t\t<PlayArrowIcon />\n\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t<IconButton aria-label='thumbUp' color='primary' onClick={saveTime}>\n\t\t\t\t\t\t\t<ThumbUpIcon />\n\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t<IconButton aria-label='delete' color='primary' onClick={deleteGif}>\n\t\t\t\t\t\t\t<DeleteIcon />\n\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t</ButtonGroup>\n\t\t\t\t</div>\n\t\t\t)}\n\t\t</>\n\t)\n}\n\nexport default observer(GifMenu)\n","import React from 'react'\nimport { Button, CircularProgress, Grid } from '@material-ui/core'\nimport cx from 'classnames'\nimport { observer } from 'mobx-react'\nimport ResizeObserver from 'react-resize-observer'\n\nimport store, { Cut, Mode } from '../../store'\nimport { formatTime } from '../../utils/format-time'\nimport styles from './PlayerPanel.module.scss'\nimport TimeInput from '../TimeInput/TimeInput'\nimport Canvas from '../CanvasLayer/'\nimport MultiPlayer from '../MultiPlayer'\nimport playerService from '../../services/playerService'\nimport GifMenu from '../GifMenu'\n\nexport type CanvasSize = {\n\twidth: number\n\theight: number\n}\n\ninterface PlayerPanelState {\n\tcut: Cut | null\n\tplaying: boolean\n\tposition: number\n\trecord: boolean\n}\n\nclass PlayerPanel extends React.Component {\n\tstate: PlayerPanelState\n\tprivate canvasRef: React.RefObject<any>\n\n\tconstructor(props: any) {\n\t\tsuper(props)\n\n\t\tthis.state = {\n\t\t\tcut: null,\n\t\t\tplaying: false,\n\t\t\tposition: 0,\n\t\t\trecord: false,\n\t\t}\n\n\t\tthis.canvasRef = React.createRef()\n\t}\n\n\tcomponentDidMount() {\n\t\tif (!this.canvasRef.current) return\n\n\t\tstore.canvasSize = {\n\t\t\twidth: this.canvasRef.current.offsetWidth,\n\t\t\theight: this.canvasRef.current.offsetHeight,\n\t\t}\n\t}\n\n\tchangeStart = (time: number) => {\n\t\tthis.setState({\n\t\t\tcut: {\n\t\t\t\tstartTime: time,\n\t\t\t\tendTime: Math.max(this.state.cut!.endTime, time + 1),\n\t\t\t},\n\t\t})\n\t}\n\n\tchangeEnd = (time: number) => {\n\t\tthis.setState({\n\t\t\tcut: {\n\t\t\t\tstartTime: Math.min(this.state.cut!.startTime, time - 1),\n\t\t\t\tendTime: time,\n\t\t\t},\n\t\t})\n\t}\n\n\tplay = (): void => {\n\t\tconst { cut } = this.state\n\n\t\tif (!cut) return\n\n\t\tstore.players[store.activePlayerIndex].playing = false\n\t\tplayerService.control[store.activePlayerIndex].player.seekTo(cut.startTime)\n\n\t\tsetTimeout(() => {\n\t\t\tplayerService.start(store.activePlayerIndex)\n\n\t\t\tconst checkCut = () => {\n\t\t\t\tconst { cut } = this.state\n\t\t\t\tif (!cut) return\n\n\t\t\t\tconst player = playerService.control[store.activePlayerIndex].player\n\t\t\t\tconst position = player ? player.getCurrentTime() : 0\n\n\t\t\t\tif (position >= cut?.startTime && position <= cut?.endTime) return\n\t\t\t\tclearInterval(intervalId)\n\t\t\t\tplayerService.stop(store.activePlayerIndex)\n\t\t\t}\n\n\t\t\tconst intervalId = setInterval(checkCut, 100)\n\t\t}, 1000)\n\t}\n\n\tclear = () => {\n\t\tthis.setState({\n\t\t\tcut: null,\n\t\t})\n\t}\n\n\tonAddCut = () => {\n\t\tconst { cut } = this.state\n\n\t\tif (!cut) return\n\n\t\tstore.addCut(cut)\n\t\tthis.setState({\n\t\t\tstartTime: 0,\n\t\t\tendTime: 0,\n\t\t})\n\t}\n\n\tupdatePosition = (playedSeconds: number) => {\n\t\tthis.setState({ position: playedSeconds })\n\t}\n\n\tonStartFrame = () => {\n\t\tconst { position, cut } = this.state\n\t\tconst current = {\n\t\t\tstartTime: cut?.startTime || 0,\n\t\t\tendTime: cut?.endTime || 0,\n\t\t}\n\n\t\tcurrent.startTime = position\n\t\tif (current.endTime < position) current.endTime = position + 5\n\t\tthis.setState({ cut: current })\n\t}\n\n\tonEndFrame = () => {\n\t\tconst { position, cut } = this.state\n\t\tconst current = {\n\t\t\tstartTime: cut?.startTime || 0,\n\t\t\tendTime: cut?.endTime || 0,\n\t\t}\n\n\t\tcurrent.endTime = position\n\t\tif (current.startTime > position) current.startTime = position - 5\n\t\tthis.setState({ cut: current })\n\t}\n\n\tonResizePlayerWrapper = ({ width, height }: { width: number; height: number }) => {\n\t\tstore.canvasSize = { width, height }\n\t\tstore.scaleGifs()\n\t}\n\n\trender() {\n\t\tconst { position, cut, record } = this.state\n\n\t\treturn (\n\t\t\t<div className={styles.container}>\n\t\t\t\t<div style={{ fontSize: '10px' }}>\n\t\t\t\t\tPlayer: {store.activePlayerIndex}/{store.players.length - 1} Cut: {store.currentCutIndex}/\n\t\t\t\t\t{store.cuts.length - 1} Source: {store.currentSourceIndex}/{store.sources.length - 1}\n\t\t\t\t</div>\n\t\t\t\t<Grid ref={this.canvasRef} className={cx('padded', styles.playerWrapper)}>\n\t\t\t\t\t<MultiPlayer updatePosition={this.updatePosition} />\n\t\t\t\t\t<Canvas />\n\t\t\t\t\t<ResizeObserver onResize={this.onResizePlayerWrapper} />\n\t\t\t\t\t<div\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\tposition: 'absolute',\n\t\t\t\t\t\t\ttop: 0,\n\t\t\t\t\t\t\tleft: 0,\n\t\t\t\t\t\t\tbackgroundColor: 'black',\n\t\t\t\t\t\t\tcolor: 'white',\n\t\t\t\t\t\t\twidth: '100%',\n\t\t\t\t\t\t\theight: '100%',\n\t\t\t\t\t\t\tvisibility: store.isShowTransition ? 'visible' : 'hidden',\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t</Grid>\n\t\t\t\t{store.mode !== Mode.Show && store.sources.length > 0 ? (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<Grid justify='center' container>\n\t\t\t\t\t\t\t{formatTime(position, true)}\n\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t<GifMenu />\n\t\t\t\t\t\t<Grid container>\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tclassName={cx(styles.recButton, {\n\t\t\t\t\t\t\t\t\t[styles.active]: record,\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\tonMouseDown={() => {\n\t\t\t\t\t\t\t\t\tconsole.log('down')\n\t\t\t\t\t\t\t\t\tthis.setState({ record: true })\n\t\t\t\t\t\t\t\t\tthis.onStartFrame()\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\tonMouseUp={() => {\n\t\t\t\t\t\t\t\t\tconsole.log('up')\n\t\t\t\t\t\t\t\t\tthis.setState({ record: false })\n\t\t\t\t\t\t\t\t\tthis.onEndFrame()\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{record ? 'stop rec' : 'start rec'}\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t{cut && (\n\t\t\t\t\t\t\t<Grid container justify='center' className={styles.timeRow} alignContent='flex-end'>\n\t\t\t\t\t\t\t\t<Grid item lg>\n\t\t\t\t\t\t\t\t\t<TimeInput value={cut.startTime} label='Start time' onChange={this.changeStart} />\n\t\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t\t<Grid item lg>\n\t\t\t\t\t\t\t\t\t<TimeInput value={cut?.endTime} label='End time' onChange={this.changeEnd} />\n\t\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t\t<Grid\n\t\t\t\t\t\t\t\t\titem\n\t\t\t\t\t\t\t\t\tclassName={styles.buttons}\n\t\t\t\t\t\t\t\t\txs\n\t\t\t\t\t\t\t\t\tjustify={'flex-end'}\n\t\t\t\t\t\t\t\t\talignContent={'center'}\n\t\t\t\t\t\t\t\t\tcontainer\n\t\t\t\t\t\t\t\t\twrap={'nowrap'}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<Button variant='outlined' disableElevation onClick={this.play}>\n\t\t\t\t\t\t\t\t\t\tPlay\n\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\tvariant='contained'\n\t\t\t\t\t\t\t\t\t\tcolor='primary'\n\t\t\t\t\t\t\t\t\t\tdisableElevation\n\t\t\t\t\t\t\t\t\t\tonClick={this.onAddCut}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\tAdd\n\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t<Button variant='contained' disableElevation onClick={this.clear}>\n\t\t\t\t\t\t\t\t\t\tClear\n\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</>\n\t\t\t\t) : (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<Grid className={styles.previewButtons} container>\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tvariant='contained'\n\t\t\t\t\t\t\t\tsize='large'\n\t\t\t\t\t\t\t\tcolor='primary'\n\t\t\t\t\t\t\t\tdisableElevation\n\t\t\t\t\t\t\t\tdisabled={store.isLoading}\n\t\t\t\t\t\t\t\tonClick={() => playerService.changeModeToShow()}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tPlay trailer\n\t\t\t\t\t\t\t\t{store.isLoading && <CircularProgress size={20} />}\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tvariant='contained'\n\t\t\t\t\t\t\t\tcolor='primary'\n\t\t\t\t\t\t\t\tdisableElevation\n\t\t\t\t\t\t\t\tonClick={() => playerService.changeModeToCreate(0)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tMake your own trailer\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</Grid>\n\t\t\t\t\t</>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t)\n\t}\n}\n\nexport default observer(PlayerPanel)\n","import React from 'react';\nimport styles from './contentView.module.scss';\n\ntype Props = {\n\ttitle: string;\n\tchildren: React.ReactNode;\n};\n\nexport const ContentView: React.FC<Props> = ({ title, children }) => (\n\t<div className={styles.container}>\n\t\t<h2 className={styles.title}>{title}</h2>\n\t\t{children}\n\t</div>\n);\n","import React from 'react';\nimport { ContentView } from '../ContentView';\n\nexport const AudioPanel: React.FC = () => {\n\treturn (\n\t\t<ContentView title='Add Music'>\n\t\t\t<div>Блок с аудио-контентом</div>\n\t\t</ContentView>\n\t);\n};\n","export default __webpack_public_path__ + \"static/media/closeIcon.0b48234f.svg\";","import React from 'react'\nimport styles from './input.module.scss'\nimport closeIcon from './assets/img/closeIcon.svg'\n\ntype Props = {\n\tvalue: string\n\tplaceholder?: string\n\tonChange: (value: string) => void\n}\n\nexport const Input: React.FC<Props> = ({ value, placeholder, onChange }) => {\n\treturn (\n\t\t<div className={styles.container}>\n\t\t\t<input\n\t\t\t\tonChange={(e) => onChange(e.target.value)}\n\t\t\t\tvalue={value}\n\t\t\t\tplaceholder={placeholder}\n\t\t\t\tclassName={styles.input}\n\t\t\t/>\n\t\t\t{value && (\n\t\t\t\t<div className={styles.buttonsBlock}>\n\t\t\t\t\t<button type='button' className={styles.clearButton} onClick={() => onChange('')}>\n\t\t\t\t\t\t<img src={closeIcon} alt='Close icon' />\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t)}\n\t\t</div>\n\t)\n}\n","import React from 'react'\nimport cx from 'classnames'\nimport styles from './tabItem.module.scss'\n\ntype Props = {\n\ticon: string\n\tvalue: string\n\tisActive: boolean\n\tonClick: (value: string) => void\n}\n\nexport const TabItem: React.FC<Props> = ({ value, isActive, icon, onClick }) => {\n\treturn (\n\t\t<div\n\t\t\tonClick={() => onClick(value)}\n\t\t\tclassName={cx(styles.tabItem, {\n\t\t\t\t[styles.active]: isActive,\n\t\t\t})}\n\t\t>\n\t\t\t<img\n\t\t\t\tsrc={icon}\n\t\t\t\tclassName={cx(styles.icon, {\n\t\t\t\t\t[styles.activeIcon]: isActive,\n\t\t\t\t})}\n\t\t\t\talt='Source icon'\n\t\t\t/>\n\t\t</div>\n\t)\n}\n","import React from 'react';\nimport { TabItem } from '../TabItem';\nimport styles from './sidebar.module.scss';\n\ntype Props = {\n\tactiveTab: string;\n\ttabs: { id: string; icon: string }[];\n\thandleClick: (value: string) => void;\n};\n\nexport const Sidebar: React.FC<Props> = ({ tabs, activeTab, handleClick }) => {\n\treturn (\n\t\t<div className={styles.container}>\n\t\t\t{tabs.map(({ icon, id }) => (\n\t\t\t\t<TabItem icon={icon} isActive={id === activeTab} key={id} value={id} onClick={handleClick} />\n\t\t\t))}\n\t\t</div>\n\t);\n};\n","const BUTTON = 'button'\nconst RESET = 'reset'\nconst SUBMIT = 'submit'\n\nexport const COLOR_THEME = {\n\tBLUE_THEME: 'blue',\n\tRED_THEME: 'red',\n}\n\nexport type ButtonType = typeof BUTTON | typeof RESET | typeof SUBMIT\n","export default __webpack_public_path__ + \"static/media/close.f88f3a6a.svg\";","import React from 'react'\nimport styles from './button.module.scss'\nimport cx from 'classnames'\nimport { COLOR_THEME, ButtonType } from './constants'\nimport closeIcon from './assets/img/close.svg'\n\ntype Props = {\n\ttext: string\n\tactive?: boolean\n\ttype?: ButtonType\n\tdisabled?: boolean\n\tcolorTheme?: string\n\twithBorder?: boolean\n\tdeleteButton?: boolean\n\tonClick: () => void\n\tonDelete?: (e: React.FormEvent) => void\n}\n\nexport const Button: React.FC<Props> = ({\n\ttext,\n\ttype,\n\tactive,\n\tdisabled,\n\tcolorTheme,\n\twithBorder,\n\tdeleteButton,\n\tonClick,\n\tonDelete,\n}) => {\n\treturn (\n\t\t<button\n\t\t\tclassName={cx(styles.button, {\n\t\t\t\t[styles.active]: active,\n\t\t\t\t[styles.disabled]: disabled,\n\t\t\t\t[styles.withBorder]: withBorder,\n\t\t\t\t[styles.redTheme]: colorTheme === COLOR_THEME.RED_THEME,\n\t\t\t\t[styles.blueTheme]: colorTheme === COLOR_THEME.BLUE_THEME,\n\t\t\t})}\n\t\t\tdisabled={disabled}\n\t\t\ttype={type || 'submit'}\n\t\t\tonClick={onClick}\n\t\t>\n\t\t\t{text}\n\t\t\t{deleteButton && (\n\t\t\t\t<div className={styles.delete} onClick={onDelete}>\n\t\t\t\t\t<img src={closeIcon} alt='close icon' />\n\t\t\t\t</div>\n\t\t\t)}\n\t\t</button>\n\t)\n}\n","export default __webpack_public_path__ + \"static/media/close.b731002b.svg\";","export default __webpack_public_path__ + \"static/media/playIcon.737e8ec2.svg\";","import React, { useEffect, useRef, useState } from 'react'\nimport { observer } from 'mobx-react'\nimport ReactPlayer from 'react-player'\nimport cx from 'classnames'\n\nimport store, { Cut } from '../../store'\nimport styles from './CutItem.module.scss'\nimport closeIcon from './assets/img/close.svg'\nimport playerService from '../../services/playerService'\nimport playIcon from './assets/img/playIcon.svg'\n\ninterface Props {\n\tcut: Cut\n\tidx: number\n\tisActive: boolean\n\tisChosenSource: boolean\n\tonClick: (idx: number) => void\n}\n\nconst CutItem: React.FC<Props> = ({ cut, idx, isActive, isChosenSource, onClick }) => {\n\tconst blockRef: React.RefObject<HTMLDivElement> = useRef(null)\n\tconst playerRef = useRef(null)\n\tconst [isVisible, setIsVisible] = useState(false)\n\tconst remove = () => store.removeCut(idx)\n\tconst play = () => playerService.playOne(idx)\n\n\tconst playHandler = () => {\n\t\tconst player = (playerRef.current as any).player.player.player\n\t\tif (player?.playVideo) player.playVideo()\n\t}\n\n\tconst stopHandler = () => {\n\t\tconst player = (playerRef.current as any).player.player.player\n\t\tif (player?.pauseVideo) player.pauseVideo()\n\t}\n\n\tconst onEndHandler = (start: number) => (playerRef.current as any).player.player.player.seekTo(start)\n\n\tuseEffect(() => {\n\t\tconst { current } = blockRef\n\t\tif (current) {\n\t\t\tcurrent.addEventListener('mouseover', () => {\n\t\t\t\tsetIsVisible(true)\n\t\t\t\tplayHandler()\n\t\t\t})\n\t\t\tcurrent.addEventListener('mouseout', () => {\n\t\t\t\tsetIsVisible(false)\n\t\t\t\tstopHandler()\n\t\t\t})\n\t\t}\n\n\t\treturn () => {\n\t\t\tif (current) {\n\t\t\t\tcurrent.removeEventListener('mouseover', () => {\n\t\t\t\t\tplayHandler()\n\t\t\t\t})\n\t\t\t\tcurrent.removeEventListener('mouseout', () => {\n\t\t\t\t\tstopHandler()\n\t\t\t\t})\n\t\t\t}\n\t\t}\n\t}, [blockRef])\n\n\treturn (\n\t\t<div\n\t\t\tclassName={cx(styles.wrapper, {\n\t\t\t\t[styles.isChosenSource]: isChosenSource,\n\t\t\t})}\n\t\t>\n\t\t\t<div className={styles.buttons}>\n\t\t\t\t<div className={styles.checkboxWrapper}>\n\t\t\t\t\t<input\n\t\t\t\t\t\tid={idx.toString()}\n\t\t\t\t\t\ttype='checkbox'\n\t\t\t\t\t\tchecked={isActive}\n\t\t\t\t\t\tclassName={styles.checkbox}\n\t\t\t\t\t\tonChange={() => onClick(idx)}\n\t\t\t\t\t/>\n\t\t\t\t\t<label htmlFor={idx.toString()} />\n\t\t\t\t</div>\n\t\t\t\t<button onClick={remove}>\n\t\t\t\t\t<img src={closeIcon} alt='Close icon' />\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t\t<div className={styles.playerWrapper} ref={blockRef}>\n\t\t\t\t<ReactPlayer\n\t\t\t\t\tkey={`${cut.startTime} ${cut.endTime}`}\n\t\t\t\t\tref={playerRef}\n\t\t\t\t\twidth='100%'\n\t\t\t\t\theight='100%'\n\t\t\t\t\turl={store.cuts[idx].url}\n\t\t\t\t\tmuted\n\t\t\t\t\tcontrols={false}\n\t\t\t\t\tonEnded={() => onEndHandler(cut.startTime)}\n\t\t\t\t\tconfig={{\n\t\t\t\t\t\tyoutube: {\n\t\t\t\t\t\t\tplayerVars: {\n\t\t\t\t\t\t\t\tcontrols: 0,\n\t\t\t\t\t\t\t\tmute: 1,\n\t\t\t\t\t\t\t\tshowinfo: 0,\n\t\t\t\t\t\t\t\tmodestbranding: 1,\n\t\t\t\t\t\t\t\tstart: Math.floor(cut.startTime),\n\t\t\t\t\t\t\t\tend: Math.floor(cut.endTime),\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t\t<button\n\t\t\t\t\tonClick={play}\n\t\t\t\t\tclassName={cx(styles.playButton, {\n\t\t\t\t\t\t[styles.isVisible]: isVisible,\n\t\t\t\t\t})}\n\t\t\t\t>\n\t\t\t\t\t<img src={playIcon} alt='Play icon' />\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t</div>\n\t)\n}\n\nexport default observer(CutItem)\n","export default __webpack_public_path__ + \"static/media/arrow.8371470d.svg\";","import React, { ChangeEvent, useEffect, useRef, WheelEvent } from 'react'\n\nimport { TextField } from '@material-ui/core'\nimport styles from './customTimeInput.module.scss'\nimport cx from 'classnames'\n\nimport { formatTime } from '../../utils/format-time'\nimport arrowIcon from './assets/img/arrow.svg'\n\nexport const POSITION = {\n\tleft: 'left',\n\tright: 'right',\n}\n\nexport type Position = typeof POSITION.left | typeof POSITION.right\n\ninterface Props {\n\tvalue: number\n\tlabel?: string\n\tposition: Position\n\tonChange: (value: number) => void\n}\n\nexport const CustomTimeInput: React.FC<Props> = ({ position, value, onChange }) => {\n\tconst textFieldRef = useRef(null)\n\n\tconst onChangeHandler = (e: ChangeEvent<HTMLInputElement>) => {}\n\n\tconst onWheel = (e: WheelEvent<HTMLElement>): void => {\n\t\te.preventDefault()\n\n\t\tif (e.deltaY > 0) {\n\t\t\tonAdd()\n\t\t} else {\n\t\t\tonRemove()\n\t\t}\n\t}\n\n\tconst onRemove = () => {\n\t\tif (!value) return\n\n\t\tlet newVal = value - 0.1\n\n\t\tif (newVal < 0) newVal = 0\n\n\t\tonChange(newVal)\n\t}\n\n\tconst onAdd = () => {\n\t\tonChange(value + 0.1)\n\t}\n\n\tuseEffect(() => {\n\t\tconst textField = textFieldRef.current\n\n\t\t;(textField as any)?.addEventListener('wheel', onWheel)\n\t\treturn () => (textField as any)?.removeEventListener('wheel', onWheel)\n\t}, [value])\n\n\tconst formattedProps = {\n\t\tvalue: formatTime(value, true),\n\t}\n\n\treturn (\n\t\t<div className={styles.container}>\n\t\t\t<TextField\n\t\t\t\t{...formattedProps}\n\t\t\t\tclassName={styles.timeInput}\n\t\t\t\tsize={'small'}\n\t\t\t\thelperText={null}\n\t\t\t\tvariant='outlined'\n\t\t\t\tonChange={onChangeHandler}\n\t\t\t\tref={textFieldRef}\n\t\t\t\tInputProps={{\n\t\t\t\t\treadOnly: true,\n\t\t\t\t}}\n\t\t\t/>\n\t\t\t<div\n\t\t\t\tclassName={cx(styles.buttons, {\n\t\t\t\t\t[styles.leftPosition]: position === POSITION.left,\n\t\t\t\t\t[styles.rightPosition]: position === POSITION.right,\n\t\t\t\t})}\n\t\t\t>\n\t\t\t\t<div className={styles.buttonsWrapper}>\n\t\t\t\t\t<button onClick={onAdd} className={styles.addButton}>\n\t\t\t\t\t\t<img src={arrowIcon} alt='Arrow icon' />\n\t\t\t\t\t</button>\n\t\t\t\t\t<button onClick={onRemove} className={styles.removeButton}>\n\t\t\t\t\t\t<img src={arrowIcon} alt='Arrow icon' />\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t)\n}\n","import React from 'react'\nimport { observer } from 'mobx-react'\nimport store from '../../store'\nimport styles from './cutPlayer.module.scss'\nimport { CustomTimeInput, POSITION } from '../CustomTimeInput'\nimport { formatTime } from '../../utils/format-time'\n\ntype Props = {\n\tidx: number\n}\n\nconst CutPlayer: React.FC<Props> = ({ idx }) => {\n\tconst cut = store.cuts[idx]?.cut\n\n\tconst setStart = (time: number) => {\n\t\tcut.startTime = time\n\t\tif (cut.endTime < cut.startTime + 1) cut.endTime = cut.startTime + 1\n\n\t\tstore.cuts[idx].cut = {\n\t\t\tstartTime: cut.startTime,\n\t\t\tendTime: cut.endTime,\n\t\t}\n\t}\n\n\tconst setEnd = (time: number) => {\n\t\tcut.endTime = time\n\t\tif (cut.startTime > cut.endTime - 1) cut.startTime = cut.endTime - 1\n\t\tstore.cuts[idx].cut = {\n\t\t\tstartTime: cut.startTime,\n\t\t\tendTime: cut.endTime,\n\t\t}\n\t}\n\treturn (\n\t\t<div className={styles.container}>\n\t\t\t{cut && (\n\t\t\t\t<>\n\t\t\t\t\t<div className={styles.timerBlock}>\n\t\t\t\t\t\t<CustomTimeInput\n\t\t\t\t\t\t\tvalue={cut.startTime}\n\t\t\t\t\t\t\tonChange={(time) => setStart(time)}\n\t\t\t\t\t\t\tposition={POSITION.left}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<p className={styles.separator}>-</p>\n\t\t\t\t\t\t<CustomTimeInput\n\t\t\t\t\t\t\tvalue={cut.endTime}\n\t\t\t\t\t\t\tonChange={(time) => setEnd(time)}\n\t\t\t\t\t\t\tposition={POSITION.right}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className={styles.rightBlock}>\n\t\t\t\t\t\t<div className={styles.timeTotal}>\n\t\t\t\t\t\t\tПродолжительность кусочка: {formatTime(cut.endTime - cut.startTime)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</>\n\t\t\t)}\n\t\t</div>\n\t)\n}\n\nexport default observer(CutPlayer)\n","import React, { useEffect } from 'react'\nimport { observer } from 'mobx-react'\nimport CopyToClipboard from 'react-copy-to-clipboard'\nimport { useState } from 'react'\nimport { Button, Grid, CircularProgress } from '@material-ui/core'\n\nimport store, { Cut } from '../../store'\nimport styles from './CutsPanel.module.scss'\nimport CutItem from '../CutItem'\nimport { formatTime } from '../../utils/format-time'\nimport CutPlayer from '../CutPlayer/CutPlayer'\nimport playerService from '../../services/playerService'\n\nfunction CutsPanel() {\n\tconst [showCopied, setShowCopied] = useState(false)\n\tconst [activeUrl, setActiveUrl] = useState('')\n\n\tconst onClickHandler = async (idx: number) => {\n\t\tif (store.activeCutIndex === idx) {\n\t\t\tstore.activeCutIndex = null\n\t\t\treturn\n\t\t}\n\t\tstore.activeCutIndex = idx\n\t\tstore.currentCutIndex = idx\n\t\tawait playerService.preloadCut(store.activePlayerIndex, idx)\n\t}\n\n\tasync function playAll() {\n\t\tawait playerService.playAll()\n\t}\n\n\tfunction onUrlCopy() {\n\t\tsetShowCopied(true)\n\t\tsetTimeout(() => setShowCopied(false), 3000)\n\t\tgtag('event', 'url-copy', {\n\t\t\turl: store.shareUrl,\n\t\t})\n\t}\n\n\tconst clearStore = () => store.clearStore()\n\n\tuseEffect(() => {\n\t\tconst currentSource = store.sources[store.currentSourceIndex]\n\t\tif (currentSource === undefined) return\n\t\tsetActiveUrl(currentSource.url)\n\t}, [store.currentSourceIndex])\n\n\treturn (\n\t\t<div className={styles.cutsPanel}>\n\t\t\t{store.sources.length > 0 ? (\n\t\t\t\t<>\n\t\t\t\t\t<div className={styles.cutsList}>\n\t\t\t\t\t\t{store.cuts.map((item, idx) => (\n\t\t\t\t\t\t\t<CutItem\n\t\t\t\t\t\t\t\tkey={item.id}\n\t\t\t\t\t\t\t\tidx={idx}\n\t\t\t\t\t\t\t\tcut={item.cut as Cut}\n\t\t\t\t\t\t\t\tisActive={idx === store.activeCutIndex}\n\t\t\t\t\t\t\t\tonClick={onClickHandler}\n\t\t\t\t\t\t\t\tisChosenSource={item.url === activeUrl}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t))}\n\t\t\t\t\t</div>\n\t\t\t\t\t{store.activeCutIndex !== null && <CutPlayer idx={store.activeCutIndex} />}\n\t\t\t\t\t<Grid container className={styles.infoLine} item>\n\t\t\t\t\t\t<Grid item lg>\n\t\t\t\t\t\t\tTrailer duration: {formatTime(store.trailerLength)}\n\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t<Grid item lg>\n\t\t\t\t\t\t\tNumber of frames: {store.cuts.length}\n\t\t\t\t\t\t</Grid>\n\t\t\t\t\t</Grid>\n\t\t\t\t\t<Grid className={styles.bottomBtn}>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tvariant='contained'\n\t\t\t\t\t\t\tdisableElevation\n\t\t\t\t\t\t\tonClick={playAll}\n\t\t\t\t\t\t\tfullWidth\n\t\t\t\t\t\t\tcolor='primary'\n\t\t\t\t\t\t\tdisabled={store.isLoading}\n\t\t\t\t\t\t\tstyle={{ margin: 5 }}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tPlay all\n\t\t\t\t\t\t\t{store.isLoading && <CircularProgress size={20} />}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t<CopyToClipboard text={store.shareUrl || ''} onCopy={onUrlCopy}>\n\t\t\t\t\t\t\t<Button variant='contained' disableElevation fullWidth style={{ margin: 5 }}>\n\t\t\t\t\t\t\t\t{showCopied ? 'Copied' : 'Copy link'}\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</CopyToClipboard>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tonClick={clearStore}\n\t\t\t\t\t\t\tvariant='contained'\n\t\t\t\t\t\t\tdisableElevation\n\t\t\t\t\t\t\tfullWidth\n\t\t\t\t\t\t\tstyle={{ margin: 5 }}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tClear store\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</Grid>\n\t\t\t\t</>\n\t\t\t) : (\n\t\t\t\t<Grid container className={styles.cutsPanelBlank}>\n\t\t\t\t\tPlease select video for trailer editing\n\t\t\t\t</Grid>\n\t\t\t)}\n\t\t</div>\n\t)\n}\n\nexport default observer(CutsPanel)\n","import React, { useState } from 'react'\nimport { observer } from 'mobx-react'\nimport { Grid } from '@material-ui/core'\n\nimport styles from './SourcesPanel.module.scss'\nimport store, { Mode } from '../../store'\nimport { ContentView } from '../ContentView'\nimport { Input } from '../Input'\nimport { COLOR_THEME } from '../Button/constants'\nimport { Button } from '../Button'\nimport CutsPanel from '../CutsPanel'\nimport playerService from '../../services/playerService'\n\nconst SourcesPanel: React.FC = () => {\n\tconst [url, setUrl] = useState('')\n\n\tconst onChangeUrl = (value: string) => setUrl(value)\n\n\tconst addSource = () => {\n\t\tstore.addSource(url)\n\t\tsetUrl('')\n\t}\n\n\tconst changeSource = async (sourceIndex: number) => {\n\t\tawait playerService.changeModeToCreate(sourceIndex)\n\t}\n\n\tconst handleSubmit = (e: React.FormEvent) => {\n\t\te.preventDefault()\n\t\taddSource()\n\t}\n\n\tconst deleteSource = (e: React.FormEvent, sourceIndex: number) => {\n\t\te.stopPropagation()\n\t\tstore.removeSource(sourceIndex)\n\n\t\tif (sourceIndex > 0) {\n\t\t\treturn changeSource(sourceIndex - 1)\n\t\t}\n\n\t\tif (sourceIndex === 0 && store.sources.length) {\n\t\t\treturn changeSource(0)\n\t\t}\n\n\t\treturn\n\t}\n\n\treturn (\n\t\t<ContentView title='All frames'>\n\t\t\t{store.mode !== Mode.Show && (\n\t\t\t\t<Grid container direction='column'>\n\t\t\t\t\t<Grid className={styles.searchLine} item>\n\t\t\t\t\t\t<form onSubmit={handleSubmit} className={styles.form}>\n\t\t\t\t\t\t\t<div className={styles.inputWrapper}>\n\t\t\t\t\t\t\t\t<Input value={url} onChange={onChangeUrl} placeholder='Paste the video link here' />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\ttype='button'\n\t\t\t\t\t\t\t\ttext='Add source'\n\t\t\t\t\t\t\t\tdisabled={url === ''}\n\t\t\t\t\t\t\t\tonClick={addSource}\n\t\t\t\t\t\t\t\tcolorTheme={COLOR_THEME.BLUE_THEME}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</form>\n\t\t\t\t\t</Grid>\n\t\t\t\t\t<Grid item container spacing={2}>\n\t\t\t\t\t\t{store.sources.map((source: any) => (\n\t\t\t\t\t\t\t<Grid key={source.id} item>\n\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\ttext={`Source ${source.index + 1}`}\n\t\t\t\t\t\t\t\t\tonClick={() => changeSource(source.index)}\n\t\t\t\t\t\t\t\t\tonDelete={(e) => deleteSource(e, source.index)}\n\t\t\t\t\t\t\t\t\tdeleteButton\n\t\t\t\t\t\t\t\t\tcolorTheme={COLOR_THEME.BLUE_THEME}\n\t\t\t\t\t\t\t\t\tactive={source.index === store.currentSourceIndex}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t))}\n\t\t\t\t\t</Grid>\n\t\t\t\t</Grid>\n\t\t\t)}\n\t\t\t<CutsPanel />\n\t\t</ContentView>\n\t)\n}\n\nexport default observer(SourcesPanel)\n","import React from 'react';\nimport { ContentView } from '../ContentView';\n\nexport const TextPanel: React.FC = () => {\n\treturn (\n\t\t<ContentView title='Add Text'>\n\t\t\t<div>Блок с текстовым наполнением</div>\n\t\t</ContentView>\n\t);\n};\n","export default __webpack_public_path__ + \"static/media/frames.7fe1096a.svg\";","export default __webpack_public_path__ + \"static/media/audio.18d70808.svg\";","export default __webpack_public_path__ + \"static/media/gif.cd91ed47.svg\";","export default __webpack_public_path__ + \"static/media/text.0504dd60.svg\";","export default __webpack_public_path__ + \"static/media/images.c3d542ed.svg\";","export default __webpack_public_path__ + \"static/media/sticker.689907e4.svg\";","export default __webpack_public_path__ + \"static/media/transitions.876ac694.svg\";","import frameIcon from './assets/img/frames.svg';\nimport audioIcon from './assets/img/audio.svg';\nimport gifIcon from './assets/img/gif.svg';\nimport textIcon from './assets/img/text.svg';\nimport imageIcon from './assets/img/images.svg';\nimport stickerIcon from './assets/img/sticker.svg';\nimport transitionIcon from './assets/img/transitions.svg';\n\nexport const FRAMES_TAB = 'frames';\nexport const TRANSITION_TAB = 'transition';\nexport const TEXT_TAB = 'text';\nexport const GIFS_TAB = 'gifs';\nexport const IMAGE_TAB = 'image';\nexport const STICKER_TAB = 'sticker';\nexport const AUDIO_TAB = 'audio';\n\nexport type Tabs =\n\t| typeof FRAMES_TAB\n\t| typeof TRANSITION_TAB\n\t| typeof TEXT_TAB\n\t| typeof GIFS_TAB\n\t| typeof IMAGE_TAB\n\t| typeof STICKER_TAB\n\t| typeof AUDIO_TAB;\n\nexport const tabs = [\n\t{\n\t\tid: FRAMES_TAB,\n\t\ticon: frameIcon,\n\t},\n\t{\n\t\tid: TRANSITION_TAB,\n\t\ticon: transitionIcon,\n\t},\n\t{\n\t\tid: TEXT_TAB,\n\t\ticon: textIcon,\n\t},\n\t{\n\t\tid: GIFS_TAB,\n\t\ticon: gifIcon,\n\t},\n\t{\n\t\tid: IMAGE_TAB,\n\t\ticon: imageIcon,\n\t},\n\t{\n\t\tid: STICKER_TAB,\n\t\ticon: stickerIcon,\n\t},\n\t{\n\t\tid: AUDIO_TAB,\n\t\ticon: audioIcon,\n\t},\n];\n","import React from 'react';\nimport { ContentView } from '../ContentView';\n\nexport const TransitionPanel: React.FC = () => {\n\treturn (\n\t\t<ContentView title='Add Transitions'>\n\t\t\t<div>Блок с переходами</div>\n\t\t</ContentView>\n\t);\n};\n","import React from 'react';\nimport { ContentView } from '../ContentView';\n\nexport const ImagePanel: React.FC = () => {\n\treturn (\n\t\t<ContentView title='Add Images'>\n\t\t\t<div>Блок с картинками</div>\n\t\t</ContentView>\n\t);\n};\n","import React from 'react';\nimport { ContentView } from '../ContentView';\n\nexport const StickerPanel: React.FC = () => {\n\treturn (\n\t\t<ContentView title='Add Stickers'>\n\t\t\t<div>Блок со стикерами</div>\n\t\t</ContentView>\n\t);\n};\n","import React, { useState } from 'react';\nimport { AudioPanel } from '../AudioPanel';\nimport GifsPanel from '../GifsPanel';\nimport { Sidebar } from '../Sidebar';\nimport SourcesPanel from '../SourcePanel';\nimport { TextPanel } from '../TextPanel';\nimport { tabs, FRAMES_TAB, GIFS_TAB, TEXT_TAB, AUDIO_TAB, IMAGE_TAB, STICKER_TAB, TRANSITION_TAB } from './constants';\nimport styles from './contentBlock.module.scss';\nimport store from '../../store';\nimport { TransitionPanel } from '../TransitionPanel';\nimport { ImagePanel } from '../ImagePanel';\nimport { StickerPanel } from '../StickerPanel';\n\nconst COMPONENT_MAP: Record<string, React.ReactNode> = {\n\t[FRAMES_TAB]: <SourcesPanel />,\n\t[GIFS_TAB]: <GifsPanel />,\n\t[TEXT_TAB]: <TextPanel />,\n\t[AUDIO_TAB]: <AudioPanel />,\n\t[TRANSITION_TAB]: <TransitionPanel />,\n\t[IMAGE_TAB]: <ImagePanel />,\n\t[STICKER_TAB]: <StickerPanel />,\n};\n\nexport const ContentBLock: React.FC = () => {\n\tconst [activeTab, setActiveTab] = useState(FRAMES_TAB);\n\n\tconst handleClick = (id: string) => {\n\t\tsetActiveTab(id);\n\t\tstore.isEnableCanvas = id !== FRAMES_TAB;\n\t};\n\n\treturn (\n\t\t<div className={styles.container}>\n\t\t\t<Sidebar tabs={tabs} handleClick={handleClick} activeTab={activeTab} />\n\t\t\t<div className={styles.content}>{COMPONENT_MAP[activeTab]}</div>\n\t\t</div>\n\t);\n};\n","import React from 'react';\nimport DateFnsAdapter from '@material-ui/pickers/adapter/date-fns';\nimport { LocalizationProvider } from '@material-ui/pickers';\nimport { observer } from 'mobx-react';\n\nimport PlayerPanel from './components/PlayerPanel/PlayerPanel';\nimport styles from './App.module.scss';\nimport store, { Mode } from './store';\nimport { ContentBLock } from './components/ContentBlock';\n\nfunction App() {\n\treturn (\n\t\t<>\n\t\t\t<LocalizationProvider dateAdapter={DateFnsAdapter}>\n\t\t\t\t<div className={styles.container}>\n\t\t\t\t\t<div className={styles.wrapper}>\n\t\t\t\t\t\t{store.mode !== Mode.Show && <ContentBLock />}\n\t\t\t\t\t\t<div className={styles.playerPanel}>\n\t\t\t\t\t\t\t<PlayerPanel />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</LocalizationProvider>\n\t\t</>\n\t);\n}\n\nexport default observer(App);\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\nimport * as serviceWorker from './serviceWorker'\nimport { trunk } from './store'\n\ntrunk.init().then(() => {\n\tReactDOM.render(\n\t\t<React.StrictMode>\n\t\t\t<App />\n\t\t</React.StrictMode>,\n\t\tdocument.getElementById('root')\n\t)\n})\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister()\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"CutItem_wrapper__5cXzz\",\"playerWrapper\":\"CutItem_playerWrapper__2L7gi\",\"video\":\"CutItem_video__dXSLs\",\"buttons\":\"CutItem_buttons__3RjEe\",\"checkbox\":\"CutItem_checkbox__b5vN1\",\"playButton\":\"CutItem_playButton__3vTkv\",\"isVisible\":\"CutItem_isVisible__nFhaf\",\"isChosenSource\":\"CutItem_isChosenSource__2IT89\",\"checkboxWrapper\":\"CutItem_checkboxWrapper__1DS0U\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"customTimeInput_container__2GIEl\",\"timeInput\":\"customTimeInput_timeInput__1SCjy\",\"buttons\":\"customTimeInput_buttons__31Ika\",\"buttonsWrapper\":\"customTimeInput_buttonsWrapper__2Iy5j\",\"removeButton\":\"customTimeInput_removeButton__AC7w7\",\"leftPosition\":\"customTimeInput_leftPosition__2app5\",\"rightPosition\":\"customTimeInput_rightPosition__3hhMG\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"PlayerPanel_container__TOvcu\",\"header\":\"PlayerPanel_header__3w0XV\",\"timeRow\":\"PlayerPanel_timeRow__2x_ng\",\"buttons\":\"PlayerPanel_buttons__2YgAS\",\"playerWrapper\":\"PlayerPanel_playerWrapper__16uXZ\",\"previewButtons\":\"PlayerPanel_previewButtons__1uA4C\",\"loadIcon\":\"PlayerPanel_loadIcon__3J9Eg\",\"recButton\":\"PlayerPanel_recButton__3TYfL\",\"recButtonAnimation\":\"PlayerPanel_recButtonAnimation__2UQQt\",\"active\":\"PlayerPanel_active__2NmJa\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"button\":\"button_button__rhxVg\",\"withBorder\":\"button_withBorder__37cWq\",\"disabled\":\"button_disabled__yLx7B\",\"blueTheme\":\"button_blueTheme__XD1wz\",\"active\":\"button_active__1B6fc\",\"delete\":\"button_delete__2eXQr\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"cutsPanel\":\"CutsPanel_cutsPanel__2UoMA\",\"cutsPanelBlank\":\"CutsPanel_cutsPanelBlank__bj4au\",\"timeInput\":\"CutsPanel_timeInput__cesid\",\"input\":\"CutsPanel_input__2WjGi\",\"stepBtn\":\"CutsPanel_stepBtn__30nMj\",\"infoLine\":\"CutsPanel_infoLine__1Tkkh\",\"loadIcon\":\"CutsPanel_loadIcon__1Iegz\",\"bottomBtn\":\"CutsPanel_bottomBtn__-K_Jc\",\"cutsList\":\"CutsPanel_cutsList__atkIJ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"cutPlayer_container__-EGWc\",\"timerBlock\":\"cutPlayer_timerBlock__221Xt\",\"separator\":\"cutPlayer_separator__3aYik\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"input_container__23uXm\",\"input\":\"input_input__2NaO-\",\"buttonsBlock\":\"input_buttonsBlock__20Mow\",\"clearButton\":\"input_clearButton__3f2P7\",\"copyButton\":\"input_copyButton__30Jkc\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"tabItem\":\"tabItem_tabItem__1OnFe\",\"active\":\"tabItem_active__2Ilqp\",\"icon\":\"tabItem_icon__14Ix2\",\"activeIcon\":\"tabItem_activeIcon__2Giao\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"playerPanel\":\"App_playerPanel__3bV36\",\"editingPanel\":\"App_editingPanel__28fsw\",\"container\":\"App_container__eSJ6i\",\"wrapper\":\"App_wrapper__RCHjb\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"searchLine\":\"SourcesPanel_searchLine__3ao3G\",\"form\":\"SourcesPanel_form__2e3-e\",\"inputWrapper\":\"SourcesPanel_inputWrapper__3hJ6C\"};"],"sourceRoot":""}