(this.webpackJsonpeyemo=this.webpackJsonpeyemo||[]).push([[0],{111:function(e,t,n){e.exports={searchLine:"SourcesPanel_searchLine__1DdM7",form:"SourcesPanel_form__1o_MA",inputWrapper:"SourcesPanel_inputWrapper__2NF9J"}},112:function(e,t,n){e.exports={container:"cutPlayer_container__27ck7",timerBlock:"cutPlayer_timerBlock__1UOpt",separator:"cutPlayer_separator__IWouv"}},113:function(e,t,n){e.exports={container:"SignMenu_container__3ZSSz",modalContainer:"SignMenu_modalContainer__3fC5D",alert:"SignMenu_alert__3GTBy"}},127:function(e,t,n){e.exports={player:"MultiPlayer_player__3BLbd",playerPlaceholder:"MultiPlayer_playerPlaceholder__duL1K"}},128:function(e,t,n){e.exports={container:"contentView_container__HlNrD",title:"contentView_title__13t0d"}},129:function(e,t,n){e.exports={root:"GiphyPanel_root__2Hx9n",searchLine:"GiphyPanel_searchLine__69zTm",gifsPanel:"GiphyPanel_gifsPanel__2OqQn"}},131:function(e,t,n){e.exports={container:"contentBlock_container__1pOST",content:"contentBlock_content__1xBTD"}},176:function(e,t,n){e.exports={container:"CanvasLayer_container__3HORa"}},178:function(e,t,n){e.exports={container:"GifMenu_container__20wqN"}},186:function(e,t,n){e.exports={gif:"CutGifsList_gif__1zFY4"}},189:function(e,t,n){e.exports={container:"sidebar_container__1TYtp"}},191:function(e,t,n){e.exports={container:"buttons_container__1V1HG",bottomBtn:"buttons_bottomBtn__1y9Qe"}},192:function(e,t,n){e.exports={container:"actionButton_container__2hhmm"}},194:function(e,t,n){e.exports={item:"userItem_item__1-Mkf"}},37:function(e,t,n){e.exports={container:"timeLineItem_container__3URas",videoWrapper:"timeLineItem_videoWrapper__16zwv",isActive:"timeLineItem_isActive__1264C",player:"timeLineItem_player__2j9aU",actionBlock:"timeLineItem_actionBlock__3dUfx",listWrapper:"timeLineItem_listWrapper__QJSKu",list:"timeLineItem_list__179vP",listItem:"timeLineItem_listItem__1qMDx",block:"timeLineItem_block__1ktRl",blockContent:"timeLineItem_blockContent__1XsnG",topButtons:"timeLineItem_topButtons__1o7_R",buttomButtons:"timeLineItem_buttomButtons__YqEYn"}},376:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),i=n(21),c=n.n(i),o=n(198),s=n(415),u=n(14),l=n(412),d=n(10),b=n(42),p=n(45),h=n(200),f=n(199),j=n(377),m=n(413),v=n(27),O=n.n(v),x=n(95),g=n.n(x);function y(e){return e<10?"0".concat(e):e}function _(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e)return"00:00:00.0";var n=Math.floor(e/60/60),r=Math.floor(e/60%60),a=Math.floor(e%60),i=Math.floor(10*(e-Math.floor(e))),c="".concat(y(n),":").concat(y(r),":").concat(y(a));return t&&(c="".concat(c,".").concat(i)),c}var I,w,C,S=n(74),k=n.n(S),T=n(73),P=n(176),A=n.n(P),E=n(6),N=(n(252),n(49)),B=n(24),G=n(17),L=(n(142),n(3)),R=n(143),D=n(36),M=n(177),U=n.n(M),z=n(8),F=n.n(z),W=n(19);!function(e){e.EditorStore="eyeMoEditorStore",e.UserStore="eyeMoUserStore"}(I||(I={})),function(e){e.Create="create",e.PlayOne="playOne",e.PlayAll="playAll",e.Show="show"}(w||(w={})),function(e){e.GOOGLE="google"}(C||(C={}));var V,H,J,Y,q,K,Q,X,Z,$,ee,te,ne,re,ae,ie,ce,oe,se=new(function(){function e(){Object(b.a)(this,e),this.control=[]}return Object(p.a)(e,[{key:"setPlayer",value:function(e,t){this.control[e]=t}},{key:"getActivePlayerPosition",value:function(){return 0===this.control.length?0:this.control[Ie.activePlayerIndex].player.getCurrentTime()}},{key:"stop",value:function(){var e=Object(W.a)(F.a.mark((function e(t){return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Ie.playing[t]){e.next=2;break}return e.abrupt("return");case 2:return Ie.playing[t]=!1,e.next=5,Object(L.t)((function(){return!Ie.players[t].playing}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"start",value:function(){var e=Object(W.a)(F.a.mark((function e(t){return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Ie.playing[t]){e.next=2;break}return e.abrupt("return");case 2:return Ie.playing[t]=!0,e.next=5,Object(L.t)((function(){return Ie.players[t].playing}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"playOne",value:function(){var e=Object(W.a)(F.a.mark((function e(t){return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ie.mode=w.PlayOne,e.next=3,this.stop(Ie.activePlayerIndex);case 3:return Ie.currentCutIndex=t,e.next=6,this.preloadCut(Ie.activePlayerIndex,t);case 6:return e.next=8,this.start(Ie.activePlayerIndex);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"playAll",value:function(){var e=Object(W.a)(F.a.mark((function e(t){return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Ie.isLoading=!0,0!==Ie.cuts.length){e.next=5;break}return e.next=4,this.start(Ie.activePlayerIndex);case 4:return e.abrupt("return");case 5:return t||(Ie.mode=w.PlayAll),e.next=8,this.setDefaultPlayersState();case 8:return e.next=10,this.start(Ie.activePlayerIndex);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"changeModeToCreate",value:function(){var e=Object(W.a)(F.a.mark((function e(t){var n;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Ie.mode=w.Create,Ie.currentSourceIndex=t,Ie.currentCutIndex=-1,n=0;case 4:if(!(n<Ie.players.length)){e.next=11;break}return e.next=7,this.stop(n);case 7:n===Ie.activePlayerIndex&&(Ie.players[n]=Object(E.a)(Object(E.a)({},Ie.players[n]),{},{url:Ie.sources[t].url,playing:!1}));case 8:n+=1,e.next=4;break;case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"changeModeToShow",value:function(){var e=Object(W.a)(F.a.mark((function e(){return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ie.mode=w.Show,e.next=3,this.playAll(!0);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"preloadCut",value:function(){var e=Object(W.a)(F.a.mark((function e(t,n){return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ie.players[t]=Object(E.a)(Object(E.a)({},Ie.players[t]),{},{url:Ie.cuts[n].url,cutIndex:n}),Ie.players[t].preloading=!0,Ie.players[t].muted=!0,e.next=5,this.start(t);case 5:return e.next=7,this.stop(t);case 7:this.control[t].player.getInternalPlayer().seekTo(Ie.cuts[n].cut.startTime,!0),Ie.players[t].muted=!1,Ie.players[t].preloading=!1;case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"quickMoveToPosition",value:function(e){var t=Ie.activePlayerIndex;this.control[t].player.getInternalPlayer().seekTo(e,!0)}},{key:"setDefaultPlayersState",value:function(){var e=Object(W.a)(F.a.mark((function e(){var t;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=0;case 1:if(!(t<Ie.players.length)){e.next=14;break}return e.next=4,this.stop(t);case 4:if(!(t<Ie.cuts.length)){e.next=10;break}return Ie.players[t].isVisible=0===t,e.next=8,this.preloadCut(t,t);case 8:e.next=11;break;case 10:Ie.players[t]={id:Ie.players[t].id,muted:!1,url:"",playing:!1,preloading:!1,cutIndex:t,isVisible:!1};case 11:t+=1,e.next=1;break;case 14:Ie.activePlayerIndex=0,Ie.currentCutIndex=0;case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"goToNextCut",value:function(){var e=Object(W.a)(F.a.mark((function e(t){var n,r,a;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Ie.currentCutIndex===Ie.cuts.length-1,Ie.isShowTransition=!n,e.next=4,this.stop(t);case 4:if(!n){e.next=7;break}return console.log("Last cut is end"),e.abrupt("return");case 7:return r=Ie.currentCutIndex+Ie.players.length,a=r<Ie.cuts.length,console.log("Go from ".concat(Ie.currentCutIndex," to ").concat(Ie.nextCutIndex," cut")),Ie.activePlayerIndex=Ie.nextPlayerIndex,Ie.currentCutIndex=Ie.nextCutIndex,e.next=14,this.start(Ie.activePlayerIndex);case 14:if(Ie.players[t].isVisible=!1,Ie.players[Ie.activePlayerIndex].isVisible=!0,setTimeout((function(){return Ie.isShowTransition=!1}),400),a){e.next=19;break}return e.abrupt("return");case 19:return e.next=21,this.preloadCut(t,r);case 21:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getTimePosition",value:function(){var e=this.control[Ie.activePlayerIndex].player.getCurrentTime();if(Ie.currentCutIndex<0)return e;for(var t=0,n=0;n<Ie.cuts.length&&!(n>Ie.currentCutIndex);n+=1){var r=Ie.cuts[n].cut.startTime,a=Ie.cuts[n].cut.endTime;n===Ie.currentCutIndex?t+=e-r:t+=a-r}return t}}]),e}()),ue=new(function(){function e(){Object(b.a)(this,e),this.customGif=null}return Object(p.a)(e,[{key:"getCutTime",value:function(e){var t={startTime:0,endTime:0},n=this.getGifIndexById(e);if(null!==n){var r=Ie.gifs[n].cutId;Ie.cuts.map((function(e){e.id===r&&(t=e.cut)}))}return t}},{key:"setGifTime",value:function(e,t){var n=this.getGifIndexById(e);null!==n&&(Ie.gifs[n].startShowTime=t[0],Ie.gifs[n].endShowTime=t[1])}},{key:"getGifIndexById",value:function(e){var t=null;return Ie.gifs.map((function(n){n.id===e&&(t=n.index)})),t}},{key:"getGifTime",value:function(e){var t=[0,0],n=this.getGifIndexById(e);return null!==n&&(t=[Ie.gifs[n].startShowTime,Ie.gifs[n].endShowTime]),t}},{key:"isShowGif",value:function(e){if(void 0===Ie.cuts[Ie.currentCutIndex]||e.cutId!==Ie.cuts[Ie.currentCutIndex].id)return!1;var t=se.getActivePlayerPosition();return t>=e.startShowTime&&t<=e.endShowTime}},{key:"checkShowGifs",value:function(e){if(Ie)for(var t=0;t<Ie.gifs.length;t+=1){var n,r,a=Ie.gifs[t];if(void 0!==Ie.cuts[Ie.currentCutIndex]){var i=a.id===(null===(n=this.customGif)||void 0===n?void 0:n.id)?this.customGif.startShowTime:a.startShowTime,c=a.id===(null===(r=this.customGif)||void 0===r?void 0:r.id)?this.customGif.endShowTime:a.endShowTime;a.cutId===Ie.cuts[Ie.currentCutIndex].id&&a.cutId===Ie.cuts[Ie.currentCutIndex].id&&e>=i&&e<c?(Ie.gifs[t].isShow||console.log("Show gif on position: "+e),Ie.gifs[t].isShow=!0):(Ie.gifs[t].isShow&&console.log("Hide gif on position: "+e),Ie.gifs[t].isShow=!1)}else Ie.gifs[t].isShow=!1}}},{key:"deleteGif",value:function(e){Ie.gifs=Ie.gifs.filter((function(t){return t.id!==e}))}},{key:"setCustomGifData",value:function(e){this.customGif=e}},{key:"getGifListForCut",value:function(e){var t=Ie.cuts[e].id;return Ie.gifs.filter((function(e){return e.cutId===t}))}}]),e}());Object(L.i)({enforceActions:"never"});var le=U()(window.location.href,!0),de=null,be=null,pe=null;if(le.query.cuts){localStorage.removeItem(I.EditorStore),window.history.pushState(null,"","/");var he=decodeURIComponent(le.query.cuts);de=he.split(",").map((function(e){var t=e.split("::");return{id:t[0],index:parseFloat(t[1]),url:t[2],cut:{startTime:parseFloat(t[3]),endTime:parseFloat(t[4])}}}))}if(le.query.sources){var fe=decodeURIComponent(le.query.sources);be=fe.split(",").map((function(e){var t=e.split("::");return{id:t[0],index:parseFloat(t[1]),url:t[2]}}))}if(le.query.gifs){var je=decodeURIComponent(le.query.gifs);pe=je.split(",").map((function(e){var t=e.split("::");return{canvasHeight:parseFloat(t[0]),canvasWidth:parseFloat(t[1]),cutId:t[2],endShowTime:parseFloat(t[3]),height:parseFloat(t[4]),id:t[5],index:parseFloat(t[6]),isShow:!1,src:t[7],startShowTime:parseFloat(t[8]),width:parseFloat(t[9]),x:parseFloat(t[10]),y:parseFloat(t[11])}}))}var me,ve,Oe,xe,ge,ye=be&&be.length>0,_e=new(V=function(){function e(){var t=this;Object(b.a)(this,e),Object(B.a)(this,"sources",H,this),Object(B.a)(this,"mode",J,this),Object(B.a)(this,"cuts",Y,this),Object(B.a)(this,"gifs",q,this),Object(B.a)(this,"players",K,this),Object(B.a)(this,"playing",Q,this),Object(B.a)(this,"activePlayerIndex",X,this),Object(B.a)(this,"currentCutIndex",Z,this),Object(B.a)(this,"activeCutIndex",$,this),Object(B.a)(this,"currentSourceIndex",ee,this),Object(B.a)(this,"selectedGifId",te,this),Object(B.a)(this,"isEnableCanvas",ne,this),Object(B.a)(this,"canvasSize",re,this),Object(B.a)(this,"isLoading",ae,this),Object(B.a)(this,"isShowTransition",ie,this),Object(B.a)(this,"isConnectedChat",ce,this),Object(B.a)(this,"isEnableMic",oe,this),Object(L.o)(this),Object(L.g)((function(){return console.log("--\x3e In ".concat(t.mode.toUpperCase()," mode"))})),Object(L.g)((function(){t.isEnableCanvas||(t.selectedGifId=null)})),Object(L.g)((function(){-1===t.currentCutIndex&&ue.checkShowGifs(0)}))}return Object(p.a)(e,[{key:"shareUrl",get:function(){if(0===this.sources.length)return null;var e=window.location.href.split("?")[0];return"".concat(e,"?sources=").concat(encodeURIComponent(this.sources.map((function(e){return[e.id,e.index,e.url].join("::")})).join(",")),"&cuts=").concat(encodeURIComponent(this.cuts.map((function(e){var t,n;return[e.id,e.index,e.url,null===(t=e.cut)||void 0===t?void 0:t.startTime,null===(n=e.cut)||void 0===n?void 0:n.endTime].join("::")})).join(",")),"&gifs=").concat(encodeURIComponent(this.gifs.map((function(e){return[e.canvasHeight,e.canvasWidth,e.cutId,e.endShowTime,e.height,e.id,e.index,e.src,e.startShowTime,e.width,e.x,e.y].join("::")})).join(",")))}},{key:"trailerLength",get:function(){return this.cuts.reduce((function(e,t,n){return t.cut?e+t.cut.endTime-t.cut.startTime:e}),0)}},{key:"nextPlayerIndex",get:function(){return this.activePlayerIndex===this.players.length-1?0:this.activePlayerIndex+1}},{key:"nextCutIndex",get:function(){return this.currentCutIndex===this.cuts.length-1?0:this.currentCutIndex+1}},{key:"addCut",value:function(e){this.cuts.push({id:Object(R.a)(),index:this.cuts.length,url:this.sources[this.currentSourceIndex].url,cut:{startTime:Math.round(1e3*e.startTime)/1e3,endTime:Math.round(1e3*e.endTime)/1e3}})}},{key:"addSource",value:function(e){this.sources=[].concat(Object(N.a)(this.sources),[{id:Object(R.a)(),index:this.sources.length,url:e}]),se.changeModeToCreate(this.sources.length-1)}},{key:"addGif",value:function(e,t){var n=this.cuts[t];this.gifs=[].concat(Object(N.a)(this.gifs),[{id:Object(R.a)(),index:this.gifs.length,src:e.images.original.url,x:0,y:0,height:.2*this.canvasSize.height,width:e.images.original.width*this.canvasSize.height*.2/e.images.original.height,canvasHeight:this.canvasSize.height,canvasWidth:this.canvasSize.width,startShowTime:n.cut.startTime,endShowTime:n.cut.endTime,cutId:n.id,isShow:!0}])}},{key:"scaleGifs",value:function(){for(var e=0;e<this.gifs.length;e+=1){var t=this.gifs[e],n=t.height,r=t.width,a=t.canvasWidth,i=t.canvasHeight,c=t.x,o=t.y,s=this.canvasSize.width/a,u=this.canvasSize.height/i;this.gifs[e]=Object(E.a)(Object(E.a)({},this.gifs[e]),{},{height:n*u,width:r*s,x:c*s,y:o*u,canvasWidth:this.canvasSize.width,canvasHeight:this.canvasSize.height})}}},{key:"removeCut",value:function(e){(!this.players[this.activePlayerIndex].playing||e!==this.currentCutIndex&&e!==this.nextCutIndex)&&(e!==this.currentCutIndex?this.cuts=this.cuts.filter((function(t){return t.index!==e})).map((function(e,t){return e.index=t,e})):se.changeModeToCreate(0))}},{key:"removeSource",value:function(e){this.sources=this.sources.filter((function(t){return t.index!==e})).map((function(e,t){return e.index=t,e}))}},{key:"clearStore",value:function(){var e=this;this.sources=[],this.mode=w.Create,this.cuts=[],this.gifs=[],this.players=[0,1,2,3].map((function(t,n){return{id:n,playing:!1,preloading:!1,muted:!1,url:e.sources[0]?e.sources[0].url:"",isVisible:0===n}})),this.activePlayerIndex=0,this.currentCutIndex=-1,this.activeCutIndex=null,this.currentSourceIndex=-1,this.selectedGifId=null}}]),e}(),H=Object(G.a)(V.prototype,"sources",[L.p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return be||[]}}),J=Object(G.a)(V.prototype,"mode",[L.p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return ye?w.Show:w.Create}}),Y=Object(G.a)(V.prototype,"cuts",[L.p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return de||[]}}),q=Object(G.a)(V.prototype,"gifs",[L.p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return pe||[]}}),K=Object(G.a)(V.prototype,"players",[L.p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return[0,1,2,3].map((function(t,n){return{id:n,playing:!1,preloading:!1,muted:!1,url:e.sources[0]?e.sources[0].url:"",isVisible:0===n}}))}}),Q=Object(G.a)(V.prototype,"playing",[D.b,L.p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.players.map((function(e){return!1}))}}),X=Object(G.a)(V.prototype,"activePlayerIndex",[L.p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Z=Object(G.a)(V.prototype,"currentCutIndex",[D.b,L.p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.cuts.length>0?0:-1}}),$=Object(G.a)(V.prototype,"activeCutIndex",[D.b,L.p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ee=Object(G.a)(V.prototype,"currentSourceIndex",[L.p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.sources.length>0?0:-1}}),te=Object(G.a)(V.prototype,"selectedGifId",[D.b,L.p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ne=Object(G.a)(V.prototype,"isEnableCanvas",[D.b,L.p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),re=Object(G.a)(V.prototype,"canvasSize",[D.b,L.p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{height:0,width:0}}}),ae=Object(G.a)(V.prototype,"isLoading",[D.b,L.p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),ie=Object(G.a)(V.prototype,"isShowTransition",[D.b,L.p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),ce=Object(G.a)(V.prototype,"isConnectedChat",[D.b,L.p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),oe=Object(G.a)(V.prototype,"isEnableMic",[D.b,L.p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Object(G.a)(V.prototype,"shareUrl",[L.h],Object.getOwnPropertyDescriptor(V.prototype,"shareUrl"),V.prototype),Object(G.a)(V.prototype,"trailerLength",[L.h],Object.getOwnPropertyDescriptor(V.prototype,"trailerLength"),V.prototype),Object(G.a)(V.prototype,"nextPlayerIndex",[L.h],Object.getOwnPropertyDescriptor(V.prototype,"nextPlayerIndex"),V.prototype),Object(G.a)(V.prototype,"nextCutIndex",[L.h],Object.getOwnPropertyDescriptor(V.prototype,"nextCutIndex"),V.prototype),Object(G.a)(V.prototype,"addCut",[L.f],Object.getOwnPropertyDescriptor(V.prototype,"addCut"),V.prototype),Object(G.a)(V.prototype,"addSource",[L.f],Object.getOwnPropertyDescriptor(V.prototype,"addSource"),V.prototype),Object(G.a)(V.prototype,"addGif",[L.f],Object.getOwnPropertyDescriptor(V.prototype,"addGif"),V.prototype),Object(G.a)(V.prototype,"scaleGifs",[L.f],Object.getOwnPropertyDescriptor(V.prototype,"scaleGifs"),V.prototype),Object(G.a)(V.prototype,"removeCut",[L.f],Object.getOwnPropertyDescriptor(V.prototype,"removeCut"),V.prototype),Object(G.a)(V.prototype,"removeSource",[L.f],Object.getOwnPropertyDescriptor(V.prototype,"removeSource"),V.prototype),Object(G.a)(V.prototype,"clearStore",[L.f],Object.getOwnPropertyDescriptor(V.prototype,"clearStore"),V.prototype),V),Ie=_e;new D.a(_e,{storageKey:I.EditorStore,storage:localStorage}).init();var we=new(me=function e(){Object(b.a)(this,e),Object(B.a)(this,"user",ve,this),Object(B.a)(this,"tokens",Oe,this),Object(B.a)(this,"googleToken",xe,this),Object(B.a)(this,"isShowUserProfile",ge,this),Object(L.o)(this)},ve=Object(G.a)(me.prototype,"user",[L.p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Oe=Object(G.a)(me.prototype,"tokens",[L.p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),xe=Object(G.a)(me.prototype,"googleToken",[L.p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ge=Object(G.a)(me.prototype,"isShowUserProfile",[L.p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),me),Ce=we;new D.a(we,{storageKey:I.UserStore,storage:localStorage}).init();var Se=Object(r.createContext)({editorStore:Ie,userStore:Ce}),ke=function(){return Object(r.useContext)(Se)},Te=n(1),Pe=Object(u.a)((function(e){var t=e.gif,n=e.isSelected,r=e.isShow,i=e.onChange,c=e.onSelect,o=a.a.useRef(null),s=a.a.useRef(),u=(ke().editorStore,a.a.useMemo((function(){return document.createElement("canvas")}),[]));a.a.useEffect((function(){var e;return window.gifler(t.src).get((function(t){(e=t).animateInCanvas(u),e.onDrawFrame=function(e,t){e.drawImage(t.buffer,t.x,t.y),o.current&&o.current.getLayer().draw()}})),function(){return e.stop()}}),[t.src,u]),a.a.useEffect((function(){n&&s.current&&(s.current.nodes([o.current]),s.current.getLayer().batchDraw())}),[n]);return Object(Te.jsxs)(Te.Fragment,{children:[r&&Object(Te.jsx)(T.a,{ref:o,image:u,x:t.x,y:t.y,width:t.width,height:t.height,draggable:!0,onClick:c,onTap:c,onDragEnd:function(e){i(Object(E.a)(Object(E.a)({},t),{},{x:e.target.x(),y:e.target.y()}))},onTransformEnd:function(e){var n=o.current,r=n.scaleX(),a=n.scaleY();n.scaleX(1),n.scaleY(1),i(Object(E.a)(Object(E.a)({},t),{},{x:n.x(),y:n.y(),width:Math.max(5,n.width()*r),height:Math.max(n.height()*a)}))}}),r&&n&&Object(Te.jsx)(T.d,{ref:s,boundBoxFunc:function(e,t){return t.width<5||t.height<5?e:t}})]})})),Ae=Object(u.a)((function(){var e=ke().editorStore,t=function(t){t.target===t.target.getStage()&&(e.selectedGifId=null)},n=function(t){e.selectedGifId=t},r=function(t,n){return e.gifs[t]=n};return Object(Te.jsx)("div",{children:Object(Te.jsx)(T.c,{className:A.a.container,width:e.canvasSize.width,height:e.canvasSize.height,style:e.isEnableCanvas?{pointerEvents:"all"}:{pointerEvents:"none"},onMouseDown:t,onTouchStart:t,children:Object(Te.jsx)(T.b,{children:e.gifs.map((function(t,a){return Object(Te.jsx)(Pe,{gif:t,isSelected:t.id===e.selectedGifId,isShow:t.isShow,onSelect:n.bind(null,t.id),onChange:r.bind(null,t.index)},t.id)}))})})})})),Ee=n(69),Ne=n.n(Ee),Be=n(127),Ge=n.n(Be);var Le,Re,De=Object(u.a)((function(e){var t=ke().editorStore,n=e.updatePosition,r=function(e,t){console.log("Player ".concat(e," onReady")),se.setPlayer(e,{player:t})},a=function(){var e=Object(W.a)(F.a.mark((function e(r,a){var i,c;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ue.checkShowGifs(a.playedSeconds),r===t.activePlayerIndex&&!t.players[r].preloading&&t.players[r].playing){e.next=4;break}return console.log("Player ".concat(r," onProgress stopped")),e.abrupt("return");case 4:if(t.isLoading&&(t.isLoading=!1),n(se.getTimePosition()),void 0!==(i=t.players[r].cutIndex)&&-1!==t.currentCutIndex){e.next=10;break}return console.log("Player ".concat(r," onProgress No cut index in player")),e.abrupt("return");case 10:c=t.cuts[i].cut,console.log("Player ".concat(r," onProgress in ").concat(a.playedSeconds," sec (s: ").concat(null===c||void 0===c?void 0:c.startTime," e: ").concat(null===c||void 0===c?void 0:c.endTime)),e.t0=t.mode,e.next=e.t0===w.Create?15:e.t0===w.PlayOne?16:e.t0===w.PlayAll?21:e.t0===w.Show?26:31;break;case 15:return e.abrupt("break",31);case 16:if(!b(c,a.playedSeconds)){e.next=18;break}return e.abrupt("return");case 18:return e.next=20,se.stop(r);case 20:return e.abrupt("break",31);case 21:if(!b(c,a.playedSeconds)){e.next=23;break}return e.abrupt("return");case 23:return e.next=25,se.goToNextCut(r);case 25:return e.abrupt("break",31);case 26:if(!b(c,a.playedSeconds)){e.next=28;break}return e.abrupt("return");case 28:return e.next=30,se.goToNextCut(r);case 30:return e.abrupt("break",31);case 31:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),i=function(e){console.log("Player ".concat(e," onBuffer"))},c=function(e){console.log("Player ".concat(e," onBufferEnd"))},o=function(e){console.log("Player ".concat(e," onStart"))},s=function(e){console.log("Player ".concat(e," onPlay")),t.playing[e]||(t.playing[e]=!0),t.players[e].playing=!0},u=function(e){console.log("Player ".concat(e," onPause")),t.playing[e]&&(t.playing[e]=!1),t.players[e].playing=!1},l=function(e){console.log("Player ".concat(e," onEnded"))},d=function(e,t){console.log("Player ".concat(e," onSeek"))},b=function(e,t){return!!e&&(t>=e.startTime&&t<=e.endTime)};return Object(Te.jsx)("div",{children:t.sources.length>0?t.players.map((function(e,n,b){var p=b.length-1-n;return Object(Te.jsx)("div",{style:{visibility:t.players[p].isVisible?"visible":"hidden"},children:Object(Te.jsx)(Ne.a,{playing:t.playing[p],className:Ge.a.player,url:t.players[p].url,muted:t.players[p].muted,width:"100%",height:"100%",onPlay:s.bind(null,p),onProgress:a.bind(null,p),onStart:o.bind(null,p),onPause:u.bind(null,p),onEnded:l.bind(null,p),onReady:r.bind(null,p),onSeek:d.bind(null,p),onBufferEnd:c.bind(null,p),onBuffer:i.bind(null,p),progressInterval:100,controls:!0,config:{youtube:{playerVars:{}}}})},t.players[p].id)})):Object(Te.jsx)("div",{className:Ge.a.playerPlaceholder})})})),Me=n(18),Ue=n(419),ze=n(410),Fe=n(411),We=n(185),Ve=n.n(We),He=n(183),Je=n.n(He),Ye=n(184),qe=n.n(Ye),Ke=n(178),Qe=n.n(Ke),Xe=Object(u.a)((function(e){var t=ke().editorStore,n=Object(r.useState)([0,0]),a=Object(Me.a)(n,2),i=a[0],c=a[1];Object(r.useEffect)((function(){ue.setCustomGifData(null),null!==t.selectedGifId&&c(ue.getGifTime(t.selectedGifId))}),[t.selectedGifId]);var o=function(){var e=Object(W.a)(F.a.mark((function e(){return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,se.playOne(t.currentCutIndex);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(Te.jsx)(Te.Fragment,{children:t.selectedGifId&&Object(Te.jsxs)("div",{className:Qe.a.container,children:[Object(Te.jsx)(Ue.a,{value:i,onChange:function(e,n){null!==t.selectedGifId&&(ue.setCustomGifData({id:t.selectedGifId,startShowTime:n[0],endShowTime:n[1]}),c(n))},valueLabelDisplay:"auto","aria-labelledby":"range-slider",max:ue.getCutTime(t.selectedGifId).endTime,min:ue.getCutTime(t.selectedGifId).startTime,step:.01}),Object(Te.jsxs)(ze.a,{size:"small","aria-label":"small outlined button group",children:[Object(Te.jsx)(Fe.a,{"aria-label":"play",color:"primary",onClick:o,children:Object(Te.jsx)(Je.a,{})}),Object(Te.jsx)(Fe.a,{"aria-label":"thumbUp",color:"primary",onClick:function(){null!==t.selectedGifId&&ue.setGifTime(t.selectedGifId,i)},children:Object(Te.jsx)(qe.a,{})}),Object(Te.jsx)(Fe.a,{"aria-label":"delete",color:"primary",onClick:function(){null!==t.selectedGifId&&(ue.deleteGif(t.selectedGifId),t.selectedGifId=null)},children:Object(Te.jsx)(Ve.a,{})})]})]})})})),Ze=n(186),$e=n.n(Ze),et=Object(u.a)((function(e){var t=ke().editorStore,n=function(e){se.quickMoveToPosition(e)},r=null!==t.activeCutIndex?ue.getGifListForCut(t.activeCutIndex):[];return Object(Te.jsx)("div",{children:null!==t.activeCutIndex&&r.length>0?r.map((function(e){return Object(Te.jsx)("img",{src:e.src,alt:"gif_"+e.index,className:$e.a.gif,onClick:n.bind(null,e.startShowTime)})})):null})})),tt=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(e){var r;return Object(b.a)(this,n),(r=t.call(this,e)).state=void 0,r.canvasRef=void 0,r.play=function(){var e=r.state.cut;e&&(Ie.players[Ie.activePlayerIndex].playing=!1,se.control[Ie.activePlayerIndex].player.seekTo(e.startTime),setTimeout((function(){se.start(Ie.activePlayerIndex);var e=setInterval((function(){var t=r.state.cut;if(t){var n=se.control[Ie.activePlayerIndex].player,a=n?n.getCurrentTime():0;a>=(null===t||void 0===t?void 0:t.startTime)&&a<=(null===t||void 0===t?void 0:t.endTime)||(clearInterval(e),se.stop(Ie.activePlayerIndex))}}),100)}),1e3))},r.onAddCut=function(){var e=r.state.cut;e&&e.endTime-e.startTime!==0&&(Ie.addCut(e),r.setState({startTime:0,endTime:0}))},r.updatePosition=function(e){r.setState({position:e})},r.onStartFrame=function(){var e=r.state,t=e.position,n=e.cut,a={startTime:(null===n||void 0===n?void 0:n.startTime)||0,endTime:(null===n||void 0===n?void 0:n.endTime)||0};a.startTime=t,a.endTime<t&&(a.endTime=t+5),r.setState({cut:a})},r.onEndFrame=function(){var e=r.state,t=e.position,n=e.cut,a={startTime:(null===n||void 0===n?void 0:n.startTime)||0,endTime:(null===n||void 0===n?void 0:n.endTime)||0};a.endTime=t,a.startTime>t&&(a.startTime=t-5),r.setState({cut:a},(function(){return r.onAddCut()}))},r.onResizePlayerWrapper=function(e){var t=e.width,n=e.height;Ie.canvasSize={width:t,height:n},Ie.scaleGifs()},r.onMouseDownHandler=function(){r.setState({record:!0}),r.onStartFrame()},r.onMouseUpHandler=function(){r.setState({record:!1}),r.onEndFrame()},r.state={cut:null,playing:!1,position:0,record:!1},r.canvasRef=a.a.createRef(),r}return Object(p.a)(n,[{key:"componentDidMount",value:function(){this.canvasRef.current&&(Ie.canvasSize={width:this.canvasRef.current.offsetWidth,height:this.canvasRef.current.offsetHeight})}},{key:"render",value:function(){var e=this.state,t=e.position,n=e.record;return Object(Te.jsxs)("div",{className:k.a.container,children:[Object(Te.jsxs)("div",{style:{fontSize:"10px"},children:["Player: ",Ie.activePlayerIndex,"/",Ie.players.length-1," Cut:"," ",Ie.currentCutIndex,"/",Ie.cuts.length-1," Source: ",Ie.currentSourceIndex,"/",Ie.sources.length-1]}),Object(Te.jsxs)(l.a,{ref:this.canvasRef,className:O()("padded",k.a.playerWrapper),children:[Object(Te.jsx)(De,{updatePosition:this.updatePosition}),Object(Te.jsx)(Ae,{}),Object(Te.jsx)(g.a,{onResize:this.onResizePlayerWrapper}),Object(Te.jsx)("div",{style:{position:"absolute",top:0,left:0,backgroundColor:"black",color:"white",width:"100%",height:"100%",visibility:Ie.isShowTransition?"visible":"hidden"}})]}),Ie.mode!==w.Show&&Ie.sources.length>0?Object(Te.jsxs)(Te.Fragment,{children:[Object(Te.jsx)(l.a,{justify:"center",container:!0,children:_(t,!0)}),Object(Te.jsx)(et,{}),Object(Te.jsx)(Xe,{}),Object(Te.jsx)(l.a,{container:!0,children:Object(Te.jsx)("button",{className:O()(k.a.recButton,Object(d.a)({},k.a.active,n)),onMouseDown:this.onMouseDownHandler,onMouseUp:this.onMouseUpHandler,children:n?"stop rec":"start rec"})})]}):Object(Te.jsx)(Te.Fragment,{children:Object(Te.jsxs)(l.a,{className:k.a.previewButtons,container:!0,children:[Object(Te.jsxs)(j.a,{variant:"contained",size:"large",color:"primary",disableElevation:!0,disabled:Ie.isLoading,onClick:function(){return se.changeModeToShow()},children:["Play trailer",Ie.isLoading&&Object(Te.jsx)(m.a,{size:20})]}),Object(Te.jsx)(j.a,{variant:"contained",color:"primary",disableElevation:!0,onClick:function(){return se.changeModeToCreate(0)},children:"Make your own trailer"})]})})]})}}]),n}(a.a.Component),nt=Object(u.a)(tt),rt=n(85),at=n.n(rt),it=n(128),ct=n.n(it),ot=function(e){var t=e.title,n=e.children;return Object(Te.jsxs)("div",{className:ct.a.container,children:[Object(Te.jsx)("h2",{className:ct.a.title,children:t}),n]})},st=function(){return Object(Te.jsx)(ot,{title:"Add Music",children:Object(Te.jsx)("div",{children:"\u0411\u043b\u043e\u043a \u0441 \u0430\u0443\u0434\u0438\u043e-\u043a\u043e\u043d\u0442\u0435\u043d\u0442\u043e\u043c"})})},ut=n(187),lt=n(188),dt=n(129),bt=n.n(dt),pt=n(86),ht=n.n(pt),ft=n.p+"static/media/closeIcon.0b48234f.svg",jt=function(e){var t=e.value,n=e.placeholder,r=e.onChange;return Object(Te.jsxs)("div",{className:ht.a.container,children:[Object(Te.jsx)("input",{onChange:function(e){return r(e.target.value)},value:t,placeholder:n,className:ht.a.input}),t&&Object(Te.jsx)("div",{className:ht.a.buttonsBlock,children:Object(Te.jsx)("button",{type:"button",className:ht.a.clearButton,onClick:function(){return r("")},children:Object(Te.jsx)("img",{src:ft,alt:"Close icon"})})})]})},mt=new lt.GiphyFetch("IPKlChsULe1Qlt19wbrWHlnjDr04SZa8");!function(e){e.Trending="trending",e.Search="search"}(Le||(Le={})),function(e){e.Gifs="gifs",e.Stickers="stickers",e.Text="text"}(Re||(Re={}));var vt=function(e){var t=e.width,n=e.searchText,r=e.fetchType,a=e.type,i=ke().editorStore;return Object(Te.jsx)(ut.Grid,{fetchGifs:function(e){return r===Le.Search?mt.search(n,{offset:e,limit:10,type:a}):r===Le.Trending?mt.trending({offset:e,limit:10,type:a}):mt.trending({offset:e,limit:10})},width:t,columns:4,gutter:6,onGifClick:function(e,t){t.preventDefault(),null!==i.activeCutIndex?i.addGif(e,i.activeCutIndex):alert("\u0422\u044b \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043b \u043a\u0443\u0441\u043e\u0447\u0435\u043a!")}})},Ot=Object(u.a)((function(e){var t=e.type,n=a.a.createRef(),i=Object(r.useState)(null),c=Object(Me.a)(i,2),o=c[0],s=c[1],u=Object(r.useState)(""),l=Object(Me.a)(u,2),d=l[0],b=l[1],p=Object(r.useState)(!0),h=Object(Me.a)(p,2),f=h[0],j=h[1];return Object(r.useEffect)((function(){n&&s(n.current.offsetWidth)}),[n]),Object(r.useEffect)((function(){var e=setTimeout((function(){j(!0)}),1e3);return function(){return clearTimeout(e)}}),[d]),Object(Te.jsxs)("div",{ref:n,className:bt.a.root,children:[Object(Te.jsx)(jt,{placeholder:"Search with GIPHY",value:d,onChange:function(e){j(!1),b(e)}}),o&&Object(Te.jsxs)("div",{className:bt.a.gifsPanel,children:[f&&""===d&&Object(Te.jsx)(vt,{width:o,searchText:d,fetchType:Le.Trending,type:t}),f&&""!==d&&Object(Te.jsx)(vt,{width:o,searchText:d,fetchType:Le.Search,type:t}),Object(Te.jsx)(g.a,{onResize:function(e){e.width}})]})]})})),xt=Object(u.a)((function(e){var t=e.type;return Object(Te.jsx)(ot,{title:"Add Gif",children:Object(Te.jsx)(Ot,{type:t})})})),gt=n(87),yt=n.n(gt),_t=function(e){var t=e.value,n=e.isActive,r=e.icon,a=e.onClick;return Object(Te.jsx)("div",{onClick:function(){return a(t)},className:O()(yt.a.tabItem,Object(d.a)({},yt.a.active,n)),children:Object(Te.jsx)("img",{src:r,className:O()(yt.a.icon,Object(d.a)({},yt.a.activeIcon,n)),alt:"Source icon"})})},It=n(189),wt=n.n(It),Ct=function(e){var t=e.tabs,n=e.activeTab,r=e.handleClick;return Object(Te.jsx)("div",{className:wt.a.container,children:t.map((function(e){var t=e.icon,a=e.id;return Object(Te.jsx)(_t,{icon:t,isActive:a===n,value:a,onClick:r},a)}))})},St=n(111),kt=n.n(St),Tt="blue",Pt="red",At="lightBlue",Et=n(50),Nt=n.n(Et),Bt=n.p+"static/media/close.f88f3a6a.svg",Gt=function(e){var t,n=e.text,r=e.type,a=e.active,i=e.disabled,c=e.colorTheme,o=e.withBorder,s=e.deleteButton,u=e.onClick,l=e.onDelete;return Object(Te.jsxs)("button",{className:O()(Nt.a.button,(t={},Object(d.a)(t,Nt.a.active,a),Object(d.a)(t,Nt.a.disabled,i),Object(d.a)(t,Nt.a.withBorder,o),Object(d.a)(t,Nt.a.redTheme,c===Pt),Object(d.a)(t,Nt.a.blueTheme,c===Tt),Object(d.a)(t,Nt.a.lightBlueTheme,c===At),t)),disabled:i,type:r||"submit",onClick:u,children:[n,s&&Object(Te.jsx)("div",{className:Nt.a.delete,onClick:l,children:Object(Te.jsx)("img",{src:Bt,alt:"close icon"})})]})},Lt=n(72),Rt=n(88),Dt=n.n(Rt),Mt=n(65),Ut=n.n(Mt),zt=n.p+"static/media/close.b731002b.svg",Ft=n.p+"static/media/playIcon.737e8ec2.svg",Wt=Object(u.a)((function(e){var t=e.cut,n=e.idx,a=(e.isActive,e.isChosenSource),i=e.onClick,c=ke().editorStore,o=Object(r.useRef)(null),s=Object(r.useRef)(null),u=Object(r.useState)(!1),l=Object(Me.a)(u,2),b=l[0],p=l[1],h=function(){var e=s.current.player.player.player;(null===e||void 0===e?void 0:e.playVideo)&&e.playVideo()},f=function(){var e=s.current.player.player.player;(null===e||void 0===e?void 0:e.pauseVideo)&&e.pauseVideo()};return Object(r.useEffect)((function(){var e=o.current;return e&&(e.addEventListener("mouseover",(function(){p(!0),h()})),e.addEventListener("mouseout",(function(){p(!1),f()}))),function(){e&&(e.removeEventListener("mouseover",(function(){h()})),e.removeEventListener("mouseout",(function(){f()})))}}),[o]),Object(Te.jsxs)("div",{className:O()(Ut.a.wrapper,Object(d.a)({},Ut.a.isChosenSource,a)),children:[Object(Te.jsx)("div",{className:Ut.a.buttons,children:Object(Te.jsx)("button",{onClick:function(){return c.removeCut(n)},children:Object(Te.jsx)("img",{src:zt,alt:"Close icon"})})}),Object(Te.jsxs)("div",{className:Ut.a.playerWrapper,ref:o,children:[Object(Te.jsx)(Ne.a,{ref:s,width:"100%",height:"100%",url:c.cuts[n].url,muted:!0,controls:!1,onEnded:function(){return e=t.startTime,s.current.player.player.player.seekTo(e);var e},config:{youtube:{playerVars:{controls:0,mute:1,showinfo:0,modestbranding:1,start:Math.floor(t.startTime),end:Math.floor(t.endTime)}}}},"".concat(t.startTime," ").concat(t.endTime)),Object(Te.jsx)("button",{onClick:function(){se.playOne(n),i(n)},className:O()(Ut.a.playButton,Object(d.a)({},Ut.a.isVisible,b)),children:Object(Te.jsx)("img",{src:Ft,alt:"Play icon"})})]})]})})),Vt=n(190),Ht=n.n(Vt),Jt=n(191),Yt=n.n(Jt),qt=Object(u.a)((function(){var e=Object(r.useState)(!1),t=Object(Me.a)(e,2),n=t[0],a=t[1],i=ke().editorStore;return Object(Te.jsxs)("div",{className:Yt.a.container,children:[Object(Te.jsx)("div",{style:{marginRight:"10px"},children:Object(Te.jsx)(Ht.a,{text:i.shareUrl||"",onCopy:function(){a(!0),setTimeout((function(){return a(!1)}),3e3),gtag("event","url-copy",{url:i.shareUrl})},children:Object(Te.jsx)(Gt,{text:n?"Copied":"Copy link",colorTheme:Tt})})}),Object(Te.jsx)(Gt,{text:"Clear store",onClick:function(){return i.clearStore()},colorTheme:Tt})]})})),Kt=n(76),Qt=n.n(Kt),Xt=n(37),Zt=n.n(Xt),$t=n.p+"static/media/actionIcon.e6f6af32.svg",en=n.p+"static/media/duplicate.9ce441d6.svg",tn=n.p+"static/media/edit.7081d9c8.svg",nn=n.p+"static/media/delete.0b5bed2b.svg",rn=n(192),an=n.n(rn),cn=function(e){var t=e.text,n=e.image,r=e.onClick;return Object(Te.jsxs)("button",{className:an.a.container,onClick:r,children:[t&&Object(Te.jsx)("p",{children:t}),Object(Te.jsx)("img",{src:n,alt:"image"})]})},on=[{text:"Add Text"},{text:"Add Gif"},{text:"Add Sticker"},{text:"Add Image"}],sn=function(e){var t=e.cut,n=e.deleteCut,a=Object(r.useState)(!1),i=Object(Me.a)(a,2),c=i[0],o=i[1],s=Object(r.useState)(!1),u=Object(Me.a)(s,2),l=u[0],b=u[1],p=Object(r.useRef)(null);return function(e,t,n,a,i){Object(r.useEffect)((function(){var t=e.current;return t&&(t.addEventListener("mouseenter",(function(){a(!0)})),t.addEventListener("mouseleave",(function(){a(!1),i(!1)}))),function(){t&&(t.removeEventListener("mouseenter",(function(){a(!1),i(!1)})),t.removeEventListener("mouseleave",(function(){a(!1),i(!1)})))}}),[e,t,n])}(p,l,c,b,o),Object(Te.jsxs)("div",{className:Zt.a.container,ref:p,children:[Object(Te.jsxs)("div",{className:O()(Zt.a.actionBlock,Object(d.a)({},Zt.a.isActive,l)),onClick:function(){return o(!c)},children:[Object(Te.jsx)("img",{src:$t,alt:"Action icon"}),c&&Object(Te.jsx)("div",{className:Zt.a.listWrapper,children:Object(Te.jsx)("ul",{className:Zt.a.list,children:on.map((function(e){var t=e.text;return Object(Te.jsx)("li",{className:Zt.a.listItem,children:Object(Te.jsx)("button",{onClick:function(e){return e.stopPropagation()},children:t})})}))})})]}),Object(Te.jsxs)("div",{className:O()(Zt.a.videoWrapper,Object(d.a)({},Zt.a.isActive,l)),children:[Object(Te.jsx)("div",{className:Zt.a.block,children:Object(Te.jsxs)("div",{className:Zt.a.blockContent,children:[Object(Te.jsx)("div",{className:Zt.a.topButtons,children:Object(Te.jsx)(cn,{image:nn,onClick:function(e){e.stopPropagation(),n(t.id)}})}),Object(Te.jsxs)("div",{className:Zt.a.buttomButtons,children:[Object(Te.jsx)(cn,{text:"Duplicate",image:en}),Object(Te.jsx)(cn,{text:"Edit",image:tn})]})]})}),Object(Te.jsx)("div",{className:Zt.a.player,children:Object(Te.jsx)(Ne.a,{width:"100%",height:"100%",url:t.url,muted:!0,controls:!1,config:{youtube:{playerVars:{controls:0,mute:1,showinfo:0,modestbranding:1}}}},t.id)})]})]})},un=n.p+"static/media/play.a44af37e.svg",ln=function(e){var t=e.droppableId,n=e.cutIds,a=e.isShowDuration,i=e.deleteCut,c=ke().editorStore,o=Object(r.useState)([]),s=Object(Me.a)(o,2),u=s[0],l=s[1];Object(r.useEffect)((function(){var e=n.reduce((function(e,t,n){var r=t,a=t.split("-"),i=a.slice(0,a.length-1).join("-"),o=c.cuts.find((function(e){return e.id===i}));return o?[Object(E.a)(Object(E.a)({},Object(L.r)(o)),{},{realId:i,id:r})].concat(Object(N.a)(e)):e}),[]);l(e)}),[n]);var b=u.reduce((function(e,t,n){return t.cut?e+t.cut.endTime-t.cut.startTime:e}),0),p=function(e){i(e)};return Object(Te.jsxs)("div",{className:O()(Qt.a.container,Object(d.a)({},Qt.a.isShowDuration,a)),children:[Object(Te.jsxs)("div",{className:Qt.a.playInfo,children:[Object(Te.jsx)("button",{className:Qt.a.playButton,onClick:function(){se.playAll()},children:Object(Te.jsx)("img",{src:un,alt:"Play icon"})}),Object(Te.jsx)("p",{children:_(b)})]}),Object(Te.jsx)(Lt.c,{droppableId:t,children:function(e){return Object(Te.jsx)("div",Object(E.a)(Object(E.a)({className:Qt.a.wrapper},e.droppableProps),{},{ref:e.innerRef,children:u.map((function(e){return Object(Te.jsx)(sn,{cut:e,deleteCut:p},e.id)}))}))}})]})},dn=n(112),bn=n.n(dn),pn=n(416),hn=n(51),fn=n.n(hn),jn=n.p+"static/media/arrow.8371470d.svg",mn="left",vn="right",On=function(e){var t,n=e.position,a=e.value,i=e.onChange,c=Object(r.useRef)(null),o=function(e){e.preventDefault(),e.deltaY>0?u():s()},s=function(){if(a){var e=a-.1;e<0&&(e=0),i(e)}},u=function(){i(a+.1)};Object(r.useEffect)((function(){var e=c.current;return null===e||void 0===e||e.addEventListener("wheel",o),function(){return null===e||void 0===e?void 0:e.removeEventListener("wheel",o)}}),[a]);var l={value:_(a,!0)};return Object(Te.jsxs)("div",{className:fn.a.container,children:[Object(Te.jsx)(pn.a,Object(E.a)(Object(E.a)({},l),{},{className:fn.a.timeInput,size:"small",helperText:null,variant:"outlined",onChange:function(e){},ref:c,InputProps:{readOnly:!0}})),Object(Te.jsx)("div",{className:O()(fn.a.buttons,(t={},Object(d.a)(t,fn.a.leftPosition,n===mn),Object(d.a)(t,fn.a.rightPosition,n===vn),t)),children:Object(Te.jsxs)("div",{className:fn.a.buttonsWrapper,children:[Object(Te.jsx)("button",{onClick:u,className:fn.a.addButton,children:Object(Te.jsx)("img",{src:jn,alt:"Arrow icon"})}),Object(Te.jsx)("button",{onClick:s,className:fn.a.removeButton,children:Object(Te.jsx)("img",{src:jn,alt:"Arrow icon"})})]})})]})},xn=Object(u.a)((function(e){var t,n=e.idx,r=ke().editorStore,a=null===(t=r.cuts[n])||void 0===t?void 0:t.cut;return Object(Te.jsx)("div",{className:bn.a.container,children:a&&Object(Te.jsx)(Te.Fragment,{children:Object(Te.jsxs)("div",{className:bn.a.timerBlock,children:[Object(Te.jsx)(On,{value:a.startTime,onChange:function(e){return function(e){a.startTime=e,a.endTime<a.startTime+1&&(a.endTime=a.startTime+1),r.cuts[n].cut={startTime:a.startTime,endTime:a.endTime}}(e)},position:mn}),Object(Te.jsx)("p",{className:bn.a.separator,children:"-"}),Object(Te.jsx)(On,{value:a.endTime,onChange:function(e){return function(e){a.endTime=e,a.startTime>a.endTime-1&&(a.startTime=a.endTime-1),r.cuts[n].cut={startTime:a.startTime,endTime:a.endTime}}(e)},position:vn})]})})})})),gn={cuts:{},columns:{"column-1":{id:"column-1",title:"Cuts",cutIds:[]},"column-2":{id:"column-2",title:"PlayList",cutIds:[]}},columnOrder:["column-1","column-2"]};var yn,_n=Object(u.a)((function(){var e=ke().editorStore,t=Object(r.useState)(!0),n=Object(Me.a)(t,2),a=n[0],i=n[1],c=Object(r.useState)([]),o=Object(Me.a)(c,2),s=o[0],u=o[1],b=Object(r.useState)(gn),p=Object(Me.a)(b,2),h=p[0],f=p[1],j=Object(r.useState)(""),m=Object(Me.a)(j,2),v=m[0],O=m[1];Object(r.useEffect)((function(){var t=e.cuts.reduce((function(e,t){return Object(E.a)(Object(E.a)({},e),{},Object(d.a)({},t.index,t))}),{}),n={cuts:t,columns:{"column-1":Object(E.a)(Object(E.a)({},h.columns["column-1"]),{},{cutIds:Object.keys(t)}),"column-2":Object(E.a)({},h.columns["column-2"])},columnOrder:["column-1","column-2"]};f(n),a?(i(!1),x()):g()}),[e.cuts.length]);var x=function(){var t=e.cuts.map((function(e){return"".concat(e.id,"-").concat(+new Date)}));f(Object(E.a)(Object(E.a)({},h),{},{columns:Object(E.a)(Object(E.a)({},h.columns),{},{"column-2":Object(E.a)(Object(E.a)({},h.columns["column-2"]),{},{cutIds:t})})}))},g=function(){var t=e.cuts.map((function(e){return e.id})),n=t[t.length-1];if(n&&!s.includes(n)){var r="".concat(n,"-").concat(+new Date);f(Object(E.a)(Object(E.a)({},h),{},{columns:Object(E.a)(Object(E.a)({},h.columns),{},{"column-2":Object(E.a)(Object(E.a)({},h.columns["column-2"]),{},{cutIds:[r].concat(Object(N.a)(h.columns["column-2"].cutIds))})})}))}u(t)},y=function(){var t=Object(W.a)(F.a.mark((function t(n){return F.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.activeCutIndex!==n){t.next=2;break}return t.abrupt("return");case 2:return e.activeCutIndex=n,e.currentCutIndex=n,t.next=6,se.preloadCut(e.activePlayerIndex,n);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(r.useEffect)((function(){var t=e.sources[e.currentSourceIndex];void 0!==t&&O(t.url)}),[e.currentSourceIndex]),e.activeCutIndex,Object(Te.jsx)(Lt.a,{onDragEnd:function(e){var t,n=e.destination,r=e.source,a=e.draggableId;if(n&&(n.droppableId!==r.droppableId||n.index!==r.index)){var i=h.columns[r.droppableId],c=h.columns[n.droppableId];if(i!==c){var o=Array.from(i.cutIds);o.splice(r.index,1);var s=Object(E.a)(Object(E.a)({},i),{},{cutIds:o}),u=Array.from(c.cutIds);u.splice(n.index,0,"".concat(a,"-").concat(+new Date));var l=Object(E.a)(Object(E.a)({},c),{},{cutIds:u}),b=Object(E.a)(Object(E.a)({},h),{},{columns:Object(E.a)(Object(E.a)({},h.columns),{},(t={},Object(d.a)(t,s.id,s),Object(d.a)(t,l.id,l),t))});f(b)}else{var p=Array.from(i.cutIds);p.splice(r.index,1),p.splice(n.index,0,a);var j=Object(E.a)(Object(E.a)({},i),{},{cutIds:p}),m=Object(E.a)(Object(E.a)({},h),{},{columns:Object(E.a)(Object(E.a)({},h.columns),{},Object(d.a)({},j.id,j))});f(m)}}},children:Object(Te.jsx)("div",{className:Dt.a.cutsPanel,children:e.sources.length>0?Object(Te.jsxs)(Te.Fragment,{children:[Object(Te.jsx)(Lt.c,{droppableId:h.columns["column-1"].id,children:function(t){return Object(Te.jsx)("div",Object(E.a)(Object(E.a)({className:Dt.a.cutsList},t.droppableProps),{},{ref:t.innerRef,children:e.cuts.map((function(t,n){return Object(Te.jsx)(Lt.b,{draggableId:t.id.toString(),index:n,children:function(r){return Object(Te.jsx)("div",Object(E.a)(Object(E.a)(Object(E.a)({},r.draggableProps),r.dragHandleProps),{},{ref:r.innerRef,children:Object(Te.jsx)(Wt,{idx:n,cut:t.cut,isActive:n===e.activeCutIndex,onClick:y,isChosenSource:t.url===v},t.id)}))}},t.id)}))}))}}),null!==e.activeCutIndex&&Object(Te.jsx)(xn,{idx:e.activeCutIndex}),Object(Te.jsxs)("div",{className:Dt.a.bottomPanel,children:[Object(Te.jsx)(ln,{droppableId:h.columns["column-2"].id,cutIds:h.columns["column-2"].cutIds,deleteCut:function(e){var t=Object(E.a)(Object(E.a)({},h),{},{columns:Object(E.a)(Object(E.a)({},h.columns),{},Object(d.a)({},"column-2",Object(E.a)(Object(E.a)({},h.columns["column-2"]),{},{cutIds:h.columns["column-2"].cutIds.filter((function(t){return t!==e}))})))});f(t)},isShowDuration:null!==e.activeCutIndex}),Object(Te.jsx)(qt,{})]})]}):Object(Te.jsx)(l.a,{container:!0,className:Dt.a.cutsPanelBlank,children:"Please select video for trailer editing"})})})})),In=Object(u.a)((function(){var e=ke().editorStore,t=Object(r.useState)(""),n=Object(Me.a)(t,2),a=n[0],i=n[1],c=function(){e.addSource(a),i("")},o=function(){var e=Object(W.a)(F.a.mark((function e(t){return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,se.changeModeToCreate(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(Te.jsxs)(ot,{title:"All frames",children:[e.mode!==w.Show&&Object(Te.jsxs)(l.a,{container:!0,direction:"column",children:[Object(Te.jsx)(l.a,{className:kt.a.searchLine,item:!0,children:Object(Te.jsxs)("form",{onSubmit:function(e){e.preventDefault(),c()},className:kt.a.form,children:[Object(Te.jsx)("div",{className:kt.a.inputWrapper,children:Object(Te.jsx)(jt,{value:a,onChange:function(e){return i(e)},placeholder:"Paste the video link here"})}),Object(Te.jsx)(Gt,{type:"button",text:"Add source",disabled:""===a,onClick:c,colorTheme:Tt})]})}),Object(Te.jsx)(l.a,{item:!0,container:!0,spacing:2,children:e.sources.map((function(t){return Object(Te.jsx)(l.a,{item:!0,children:Object(Te.jsx)(Gt,{text:"Source ".concat(t.index+1),onClick:function(){return o(t.index)},onDelete:function(n){return function(t,n){return t.stopPropagation(),e.removeSource(n),n>0?o(n-1):0===n&&e.sources.length?o(0):void 0}(n,t.index)},deleteButton:!0,colorTheme:At,active:t.index===e.currentSourceIndex})},t.id)}))})]}),Object(Te.jsx)(_n,{})]})})),wn=function(e){var t=e.type;return Object(Te.jsx)(ot,{title:"Add Text",children:Object(Te.jsx)(Ot,{type:t})})},Cn=n.p+"static/media/frames.7fe1096a.svg",Sn=n.p+"static/media/audio.18d70808.svg",kn=n.p+"static/media/gif.cd91ed47.svg",Tn=n.p+"static/media/text.0504dd60.svg",Pn=n.p+"static/media/images.c3d542ed.svg",An=n.p+"static/media/sticker.689907e4.svg",En=n.p+"static/media/transitions.876ac694.svg",Nn="frames",Bn="transition",Gn="text",Ln="gifs",Rn="image",Dn="sticker",Mn="audio",Un=[{id:Nn,icon:Cn},{id:Bn,icon:En},{id:Gn,icon:Tn},{id:Ln,icon:kn},{id:Rn,icon:Pn},{id:Dn,icon:An},{id:Mn,icon:Sn}],zn=n(131),Fn=n.n(zn),Wn=function(){return Object(Te.jsx)(ot,{title:"Add Transitions",children:Object(Te.jsx)("div",{children:"\u0411\u043b\u043e\u043a \u0441 \u043f\u0435\u0440\u0435\u0445\u043e\u0434\u0430\u043c\u0438"})})},Vn=function(){return Object(Te.jsx)(ot,{title:"Add Images",children:Object(Te.jsx)("div",{children:"\u0411\u043b\u043e\u043a \u0441 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0430\u043c\u0438"})})},Hn=function(e){var t=e.type;return Object(Te.jsx)(ot,{title:"Add Stickers",children:Object(Te.jsx)(Ot,{type:t})})},Jn=(yn={},Object(d.a)(yn,Nn,Object(Te.jsx)(In,{})),Object(d.a)(yn,Ln,Object(Te.jsx)(xt,{type:Re.Gifs})),Object(d.a)(yn,Gn,Object(Te.jsx)(wn,{type:Re.Text})),Object(d.a)(yn,Mn,Object(Te.jsx)(st,{})),Object(d.a)(yn,Bn,Object(Te.jsx)(Wn,{})),Object(d.a)(yn,Rn,Object(Te.jsx)(Vn,{})),Object(d.a)(yn,Dn,Object(Te.jsx)(Hn,{type:Re.Stickers})),yn),Yn=function(){var e=ke().editorStore,t=Object(r.useState)(Nn),n=Object(Me.a)(t,2),a=n[0],i=n[1];return Object(Te.jsxs)("div",{className:Fn.a.container,children:[Object(Te.jsx)(Ct,{tabs:Un,handleClick:function(t){i(t),e.isEnableCanvas=t!==Nn},activeTab:a}),Object(Te.jsx)("div",{className:Fn.a.content,children:Jn[a]})]})},qn=n(89),Kn=n.n(qn),Qn={isDev:!1,agora:{appId:"df4bc258854f4cb293dc97a3ab0fc123",appToken:"006df4bc258854f4cb293dc97a3ab0fc123IAA1mPM18LwuOkyuSGrb+11IvJFdcEWsOe8cJD1DX3uSEHiLwJYAAAAAEAAEa9nru4JIYAEAAQC7gkhg"},google:{clientId:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_AGORA_APP_ID:"df4bc258854f4cb293dc97a3ab0fc123",REACT_APP_AGORA_APP_TOKEN:"006df4bc258854f4cb293dc97a3ab0fc123IAA1mPM18LwuOkyuSGrb+11IvJFdcEWsOe8cJD1DX3uSEHiLwJYAAAAAEAAEa9nru4JIYAEAAQC7gkhg"}).REACT_APP_GOOGLE_CLIENT_ID},server:{url:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_AGORA_APP_ID:"df4bc258854f4cb293dc97a3ab0fc123",REACT_APP_AGORA_APP_TOKEN:"006df4bc258854f4cb293dc97a3ab0fc123IAA1mPM18LwuOkyuSGrb+11IvJFdcEWsOe8cJD1DX3uSEHiLwJYAAAAAEAAEa9nru4JIYAEAAQC7gkhg"}).REACT_APP_SERVER_URL}},Xn=Qn.agora.appId,Zn=Qn.agora.appToken;console.log("agora sdk version: "+Kn.a.VERSION+" compatible: "+Kn.a.checkSystemRequirements());var $n=new(function(){function e(){var t=this;Object(b.a)(this,e),this.client=void 0,this.localAudioTrack=null,this.uid=null,this.client=Kn.a.createClient({mode:"live",codec:"h264"}),this.client.on("user-published",function(){var e=Object(W.a)(F.a.mark((function e(n,r){var a;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.client.subscribe(n,r);case 2:console.log("subscribe success"),"audio"===r&&(null===(a=n.audioTrack)||void 0===a||a.play());case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}())}return Object(p.a)(e,[{key:"join",value:function(){var e=Object(W.a)(F.a.mark((function e(){return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.client.join(Xn,"EyeMo",Zn);case 3:return this.uid=e.sent,e.next=6,this.client.setClientRole("host");case 6:return e.next=8,Kn.a.createMicrophoneAudioTrack();case 8:return this.localAudioTrack=e.sent,e.next=11,this.client.publish([this.localAudioTrack]);case 11:return e.next=13,this.disableMic();case 13:Ie.isConnectedChat=!0,console.log("Publish success!"),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(0),console.log("Error on join to chat: "+e.t0);case 20:case"end":return e.stop()}}),e,this,[[0,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"leave",value:function(){var e=Object(W.a)(F.a.mark((function e(){var t;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,null===(t=this.localAudioTrack)||void 0===t||t.close(),e.next=4,this.client.leave();case 4:Ie.isConnectedChat=!1,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("Error on leave chat: "+e.t0);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(){return e.apply(this,arguments)}}()},{key:"enableMic",value:function(){var e=Object(W.a)(F.a.mark((function e(){var t;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,null===(t=this.localAudioTrack)||void 0===t?void 0:t.setEnabled(!0);case 3:Ie.isEnableMic=!0,e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log("Error on enable mic: "+e.t0);case 9:case"end":return e.stop()}}),e,this,[[0,6]])})));return function(){return e.apply(this,arguments)}}()},{key:"disableMic",value:function(){var e=Object(W.a)(F.a.mark((function e(){var t;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,null===(t=this.localAudioTrack)||void 0===t?void 0:t.setEnabled(!1);case 3:Ie.isEnableMic=!1,e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log("Error on disable mic: "+e.t0);case 9:case"end":return e.stop()}}),e,this,[[0,6]])})));return function(){return e.apply(this,arguments)}}()},{key:"getUserCount",value:function(){return console.log("Number of users: "+this.client.getRTCStats().UserCount),this.client.getRTCStats().UserCount}}]),e}()),er=n.p+"static/media/userIcon.401c41c6.svg",tr=n(194),nr=n.n(tr),rr=function(){for(var e="#",t=0;t<6;t++)e+="0123456789ABCDEF"[Math.floor(16*Math.random())];return e},ar=function(){return Object(Te.jsx)("li",{className:nr.a.item,style:{backgroundColor:rr()},children:Object(Te.jsx)("img",{src:er,alt:"User icon"})})},ir=n.p+"static/media/mic.7674c511.svg",cr=n.p+"static/media/mic-white.1fcdc1a6.svg",or=n(58),sr=n.n(or),ur=Object(u.a)((function(){var e=ke().editorStore,t=Object(r.useState)(!1),n=Object(Me.a)(t,2),a=n[0],i=n[1],c=$n.getUserCount(),o=function(){var t=Object(W.a)(F.a.mark((function t(){return F.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.isConnectedChat){t.next=5;break}return t.next=3,$n.leave();case 3:t.next=7;break;case 5:return t.next=7,$n.join();case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),s=function(){var t=Object(W.a)(F.a.mark((function t(){return F.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.isEnableMic){t.next=5;break}return t.next=3,$n.disableMic();case 3:t.next=7;break;case 5:return t.next=7,$n.enableMic();case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(r.useEffect)((function(){i(e.isConnectedChat)}),[e.isConnectedChat]),Object(Te.jsxs)("div",{className:sr.a.container,children:[Object(Te.jsx)("h2",{className:sr.a.title,children:"Voice Room"}),Object(Te.jsxs)("div",{className:sr.a.wrapper,children:[a&&c&&Object(Te.jsx)("ul",{className:sr.a.memberList,children:Object(N.a)(Array(c)).map((function(e){return Object(Te.jsx)(ar,{})}))}),Object(Te.jsx)(Gt,{onClick:o,text:a?"Leave":"Join the room",colorTheme:a?Pt:Tt}),Object(Te.jsxs)("div",{className:sr.a.micBlock,children:[Object(Te.jsx)("button",{onClick:s,className:O()(sr.a.micButton,Object(d.a)({},sr.a.micOff,!e.isEnableMic)),children:Object(Te.jsx)("img",{src:e.isEnableMic?ir:cr,alt:"Mute"})}),Object(Te.jsx)("p",{children:e.isEnableMic?"You're Live":"Tap to Unmute"})]})]})]})})),lr=n(420),dr=n(417),br=n(197),pr=n.n(br),hr=n(418),fr=n(113),jr=n.n(fr),mr=n(195),vr=Qn.google.clientId,Or=Object(u.a)((function(e){var t=e.onLogin,n=e.onError;return Object(Te.jsx)("div",{children:Object(Te.jsx)(mr.GoogleLogin,{clientId:vr,buttonText:"Sign in with Google",onSuccess:t,onFailure:n,cookiePolicy:"single_host_origin",responseType:"code,token"})})})),xr=n(196),gr=n.n(xr).a.create({baseURL:Qn.server.url,headers:{"X-Custom-Header":"eyeMo"},responseType:"json"}),yr={getUserProfile:function(){var e;return gr({method:"GET",url:"/user/profile",headers:{Authorization:"Bearer ".concat(null===(e=Ce.tokens)||void 0===e?void 0:e.accessToken)}})},getNewAccessToken:function(){var e;return gr({method:"GET",url:"/user/access/token?refreshToken=".concat(null===(e=Ce.tokens)||void 0===e?void 0:e.refreshToken)})},postLogin:function(){return gr({method:"POST",url:"/user/login/google",data:{idToken:Ce.googleToken}})},postLogout:function(){var e;return gr({method:"POST",url:"/user/logout",data:{refreshToken:null===(e=Ce.tokens)||void 0===e?void 0:e.refreshToken}})}},_r=Object(u.a)((function(){var e=ke().userStore,t=Object(r.useState)(!1),n=Object(Me.a)(t,2),a=n[0],i=n[1],c=Object(r.useState)(!1),o=Object(Me.a)(c,2),s=o[0],u=o[1],l=function(){var t=Object(W.a)(F.a.mark((function t(n){var r,a,i,c,o;return F.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=n.tokenId){t.next=3;break}return t.abrupt("return");case 3:return e.googleToken=r,t.prev=4,t.next=7,yr.postLogin();case 7:return a=t.sent,i=a.data,e.tokens=i.tokens,t.next=12,yr.getUserProfile();case 12:c=t.sent,o=c.data,e.user=o,t.next=20;break;case 17:t.prev=17,t.t0=t.catch(4),u(!0);case 20:case"end":return t.stop()}}),t,null,[[4,17]])})));return function(e){return t.apply(this,arguments)}}();return Object(Te.jsx)("div",{children:e.user?Object(Te.jsx)(Fe.a,{onClick:function(){e.isShowUserProfile=!e.isShowUserProfile},children:e.isShowUserProfile?Object(Te.jsx)(pr.a,{}):e.user.photoUrl?Object(Te.jsx)(lr.a,{alt:"user",src:e.user.photoUrl}):Object(Te.jsx)(lr.a,{alt:"user"})}):Object(Te.jsxs)(Te.Fragment,{children:[Object(Te.jsx)(j.a,{variant:"contained",color:"primary",onClick:function(){i(!0)},children:"Sign In"}),Object(Te.jsx)(dr.a,{open:a,onClose:function(){i(!1)},"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description",className:jr.a.container,children:Object(Te.jsxs)("div",{className:jr.a.modalContainer,children:[Object(Te.jsx)("h2",{children:"Sign In"}),Object(Te.jsx)(Or,{onLogin:l,onError:function(e){u(!0)}}),s&&Object(Te.jsx)(hr.a,{severity:"error",className:jr.a.alert,children:"Failed to log in"})]})})]})})})),Ir=n(47),wr=n.n(Ir),Cr=Object(u.a)((function(){var e,t,n,a=ke().userStore,i=Object(r.useState)(!1),c=Object(Me.a)(i,2),o=c[0],s=c[1],u=function(){var e=Object(W.a)(F.a.mark((function e(){return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,yr.postLogout();case 3:a.user=null,a.tokens=null,a.googleToken=null,a.isShowUserProfile=!1,e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),s(!0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();return Object(Te.jsx)("div",{className:wr.a.root,children:Object(Te.jsxs)(l.a,{container:!0,children:[Object(Te.jsx)(l.a,{item:!0,xs:8,children:Object(Te.jsx)("h2",{children:"My Portfolio"})}),Object(Te.jsxs)(l.a,{container:!0,item:!0,xs:4,className:wr.a.userData,children:[(null===(e=a.user)||void 0===e?void 0:e.photoUrl)?Object(Te.jsx)(lr.a,{alt:"user-avatar",src:a.user.photoUrl,className:wr.a.avatar}):Object(Te.jsx)(lr.a,{alt:"user-avatar"}),Object(Te.jsxs)("h3",{className:wr.a.text,children:[null===(t=a.user)||void 0===t?void 0:t.firstName," ",null===(n=a.user)||void 0===n?void 0:n.lastName]}),Object(Te.jsx)("h2",{className:wr.a.text,children:"156.000.000 sec."}),Object(Te.jsx)(j.a,{variant:"contained",children:"Edit Profile"}),Object(Te.jsx)("h4",{className:wr.a.text,children:"Social"}),Object(Te.jsx)(j.a,{variant:"contained",children:"$"}),Object(Te.jsx)("div",{className:wr.a.text,children:"-o-"}),Object(Te.jsx)(j.a,{variant:"contained",children:"Invite"}),Object(Te.jsx)("div",{className:wr.a.text,children:"-o-"}),Object(Te.jsx)(j.a,{color:"primary",variant:"contained",onClick:u,children:"Logout"}),o&&Object(Te.jsx)(hr.a,{severity:"error",className:wr.a.alert,children:"Logout failed"})]})]})})}));var Sr=Object(u.a)((function(){var e=ke(),t=e.editorStore,n=e.userStore;return Object(Te.jsx)(Te.Fragment,{children:Object(Te.jsx)(s.a,{dateAdapter:o.a,children:Object(Te.jsx)("div",{className:at.a.container,children:Object(Te.jsxs)(l.a,{container:!0,className:at.a.wrapper,children:[Object(Te.jsx)(l.a,{container:!0,item:!0,xs:12,className:at.a.header,children:Object(Te.jsx)(_r,{})}),n.isShowUserProfile?Object(Te.jsx)(Cr,{}):Object(Te.jsxs)(Te.Fragment,{children:[t.mode!==w.Show&&Object(Te.jsx)(Yn,{}),Object(Te.jsxs)("div",{className:at.a.playerPanel,children:[Object(Te.jsx)(nt,{}),t.mode===w.Show&&Object(Te.jsx)(ur,{})]})]})]})})})})}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(Object(Te.jsx)(a.a.StrictMode,{children:Object(Te.jsx)(Sr,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},47:function(e,t,n){e.exports={root:"UserProfile_root__1HK7B",avatar:"UserProfile_avatar__1Q3dw",userData:"UserProfile_userData__1JyVF",text:"UserProfile_text__1d6Ai",alert:"UserProfile_alert__1RGbP"}},50:function(e,t,n){e.exports={button:"button_button__q-EjP",withBorder:"button_withBorder__1-5d0",disabled:"button_disabled__1_Ved",blueTheme:"button_blueTheme__Kq4aP",active:"button_active__2mI4J",lightBlueTheme:"button_lightBlueTheme__3oYxs",redTheme:"button_redTheme__344Z4",delete:"button_delete__bY3NW"}},51:function(e,t,n){e.exports={container:"customTimeInput_container__1OJaZ",timeInput:"customTimeInput_timeInput__306I8",buttons:"customTimeInput_buttons__2Xg9j",buttonsWrapper:"customTimeInput_buttonsWrapper__2mFri",removeButton:"customTimeInput_removeButton__3Jxsb",leftPosition:"customTimeInput_leftPosition__1pjBe",rightPosition:"customTimeInput_rightPosition__3elmB"}},58:function(e,t,n){e.exports={container:"chat_container__1pMfk",title:"chat_title__1b1BL",wrapper:"chat_wrapper__83tld",memberList:"chat_memberList__20IWQ",micBlock:"chat_micBlock__2peVb",micButton:"chat_micButton__3EJGT",micOff:"chat_micOff__agetB"}},65:function(e,t,n){e.exports={wrapper:"CutItem_wrapper__1vR9b",playerWrapper:"CutItem_playerWrapper__32VlR",video:"CutItem_video__33TEF",buttons:"CutItem_buttons__JzliV",checkbox:"CutItem_checkbox__2_dpe",playButton:"CutItem_playButton__1QWqr",isVisible:"CutItem_isVisible__335-r",isChosenSource:"CutItem_isChosenSource__2r7bR",checkboxWrapper:"CutItem_checkboxWrapper__3jZA8"}},74:function(e,t,n){e.exports={container:"PlayerPanel_container__TOvcu",header:"PlayerPanel_header__3w0XV",timeRow:"PlayerPanel_timeRow__2x_ng",buttons:"PlayerPanel_buttons__2YgAS",playerWrapper:"PlayerPanel_playerWrapper__16uXZ",previewButtons:"PlayerPanel_previewButtons__1uA4C",loadIcon:"PlayerPanel_loadIcon__3J9Eg",recButton:"PlayerPanel_recButton__3TYfL",recButtonAnimation:"PlayerPanel_recButtonAnimation__2UQQt",active:"PlayerPanel_active__2NmJa"}},76:function(e,t,n){e.exports={container:"timeline_container__PxcIw",wrapper:"timeline_wrapper__1YgEf",playInfo:"timeline_playInfo__27e7B",playButton:"timeline_playButton__2Hjvq",item:"timeline_item__2-tDj"}},85:function(e,t,n){e.exports={playerPanel:"App_playerPanel__3bV36",editingPanel:"App_editingPanel__28fsw",container:"App_container__eSJ6i",wrapper:"App_wrapper__RCHjb",header:"App_header__2L3DO"}},86:function(e,t,n){e.exports={container:"input_container__1OlOE",input:"input_input__3I3G6",buttonsBlock:"input_buttonsBlock__241nw",clearButton:"input_clearButton__3FPaA",copyButton:"input_copyButton__20L6h"}},87:function(e,t,n){e.exports={tabItem:"tabItem_tabItem__1OnFe",active:"tabItem_active__2Ilqp",icon:"tabItem_icon__14Ix2",activeIcon:"tabItem_activeIcon__2Giao"}},88:function(e,t,n){e.exports={cutsPanel:"CutsPanel_cutsPanel__2qCbT",cutsPanelBlank:"CutsPanel_cutsPanelBlank__2gLJh",timeInput:"CutsPanel_timeInput__FdtI3",input:"CutsPanel_input__4Og8R",stepBtn:"CutsPanel_stepBtn__3kDcm",infoLine:"CutsPanel_infoLine__3lLJ8",loadIcon:"CutsPanel_loadIcon__1BsrY",bottomBtn:"CutsPanel_bottomBtn__2J2gr",cutsList:"CutsPanel_cutsList__1Nvl5",bottomPanel:"CutsPanel_bottomPanel__26Yya"}}},[[376,1,2]]]);